<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.40">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Python æ•°æ®åˆ†æ</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<link href="../https://assets.qiufei.site/personal/profile.jpg" rel="icon" type="image/jpeg">
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-549806ee2085284f45b00abea8c6df48.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-dark-8ea72dc5fed832574809a9c94082fbbb.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap-681fbf911679f9b3dbf9743eb275ba49.min.css" rel="stylesheet" append-hash="true" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="../site_libs/bootstrap/bootstrap-dark-7e49aeac8059a213a463aa1a739e8272.min.css" rel="prefetch" append-hash="true" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<script id="quarto-search-options" type="application/json">{
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="https://assets.qiufei.site/setup/styles.css">
</head>

<body class="nav-fixed fullcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="https://qiufei.github.io"> 
<span class="menu-text">é¦–é¡µ</span></a>
  </li>  
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="https://qiufei.github.io/web-slide"> 
<span class="menu-text">è¯¾ä»¶</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../about.html"> 
<span class="menu-text">About</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Python æ•°æ®åˆ†æ</h1>
<p class="subtitle lead">ç¬¬ 11 ç«  æ—¶é—´åºåˆ—</p>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<div id="c77793ad" class="cell" data-execution_count="1">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># SETUP (æä¾›çš„ä»£ç  - éœ€è¦æ”¾åœ¨ notebook çš„é¡¶éƒ¨)</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np  <span class="co"># å¯¼å…¥ NumPy åº“ï¼Œç”¨äºæ•°å€¼è®¡ç®—ï¼Œå¹¶ç®€å†™ä¸º np</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd  <span class="co"># å¯¼å…¥ pandas åº“ï¼Œç”¨äºæ•°æ®åˆ†æï¼Œå¹¶ç®€å†™ä¸º pd</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> datetime <span class="im">import</span> datetime, timedelta  <span class="co"># ä» datetime æ¨¡å—å¯¼å…¥ datetime å’Œ timedelta ç±»</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pytz  <span class="co"># å¯¼å…¥ pytz åº“ï¼Œç”¨äºå¤„ç†æ—¶åŒº</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> pandas.tseries.offsets <span class="im">import</span> Hour, Minute, Day, MonthEnd  <span class="co"># ä» pandas å¯¼å…¥æ—¶é—´åç§»å¯¹è±¡</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="co"># ä¸ºäº†æ¼”ç¤ºï¼Œåœ¨æ­¤ç‰¹å®š notebook ä¸­æŠ‘åˆ¶ FutureWarnings</span></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> warnings  <span class="co"># å¯¼å…¥ warnings æ¨¡å—</span></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a>warnings.simplefilter(action<span class="op">=</span><span class="st">'ignore'</span>, category<span class="op">=</span><span class="pp">FutureWarning</span>)  <span class="co"># å¿½ç•¥ FutureWarnings</span></span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a><span class="co"># ç”¨äºç»˜å›¾</span></span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt  <span class="co"># å¯¼å…¥ matplotlib.pyplot æ¨¡å—ï¼Œç”¨äºç»˜å›¾ï¼Œå¹¶ç®€å†™ä¸º plt</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="æ—¶é—´åºåˆ—æ•°æ®ç®€ä»‹" class="level2">
<h2 class="anchored" data-anchor-id="æ—¶é—´åºåˆ—æ•°æ®ç®€ä»‹">æ—¶é—´åºåˆ—æ•°æ®ç®€ä»‹</h2>
<p>æ—¶é—´åºåˆ—æ•°æ®æ˜¯æŒ‰æ—¶é—´é—´éš”æ”¶é›†çš„ä¸€ç³»åˆ—æ•°æ®ç‚¹ã€‚â±ï¸ å®ƒåœ¨å„ä¸ªé¢†åŸŸéƒ½æ˜¯è‡³å…³é‡è¦çš„æ•°æ®ç±»å‹ï¼š</p>
<ul>
<li><strong>é‡‘è:</strong> è‚¡ç¥¨ä»·æ ¼ã€äº¤æ˜“é‡ã€åˆ©ç‡ ğŸ’°</li>
<li><strong>ç»æµ:</strong> GDPã€é€šè´§è†¨èƒ€ç‡ã€å¤±ä¸šç‡ ğŸ“ˆ</li>
<li><strong>ç”Ÿæ€:</strong> ç§ç¾¤è§„æ¨¡ã€æ¸©åº¦å˜åŒ– ğŸŒ¡ï¸</li>
<li><strong>ç¥ç»ç§‘å­¦:</strong> è„‘ç”µæ³¢æ´»åŠ¨ã€ç¥ç»ä¿¡å· ğŸ§ </li>
<li><strong>ç‰©ç†:</strong> è¿åŠ¨ã€é€Ÿåº¦ã€åŠ é€Ÿåº¦ ğŸš€</li>
</ul>
<p>æœ¬è´¨ä¸Šï¼Œä»»ä½•éšæ—¶é—´é‡å¤è®°å½•çš„å†…å®¹éƒ½æ„æˆæ—¶é—´åºåˆ—ã€‚</p>
</section>
<section id="æ—¶é—´åºåˆ—æ•°æ®çš„ç±»å‹" class="level2">
<h2 class="anchored" data-anchor-id="æ—¶é—´åºåˆ—æ•°æ®çš„ç±»å‹">æ—¶é—´åºåˆ—æ•°æ®çš„ç±»å‹</h2>
<p>æ—¶é—´åºåˆ—æ•°æ®å¯ä»¥æ ¹æ®æ•°æ®ç‚¹ç›¸å¯¹äºæ—¶é—´çš„åº¦é‡æ–¹å¼è¿›è¡Œåˆ†ç±»ï¼š</p>
<ol type="1">
<li><strong>æ—¶é—´æˆ³ (Timestamps):</strong> æ—¶é—´ä¸Šçš„ç‰¹å®šæ—¶åˆ» (ä¾‹å¦‚ï¼Œ2024-10-27 09:30:00)ã€‚</li>
<li><strong>å›ºå®šå‘¨æœŸ (Fixed Periods):</strong> è¡¨ç¤ºæ•´ä¸ªæŒç»­æ—¶é—´ (ä¾‹å¦‚ï¼Œ2017 å¹´ 1 æœˆï¼Œ2020 å¹´)ã€‚</li>
<li><strong>æ—¶é—´é—´éš” (Intervals of Time):</strong> ç”±å¼€å§‹å’Œç»“æŸæ—¶é—´æˆ³æŒ‡ç¤º (ä¾‹å¦‚ï¼Œä»ä¸‹åˆ 2:00 åˆ° 2:30 çš„ç”¨æˆ·ä¼šè¯)ã€‚</li>
<li><strong>å®éªŒæˆ–ç»è¿‡æ—¶é—´ (Experiment or Elapsed Time):</strong> ç›¸å¯¹äºèµ·å§‹ç‚¹çš„æ—¶é—´ (ä¾‹å¦‚ï¼Œé¥¼å¹²æ”¾å…¥çƒ¤ç®±åçš„ç§’æ•°)ã€‚</li>
</ol>
<p>æœ¬ç« ä¸»è¦å…³æ³¨å‰ä¸‰ç§ç±»å‹ (æ—¶é—´æˆ³ã€å›ºå®šå‘¨æœŸå’Œæ—¶é—´é—´éš”)ã€‚</p>
</section>
<section id="æ—¶é—´åºåˆ—è§„åˆ™ä¸ä¸è§„åˆ™" class="level2">
<h2 class="anchored" data-anchor-id="æ—¶é—´åºåˆ—è§„åˆ™ä¸ä¸è§„åˆ™">æ—¶é—´åºåˆ—ï¼šè§„åˆ™ä¸ä¸è§„åˆ™</h2>
<p>æ—¶é—´åºåˆ—ä¹Ÿå¯ä»¥æ˜¯ï¼š</p>
<ul>
<li><strong>å›ºå®šé¢‘ç‡ (è§„åˆ™):</strong> æ•°æ®ç‚¹ä»¥å›ºå®šçš„æ—¶é—´é—´éš”å‡ºç° (ä¾‹å¦‚ï¼Œæ¯ 15 ç§’ã€æ¯ 5 åˆ†é’Ÿã€æ¯æœˆ)ã€‚ğŸ—“ï¸</li>
<li><strong>ä¸è§„åˆ™:</strong> æ•°æ®ç‚¹ä¸éµå¾ªå›ºå®šçš„æ—¶é—´å•ä½ (ä¾‹å¦‚ï¼Œç½‘ç«™è®¿é—®çš„æ—¶é—´æˆ³)ã€‚ğŸš¶</li>
</ul>
<p>è¡¨ç¤ºæ–¹å¼çš„é€‰æ‹©å–å†³äºå…·ä½“çš„åº”ç”¨ã€‚</p>
</section>
<section id="pandas-ä¸­çš„æ—¶é—´åºåˆ—" class="level2">
<h2 class="anchored" data-anchor-id="pandas-ä¸­çš„æ—¶é—´åºåˆ—">pandas ä¸­çš„æ—¶é—´åºåˆ—</h2>
<p><code>pandas</code> æ˜¯ä¸€ä¸ªå¼ºå¤§çš„ Python åº“ï¼Œä¸ºæ—¶é—´åºåˆ—åˆ†ææä¾›äº†å¹¿æ³›çš„å·¥å…·ã€‚å®ƒå…è®¸ä½ ï¼š</p>
<ul>
<li>é«˜æ•ˆå¤„ç†å¤§å‹æ—¶é—´åºåˆ—ã€‚ğŸ—‚ï¸</li>
<li>åˆ‡ç‰‡ã€åˆ‡å—å’Œèšåˆæ•°æ®ã€‚ğŸ”ª</li>
<li>å¯¹ä¸è§„åˆ™å’Œå›ºå®šé¢‘ç‡çš„æ—¶é—´åºåˆ—è¿›è¡Œé‡é‡‡æ ·ã€‚ğŸ”„</li>
<li>å¤„ç†ç¼ºå¤±æ•°æ®ã€‚â“</li>
</ul>
<p>è¿™äº›åŠŸèƒ½å¯¹äºé‡‘èå’Œç»æµåº”ç”¨è‡³å…³é‡è¦ï¼Œä½†å®ƒä»¬åŒæ ·é€‚ç”¨äºåˆ†æå„ç§æ•°æ®é›†ï¼Œå¦‚æœåŠ¡å™¨æ—¥å¿—ã€‚</p>
</section>
<section id="å¯¼å…¥å¿…è¦çš„åº“" class="level2">
<h2 class="anchored" data-anchor-id="å¯¼å…¥å¿…è¦çš„åº“">å¯¼å…¥å¿…è¦çš„åº“</h2>
<p>åœ¨æ·±å…¥ç ”ç©¶æ—¶é—´åºåˆ—æ“ä½œä¹‹å‰ï¼Œè®©æˆ‘ä»¬å¯¼å…¥å¿…è¦çš„åº“ï¼šç”¨äºæ•°å€¼è¿ç®—çš„ <code>NumPy</code> å’Œç”¨äºæ•°æ®åˆ†æçš„ <code>pandas</code>ã€‚</p>
<div id="1cfc5ea2" class="cell" data-execution_count="2">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np  <span class="co"># å¯¼å…¥ NumPy åº“ï¼Œç”¨äºæ•°å€¼è®¡ç®—</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd  <span class="co"># å¯¼å…¥ pandas åº“ï¼Œç”¨äºæ•°æ®åˆ†æ</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="æ—¥æœŸå’Œæ—¶é—´æ•°æ®ç±»å‹åŠå·¥å…·" class="level2">
<h2 class="anchored" data-anchor-id="æ—¥æœŸå’Œæ—¶é—´æ•°æ®ç±»å‹åŠå·¥å…·">æ—¥æœŸå’Œæ—¶é—´æ•°æ®ç±»å‹åŠå·¥å…·</h2>
<p>Python çš„æ ‡å‡†åº“æä¾›äº†ç”¨äºå¤„ç†æ—¥æœŸå’Œæ—¶é—´çš„æ¨¡å—ï¼š</p>
<ul>
<li><code>datetime</code>: æä¾›ç”¨äºæ“ä½œæ—¥æœŸå’Œæ—¶é—´çš„ç±» (ä¾‹å¦‚ï¼Œ<code>datetime</code>ã€<code>date</code>ã€<code>time</code>ã€<code>timedelta</code>)ã€‚</li>
<li><code>time</code>: æä¾›ä¸æ—¶é—´ç›¸å…³çš„å‡½æ•°ã€‚</li>
<li><code>calendar</code>: ä¸æ—¥å†ç›¸å…³çš„å‡½æ•°ã€‚</li>
</ul>
<p><code>datetime.datetime</code> ç±»å‹ (æˆ–ç®€ç§°ä¸º <code>datetime</code>) æ˜¯å¸¸ç”¨çš„ã€‚</p>
</section>
<section id="datetime-å¯¹è±¡" class="level2">
<h2 class="anchored" data-anchor-id="datetime-å¯¹è±¡"><code>datetime</code> å¯¹è±¡</h2>
<p>è®©æˆ‘ä»¬åˆ›å»ºä¸€ä¸ª <code>datetime</code> å¯¹è±¡æ¥è¡¨ç¤ºå½“å‰æ—¶é—´ï¼š</p>
<div id="85966232" class="cell" data-execution_count="3">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> datetime <span class="im">import</span> datetime  <span class="co"># ä» datetime æ¨¡å—å¯¼å…¥ datetime ç±»</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>now <span class="op">=</span> datetime.now()  <span class="co"># è·å–å½“å‰æ—¥æœŸå’Œæ—¶é—´</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(now)  <span class="co"># æ‰“å°å½“å‰æ—¥æœŸå’Œæ—¶é—´</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>2025-02-19 14:22:41.543917</code></pre>
</div>
</div>
<p>æ­¤ä»£ç ç‰‡æ®µæ£€ç´¢å½“å‰æ—¥æœŸå’Œæ—¶é—´ã€‚</p>
</section>
<section id="datetime-å¯¹è±¡-ç»­" class="level2">
<h2 class="anchored" data-anchor-id="datetime-å¯¹è±¡-ç»­"><code>datetime</code> å¯¹è±¡ (ç»­)</h2>
<p>æˆ‘ä»¬ä¹Ÿå¯ä»¥æ‰‹åŠ¨æ„å»ºä¸€ä¸ª datetime å¯¹è±¡ï¼š</p>
<div id="50fb1f6e" class="cell" data-execution_count="4">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> datetime <span class="im">import</span> datetime  <span class="co"># ç¡®ä¿å¯¼å…¥äº† datetime ç±»</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>my_date <span class="op">=</span> datetime(<span class="dv">2024</span>, <span class="dv">10</span>, <span class="dv">27</span>, <span class="dv">10</span>, <span class="dv">30</span>, <span class="dv">0</span>)  <span class="co"># å¹´ã€æœˆã€æ—¥ã€æ—¶ã€åˆ†ã€ç§’</span></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(my_date)  <span class="co"># æ‰“å°æ‰‹åŠ¨åˆ›å»ºçš„ datetime å¯¹è±¡</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>2024-10-27 10:30:00</code></pre>
</div>
</div>
<p>è®¿é—®å„ä¸ªç»„æˆéƒ¨åˆ†ï¼š</p>
<div id="88f6f9cc" class="cell" data-execution_count="5">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> datetime <span class="im">import</span> datetime <span class="co"># ç¡®ä¿å¯¼å…¥äº†datetime</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>now <span class="op">=</span> datetime.now()  <span class="co"># è·å–å½“å‰æ—¥æœŸå’Œæ—¶é—´</span></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Year: </span><span class="sc">{</span>now<span class="sc">.</span>year<span class="sc">}</span><span class="ss">, Month: </span><span class="sc">{</span>now<span class="sc">.</span>month<span class="sc">}</span><span class="ss">, Day: </span><span class="sc">{</span>now<span class="sc">.</span>day<span class="sc">}</span><span class="ss">"</span>)  <span class="co"># æ‰“å°å¹´ã€æœˆã€æ—¥</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Year: 2025, Month: 2, Day: 19</code></pre>
</div>
</div>
</section>
<section id="timedelta-å¯¹è±¡" class="level2">
<h2 class="anchored" data-anchor-id="timedelta-å¯¹è±¡"><code>timedelta</code> å¯¹è±¡</h2>
<p><code>timedelta</code> å¯¹è±¡è¡¨ç¤ºä¸¤ä¸ª <code>datetime</code> å¯¹è±¡ä¹‹é—´çš„å·®ï¼š</p>
<div id="fe6b32a8" class="cell" data-execution_count="6">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> datetime <span class="im">import</span> datetime  <span class="co"># ç¡®ä¿å¯¼å…¥äº† datetime</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>delta <span class="op">=</span> datetime(<span class="dv">2011</span>, <span class="dv">1</span>, <span class="dv">7</span>) <span class="op">-</span> datetime(<span class="dv">2008</span>, <span class="dv">6</span>, <span class="dv">24</span>, <span class="dv">8</span>, <span class="dv">15</span>)  <span class="co"># è®¡ç®—ä¸¤ä¸ª datetime å¯¹è±¡ä¹‹é—´çš„å·®</span></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(delta)  <span class="co"># æ‰“å°æ—¶é—´å·®</span></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Days: </span><span class="sc">{</span>delta<span class="sc">.</span>days<span class="sc">}</span><span class="ss">, Seconds: </span><span class="sc">{</span>delta<span class="sc">.</span>seconds<span class="sc">}</span><span class="ss">"</span>)  <span class="co"># æ‰“å°å¤©æ•°å’Œç§’æ•°</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>926 days, 15:45:00
Days: 926, Seconds: 56700</code></pre>
</div>
</div>
</section>
<section id="timedelta-å¯¹è±¡-ç»­" class="level2">
<h2 class="anchored" data-anchor-id="timedelta-å¯¹è±¡-ç»­"><code>timedelta</code> å¯¹è±¡ (ç»­)</h2>
<ul>
<li><code>delta.days</code>: è¿”å›ç›¸å·®çš„å¤©æ•°ã€‚</li>
<li><code>delta.seconds</code>: è¿”å›ç›¸å·®çš„ç§’æ•° (åœ¨æœ€åä¸€å¤©å†…)ã€‚å®ƒ<em>ä¸</em>åŒ…æ‹¬åŒ…å«åœ¨ <code>days</code> å·®å¼‚ä¸­çš„ç§’æ•°ã€‚</li>
</ul>
</section>
<section id="timedelta-å¯¹è±¡-ç»­-1" class="level2">
<h2 class="anchored" data-anchor-id="timedelta-å¯¹è±¡-ç»­-1"><code>timedelta</code> å¯¹è±¡ (ç»­)</h2>
<p>æ‚¨å¯ä»¥å°† <code>timedelta</code> å¯¹è±¡ä¸ <code>datetime</code> å¯¹è±¡ç›¸åŠ æˆ–ç›¸å‡ï¼š</p>
<div id="81f11bae" class="cell" data-execution_count="7">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> datetime <span class="im">import</span> datetime, timedelta  <span class="co"># ç¡®ä¿å¯¼å…¥äº† datetime å’Œ timedelta</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>start <span class="op">=</span> datetime(<span class="dv">2011</span>, <span class="dv">1</span>, <span class="dv">7</span>)  <span class="co"># åˆ›å»ºä¸€ä¸ª datetime å¯¹è±¡</span></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(start <span class="op">+</span> timedelta(<span class="dv">12</span>))  <span class="co"># åŠ ä¸Š 12 å¤©</span></span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(start <span class="op">-</span> <span class="dv">2</span> <span class="op">*</span> timedelta(<span class="dv">12</span>))  <span class="co"># å‡å» 24 å¤©</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>2011-01-19 00:00:00
2010-12-14 00:00:00</code></pre>
</div>
</div>
</section>
<section id="datetime-æ¨¡å—ä¸­çš„ç±»å‹" class="level2">
<h2 class="anchored" data-anchor-id="datetime-æ¨¡å—ä¸­çš„ç±»å‹"><code>datetime</code> æ¨¡å—ä¸­çš„ç±»å‹</h2>
<table class="caption-top table">
<colgroup>
<col style="width: 50%">
<col style="width: 50%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">ç±»å‹</th>
<th style="text-align: left;">æè¿°</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><code>date</code></td>
<td style="text-align: left;">å­˜å‚¨æ—¥å†æ—¥æœŸ (å¹´ã€æœˆã€æ—¥)ã€‚</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>time</code></td>
<td style="text-align: left;">å­˜å‚¨ä¸€å¤©ä¸­çš„æ—¶é—´ (å°æ—¶ã€åˆ†é’Ÿã€ç§’ã€å¾®ç§’)ã€‚</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>datetime</code></td>
<td style="text-align: left;">åŒæ—¶å­˜å‚¨æ—¥æœŸå’Œæ—¶é—´ã€‚</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>timedelta</code></td>
<td style="text-align: left;">è¡¨ç¤ºä¸¤ä¸ª <code>datetime</code> å€¼ä¹‹é—´çš„å·®ã€‚</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>tzinfo</code></td>
<td style="text-align: left;">ç”¨äºå­˜å‚¨æ—¶åŒºä¿¡æ¯çš„åŸºç±»å‹ã€‚</td>
</tr>
</tbody>
</table>
</section>
<section id="å­—ç¬¦ä¸²å’Œ-datetime-ä¹‹é—´çš„è½¬æ¢" class="level2">
<h2 class="anchored" data-anchor-id="å­—ç¬¦ä¸²å’Œ-datetime-ä¹‹é—´çš„è½¬æ¢">å­—ç¬¦ä¸²å’Œ Datetime ä¹‹é—´çš„è½¬æ¢</h2>
<ul>
<li><strong><code>strftime()</code>:</strong> å°† <code>datetime</code> å¯¹è±¡æ ¼å¼åŒ–<em>ä¸º</em>å­—ç¬¦ä¸²ã€‚</li>
<li><strong><code>strptime()</code>:</strong> å°†å­—ç¬¦ä¸²è§£æ<em>ä¸º</em> <code>datetime</code> å¯¹è±¡ã€‚</li>
<li><strong><code>pd.to_datetime()</code>:</strong> åœ¨ pandas ä¸­å°†å­—ç¬¦ä¸²è½¬æ¢ä¸º DatetimeIndexã€‚</li>
</ul>
<div id="f38736d4" class="cell" data-execution_count="8">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> datetime <span class="im">import</span> datetime  <span class="co"># ç¡®ä¿å¯¼å…¥äº† datetime</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>stamp <span class="op">=</span> datetime(<span class="dv">2011</span>, <span class="dv">1</span>, <span class="dv">3</span>)  <span class="co"># åˆ›å»ºä¸€ä¸ª datetime å¯¹è±¡</span></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a><span class="co"># datetime to string</span></span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="bu">str</span>(stamp))  <span class="co"># å°† datetime å¯¹è±¡è½¬æ¢ä¸ºå­—ç¬¦ä¸² (ä½¿ç”¨é»˜è®¤æ ¼å¼)</span></span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(stamp.strftime(<span class="st">'%Y-%m-</span><span class="sc">%d</span><span class="st">'</span>))  <span class="co"># ä½¿ç”¨ strftime() æ ¼å¼åŒ–æ—¥æœŸ (å¹´-æœˆ-æ—¥)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>2011-01-03 00:00:00
2011-01-03</code></pre>
</div>
</div>
</section>
<section id="å­—ç¬¦ä¸²å’Œ-datetime-ä¹‹é—´çš„è½¬æ¢-ç»­" class="level2">
<h2 class="anchored" data-anchor-id="å­—ç¬¦ä¸²å’Œ-datetime-ä¹‹é—´çš„è½¬æ¢-ç»­">å­—ç¬¦ä¸²å’Œ Datetime ä¹‹é—´çš„è½¬æ¢ (ç»­)</h2>
<div id="5dbfa2f4" class="cell" data-execution_count="9">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> datetime <span class="im">import</span> datetime  <span class="co"># ç¡®ä¿å¯¼å…¥äº† datetime</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a><span class="co"># string to datetime</span></span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>value <span class="op">=</span> <span class="st">'2011-01-03'</span>  <span class="co"># å®šä¹‰ä¸€ä¸ªæ—¥æœŸå­—ç¬¦ä¸²</span></span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(datetime.strptime(value, <span class="st">'%Y-%m-</span><span class="sc">%d</span><span class="st">'</span>))  <span class="co"># ä½¿ç”¨ strptime() å°†å­—ç¬¦ä¸²è§£æä¸º datetime å¯¹è±¡</span></span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a>datestrs <span class="op">=</span> [<span class="st">'7/6/2011'</span>, <span class="st">'8/6/2011'</span>]  <span class="co"># å®šä¹‰ä¸€ä¸ªæ—¥æœŸå­—ç¬¦ä¸²åˆ—è¡¨</span></span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a>dt_list <span class="op">=</span> [datetime.strptime(x, <span class="st">'%m/</span><span class="sc">%d</span><span class="st">/%Y'</span>) <span class="cf">for</span> x <span class="kw">in</span> datestrs]  <span class="co"># åˆ—è¡¨æ¨å¯¼å¼ï¼Œå°†å­—ç¬¦ä¸²åˆ—è¡¨è½¬æ¢ä¸º datetime å¯¹è±¡åˆ—è¡¨</span></span>
<span id="cb15-9"><a href="#cb15-9" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(dt_list)  <span class="co"># æ‰“å° datetime å¯¹è±¡åˆ—è¡¨</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>2011-01-03 00:00:00
[datetime.datetime(2011, 7, 6, 0, 0), datetime.datetime(2011, 8, 6, 0, 0)]</code></pre>
</div>
</div>
</section>
<section id="å¸¸ç”¨-strftime-å’Œ-strptime-æ ¼å¼ä»£ç " class="level2">
<h2 class="anchored" data-anchor-id="å¸¸ç”¨-strftime-å’Œ-strptime-æ ¼å¼ä»£ç ">å¸¸ç”¨ <code>strftime</code> å’Œ <code>strptime</code> æ ¼å¼ä»£ç </h2>
<div class="line-block">ä»£ç  | æè¿° |<br>
: | :- |<br>
<code>%Y</code> | 4 ä½æ•°çš„å¹´ä»½ |<br>
<code>%y</code> | 2 ä½æ•°çš„å¹´ä»½ |<br>
<code>%m</code> | 2 ä½æ•°çš„æœˆä»½ [01, 12] |<br>
<code>%d</code> | 2 ä½æ•°çš„æ—¥æœŸ [01, 31] |<br>
<code>%H</code> | å°æ—¶ (24 å°æ—¶åˆ¶) [00, 23] |<br>
<code>%I</code> | å°æ—¶ (12 å°æ—¶åˆ¶) [01, 12] |<br>
<code>%M</code> | 2 ä½æ•°çš„åˆ†é’Ÿ [00, 59] |<br>
<code>%S</code> | ç§’ [00, 61] (60 å’Œ 61 ç”¨äºé—°ç§’) |<br>
<code>%f</code> | å¾®ç§’ï¼Œæ•´æ•°ï¼Œé›¶å¡«å…… (ä» 000000 åˆ° 999999) |<br>
<code>%j</code> | ä¸€å¹´ä¸­çš„ç¬¬å‡ å¤©ï¼Œé›¶å¡«å……æ•´æ•° (ä» 001 åˆ° 366) |</div>
</section>
<section id="æ›´å¤š-strftime-å’Œ-strptime-æ ¼å¼ä»£ç " class="level2">
<h2 class="anchored" data-anchor-id="æ›´å¤š-strftime-å’Œ-strptime-æ ¼å¼ä»£ç ">æ›´å¤š <code>strftime</code> å’Œ <code>strptime</code> æ ¼å¼ä»£ç </h2>
<div class="line-block">ä»£ç  | æè¿° |<br>
:- | : |<br>
<code>%w</code> | æ˜ŸæœŸå‡ ï¼Œæ•´æ•° [0 (æ˜ŸæœŸæ—¥), 6] |<br>
<code>%u</code> | æ˜ŸæœŸå‡ ï¼Œä» 1 å¼€å§‹çš„æ•´æ•°ï¼Œ1 ä»£è¡¨æ˜ŸæœŸä¸€ã€‚ |<br>
<code>%U</code> | ä¸€å¹´ä¸­çš„å‘¨æ•° [00, 53]; æ˜ŸæœŸæ—¥æ˜¯ç¬¬ä¸€å¤©ï¼Œç¬¬ä¸€ä¸ªæ˜ŸæœŸæ—¥ä¹‹å‰çš„æ—¥å­æ˜¯ â€œç¬¬ 0 å‘¨â€ |<br>
<code>%W</code> | ä¸€å¹´ä¸­çš„å‘¨æ•° [00, 53]; æ˜ŸæœŸä¸€è¢«è®¤ä¸ºæ˜¯æ¯å‘¨çš„ç¬¬ä¸€å¤©ï¼Œä¸€å¹´ä¸­ç¬¬ä¸€ä¸ªæ˜ŸæœŸä¸€ä¹‹å‰çš„æ—¥å­æ˜¯ â€œç¬¬ 0 å‘¨â€ |<br>
<code>%z</code> | UTC æ—¶åŒºåç§»é‡ï¼Œ+HHMM æˆ– -HHMM; å¦‚æœæ˜¯ naive åˆ™ä¸ºç©º |</div>
<p>|<code>%Z</code> |æ—¶åŒºåç§°ä½œä¸ºå­—ç¬¦ä¸²ï¼Œå¦‚æœæ²¡æœ‰æ—¶åŒºï¼Œåˆ™ä¸ºç©ºå­—ç¬¦ä¸² | | <code>%F</code> | <code>%Y-%m-%d</code> çš„å¿«æ·æ–¹å¼ (ä¾‹å¦‚ï¼Œ2012-4-18) | | <code>%D</code> | <code>%m/%d/%y</code> çš„å¿«æ·æ–¹å¼ (ä¾‹å¦‚ï¼Œ04/18/12) |</p>
</section>
<section id="pandas-ä¸­çš„-pd.to_datetime" class="level2">
<h2 class="anchored" data-anchor-id="pandas-ä¸­çš„-pd.to_datetime">pandas ä¸­çš„ <code>pd.to_datetime()</code></h2>
<p><code>pandas</code> ä¸“ä¸ºå¤„ç†æ—¥æœŸæ•°ç»„è€Œè®¾è®¡ã€‚<code>pd.to_datetime()</code> æ–¹æ³•éå¸¸é€šç”¨ï¼š</p>
<div id="437773c7" class="cell" data-execution_count="10">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd  <span class="co"># ç¡®ä¿å¯¼å…¥äº† pandas</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>datestrs <span class="op">=</span> [<span class="st">'2011-07-06 12:00:00'</span>, <span class="st">'2011-08-06 00:00:00'</span>]  <span class="co"># å®šä¹‰ä¸€ä¸ªæ—¥æœŸå­—ç¬¦ä¸²åˆ—è¡¨</span></span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a>dt_index <span class="op">=</span> pd.to_datetime(datestrs)  <span class="co"># ä½¿ç”¨ pd.to_datetime() å°†å­—ç¬¦ä¸²åˆ—è¡¨è½¬æ¢ä¸º DatetimeIndex</span></span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(dt_index)  <span class="co"># æ‰“å° DatetimeIndex</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>DatetimeIndex(['2011-07-06 12:00:00', '2011-08-06 00:00:00'], dtype='datetime64[ns]', freq=None)</code></pre>
</div>
</div>
</section>
<section id="pandas-ä¸­çš„-pd.to_datetime-ç»­" class="level2">
<h2 class="anchored" data-anchor-id="pandas-ä¸­çš„-pd.to_datetime-ç»­">pandas ä¸­çš„ <code>pd.to_datetime()</code> (ç»­)</h2>
<p>å®ƒä¼šè‡ªåŠ¨å¤„ç†å„ç§æ—¥æœŸæ ¼å¼ï¼Œè¿˜å¯ä»¥è¯†åˆ«ç¼ºå¤±å€¼ï¼š</p>
<div id="5e0b2461" class="cell" data-execution_count="11">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd  <span class="co"># ç¡®ä¿å¯¼å…¥äº† pandas</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>idx <span class="op">=</span> pd.to_datetime(datestrs <span class="op">+</span> [<span class="va">None</span>])  <span class="co"># å°†åŒ…å« None çš„åˆ—è¡¨è½¬æ¢ä¸º DatetimeIndex</span></span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(idx)  <span class="co"># æ‰“å° DatetimeIndex</span></span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(idx[<span class="dv">2</span>])  <span class="co"># NaT (Not a Time)  # æ‰“å°ç¬¬ä¸‰ä¸ªå…ƒç´  (NaT)</span></span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(pd.isna(idx))  <span class="co"># æ£€æŸ¥ DatetimeIndex ä¸­çš„ç¼ºå¤±å€¼ (NaT)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>DatetimeIndex(['2011-07-06 12:00:00', '2011-08-06 00:00:00', 'NaT'], dtype='datetime64[ns]', freq=None)
NaT
[False False  True]</code></pre>
</div>
</div>
<p><code>NaT</code> æ˜¯ pandas ä¸­è¡¨ç¤ºç©ºæ—¶é—´æˆ³çš„æ–¹å¼ã€‚</p>
</section>
<section id="ç‰¹å®šäºåŒºåŸŸè®¾ç½®çš„æ—¥æœŸæ ¼å¼" class="level2">
<h2 class="anchored" data-anchor-id="ç‰¹å®šäºåŒºåŸŸè®¾ç½®çš„æ—¥æœŸæ ¼å¼">ç‰¹å®šäºåŒºåŸŸè®¾ç½®çš„æ—¥æœŸæ ¼å¼</h2>
<p><code>datetime</code> å¯¹è±¡å…·æœ‰ç‰¹å®šäºåŒºåŸŸè®¾ç½®çš„æ ¼å¼åŒ–é€‰é¡¹ã€‚</p>
<div class="line-block">ç±»å‹ | æè¿° |<br>
: | :- |<br>
<code>%a</code> | ç¼©å†™çš„æ˜ŸæœŸå‡ åç§°ã€‚ |<br>
<code>%A</code> | å®Œæ•´çš„æ˜ŸæœŸå‡ åç§°ã€‚ |<br>
<code>%b</code> | ç¼©å†™çš„æœˆä»½åç§°ã€‚ |<br>
<code>%B</code> | å®Œæ•´çš„æœˆä»½åç§°ã€‚ |<br>
<code>%c</code> | å®Œæ•´çš„æ—¥æœŸå’Œæ—¶é—´ (ä¾‹å¦‚ï¼Œâ€˜Tue 01 May 2012 04:20:57 PMâ€™)ã€‚ |<br>
<code>%p</code> | åŒºåŸŸè®¾ç½®ä¸­ç›¸å½“äº AM æˆ– PM çš„å€¼ã€‚ |<br>
<code>%x</code> | åŒºåŸŸè®¾ç½®çš„æ ¼å¼åŒ–æ—¥æœŸ (ä¾‹å¦‚ï¼Œåœ¨ç¾å›½ï¼Œ2012 å¹´ 5 æœˆ 1 æ—¥ä¼šäº§ç”Ÿ â€˜05/01/2012â€™)ã€‚ |<br>
<code>%X</code> | åŒºåŸŸè®¾ç½®çš„æ—¶é—´ (ä¾‹å¦‚ï¼Œâ€˜04:24:12 PMâ€™)ã€‚ |</div>
</section>
<section id="pandas-ä¸­çš„æ—¶é—´åºåˆ—åŸºç¡€" class="level2">
<h2 class="anchored" data-anchor-id="pandas-ä¸­çš„æ—¶é—´åºåˆ—åŸºç¡€">pandas ä¸­çš„æ—¶é—´åºåˆ—åŸºç¡€</h2>
<p><code>pandas</code> ä¸­ä¸€ä¸ªåŸºæœ¬çš„æ—¶é—´åºåˆ—å¯¹è±¡æ˜¯ä¸€ä¸ªä»¥æ—¶é—´æˆ³ä¸ºç´¢å¼•çš„ <code>Series</code>ï¼š</p>
<div id="a49e1f31" class="cell" data-execution_count="12">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np  <span class="co"># å¯¼å…¥ NumPy</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd  <span class="co"># å¯¼å…¥ pandas</span></span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> datetime <span class="im">import</span> datetime  <span class="co"># å¯¼å…¥ datetime</span></span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a>dates <span class="op">=</span> [datetime(<span class="dv">2011</span>, <span class="dv">1</span>, <span class="dv">2</span>), datetime(<span class="dv">2011</span>, <span class="dv">1</span>, <span class="dv">5</span>),</span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a>         datetime(<span class="dv">2011</span>, <span class="dv">1</span>, <span class="dv">7</span>), datetime(<span class="dv">2011</span>, <span class="dv">1</span>, <span class="dv">8</span>),</span>
<span id="cb21-7"><a href="#cb21-7" aria-hidden="true" tabindex="-1"></a>         datetime(<span class="dv">2011</span>, <span class="dv">1</span>, <span class="dv">10</span>), datetime(<span class="dv">2011</span>, <span class="dv">1</span>, <span class="dv">12</span>)]  <span class="co"># åˆ›å»ºä¸€ä¸ª datetime å¯¹è±¡åˆ—è¡¨</span></span>
<span id="cb21-8"><a href="#cb21-8" aria-hidden="true" tabindex="-1"></a>ts <span class="op">=</span> pd.Series(np.random.randn(<span class="dv">6</span>), index<span class="op">=</span>dates)  <span class="co"># åˆ›å»ºä¸€ä¸ª Seriesï¼Œä»¥ datetime å¯¹è±¡åˆ—è¡¨ä½œä¸ºç´¢å¼•</span></span>
<span id="cb21-9"><a href="#cb21-9" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(ts)  <span class="co"># æ‰“å°æ—¶é—´åºåˆ—</span></span>
<span id="cb21-10"><a href="#cb21-10" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="bu">type</span>(ts))  <span class="co"># æ‰“å° ts çš„ç±»å‹</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>2011-01-02    2.248023
2011-01-05   -0.834554
2011-01-07    1.952121
2011-01-08   -0.192165
2011-01-10    0.235019
2011-01-12   -0.756355
dtype: float64
&lt;class 'pandas.core.series.Series'&gt;</code></pre>
</div>
</div>
<ul>
<li>ç´¢å¼•æ˜¯ä¸€ä¸ª <code>DatetimeIndex</code>ã€‚</li>
</ul>
</section>
<section id="pandas-ä¸­çš„æ—¶é—´åºåˆ—åŸºç¡€-ç»­" class="level2">
<h2 class="anchored" data-anchor-id="pandas-ä¸­çš„æ—¶é—´åºåˆ—åŸºç¡€-ç»­">pandas ä¸­çš„æ—¶é—´åºåˆ—åŸºç¡€ (ç»­)</h2>
<p>ä¸åŒç´¢å¼•çš„æ—¶é—´åºåˆ—ä¹‹é—´çš„ç®—æœ¯è¿ç®—ä¼šè‡ªåŠ¨æŒ‰æ—¥æœŸå¯¹é½ã€‚</p>
<div id="734408d5" class="cell" data-execution_count="13">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np  <span class="co"># å¯¼å…¥ NumPy</span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd  <span class="co"># å¯¼å…¥ pandas</span></span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> datetime <span class="im">import</span> datetime  <span class="co"># å¯¼å…¥ datetime</span></span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a>dates <span class="op">=</span> [datetime(<span class="dv">2011</span>, <span class="dv">1</span>, <span class="dv">2</span>), datetime(<span class="dv">2011</span>, <span class="dv">1</span>, <span class="dv">5</span>),</span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a>         datetime(<span class="dv">2011</span>, <span class="dv">1</span>, <span class="dv">7</span>), datetime(<span class="dv">2011</span>, <span class="dv">1</span>, <span class="dv">8</span>),</span>
<span id="cb23-7"><a href="#cb23-7" aria-hidden="true" tabindex="-1"></a>         datetime(<span class="dv">2011</span>, <span class="dv">1</span>, <span class="dv">10</span>), datetime(<span class="dv">2011</span>, <span class="dv">1</span>, <span class="dv">12</span>)]  <span class="co"># åˆ›å»ºä¸€ä¸ª datetime å¯¹è±¡åˆ—è¡¨</span></span>
<span id="cb23-8"><a href="#cb23-8" aria-hidden="true" tabindex="-1"></a>ts <span class="op">=</span> pd.Series(np.random.randn(<span class="dv">6</span>), index<span class="op">=</span>dates)  <span class="co"># åˆ›å»ºä¸€ä¸ª Seriesï¼Œä»¥ datetime å¯¹è±¡åˆ—è¡¨ä½œä¸ºç´¢å¼•</span></span>
<span id="cb23-9"><a href="#cb23-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-10"><a href="#cb23-10" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(ts.index) <span class="co">#æ‰“å°æ—¶é—´åºåˆ—çš„ç´¢å¼•</span></span>
<span id="cb23-11"><a href="#cb23-11" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(ts <span class="op">+</span> ts[::<span class="dv">2</span>])  <span class="co"># [::2] é€‰æ‹©æ¯ç¬¬äºŒä¸ªå…ƒç´ ã€‚æ³¨æ„ NaN å€¼ã€‚</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>DatetimeIndex(['2011-01-02', '2011-01-05', '2011-01-07', '2011-01-08',
               '2011-01-10', '2011-01-12'],
              dtype='datetime64[ns]', freq=None)
2011-01-02   -1.870274
2011-01-05         NaN
2011-01-07   -3.656685
2011-01-08         NaN
2011-01-10   -2.589724
2011-01-12         NaN
dtype: float64</code></pre>
</div>
</div>
</section>
<section id="æ—¶é—´æˆ³å¯¹è±¡" class="level2">
<h2 class="anchored" data-anchor-id="æ—¶é—´æˆ³å¯¹è±¡">æ—¶é—´æˆ³å¯¹è±¡</h2>
<p>DatetimeIndex ä¸­çš„æ ‡é‡å€¼æ˜¯ pandas Timestamp å¯¹è±¡ï¼š</p>
<div id="e09a0512" class="cell" data-execution_count="14">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np  <span class="co"># å¯¼å…¥ NumPy</span></span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd  <span class="co"># å¯¼å…¥ pandas</span></span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> datetime <span class="im">import</span> datetime  <span class="co"># å¯¼å…¥ datetime</span></span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a>dates <span class="op">=</span> [datetime(<span class="dv">2011</span>, <span class="dv">1</span>, <span class="dv">2</span>), datetime(<span class="dv">2011</span>, <span class="dv">1</span>, <span class="dv">5</span>),</span>
<span id="cb25-6"><a href="#cb25-6" aria-hidden="true" tabindex="-1"></a>         datetime(<span class="dv">2011</span>, <span class="dv">1</span>, <span class="dv">7</span>), datetime(<span class="dv">2011</span>, <span class="dv">1</span>, <span class="dv">8</span>),</span>
<span id="cb25-7"><a href="#cb25-7" aria-hidden="true" tabindex="-1"></a>         datetime(<span class="dv">2011</span>, <span class="dv">1</span>, <span class="dv">10</span>), datetime(<span class="dv">2011</span>, <span class="dv">1</span>, <span class="dv">12</span>)]  <span class="co"># åˆ›å»ºä¸€ä¸ª datetime å¯¹è±¡åˆ—è¡¨</span></span>
<span id="cb25-8"><a href="#cb25-8" aria-hidden="true" tabindex="-1"></a>ts <span class="op">=</span> pd.Series(np.random.randn(<span class="dv">6</span>), index<span class="op">=</span>dates)  <span class="co"># åˆ›å»ºä¸€ä¸ª Seriesï¼Œä»¥ datetime å¯¹è±¡åˆ—è¡¨ä½œä¸ºç´¢å¼•</span></span>
<span id="cb25-9"><a href="#cb25-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-10"><a href="#cb25-10" aria-hidden="true" tabindex="-1"></a>stamp <span class="op">=</span> ts.index[<span class="dv">0</span>] <span class="co">#è·å–æ—¶é—´åºåˆ—ç´¢å¼•çš„ç¬¬ä¸€ä¸ªå€¼</span></span>
<span id="cb25-11"><a href="#cb25-11" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(stamp) <span class="co">#æ‰“å°è¿™ä¸ªå€¼</span></span>
<span id="cb25-12"><a href="#cb25-12" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="bu">type</span>(stamp)) <span class="co">#æ‰“å°å€¼çš„ç±»å‹</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>2011-01-02 00:00:00
&lt;class 'pandas._libs.tslibs.timestamps.Timestamp'&gt;</code></pre>
</div>
</div>
<p>pandas.Timestamp å¯ä»¥åœ¨å¤§å¤šæ•°ä½¿ç”¨ datetime å¯¹è±¡çš„åœ°æ–¹ä½¿ç”¨ã€‚</p>
</section>
<section id="ç´¢å¼•é€‰æ‹©å’Œå­é›†" class="level2">
<h2 class="anchored" data-anchor-id="ç´¢å¼•é€‰æ‹©å’Œå­é›†">ç´¢å¼•ã€é€‰æ‹©å’Œå­é›†</h2>
<p>æ‚¨å¯ä»¥ä½¿ç”¨å„ç§æ–¹å¼ä½¿ç”¨æ ‡ç­¾ (æ—¥æœŸ) å¯¹æ—¶é—´åºåˆ—è¿›è¡Œç´¢å¼•ï¼š</p>
<div id="d9edeb7b" class="cell" data-execution_count="15">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np  <span class="co"># å¯¼å…¥ NumPy</span></span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd  <span class="co"># å¯¼å…¥ pandas</span></span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> datetime <span class="im">import</span> datetime  <span class="co"># å¯¼å…¥ datetime</span></span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-5"><a href="#cb27-5" aria-hidden="true" tabindex="-1"></a>dates <span class="op">=</span> [datetime(<span class="dv">2011</span>, <span class="dv">1</span>, <span class="dv">2</span>), datetime(<span class="dv">2011</span>, <span class="dv">1</span>, <span class="dv">5</span>),</span>
<span id="cb27-6"><a href="#cb27-6" aria-hidden="true" tabindex="-1"></a>         datetime(<span class="dv">2011</span>, <span class="dv">1</span>, <span class="dv">7</span>), datetime(<span class="dv">2011</span>, <span class="dv">1</span>, <span class="dv">8</span>),</span>
<span id="cb27-7"><a href="#cb27-7" aria-hidden="true" tabindex="-1"></a>         datetime(<span class="dv">2011</span>, <span class="dv">1</span>, <span class="dv">10</span>), datetime(<span class="dv">2011</span>, <span class="dv">1</span>, <span class="dv">12</span>)]  <span class="co"># åˆ›å»ºä¸€ä¸ª datetime å¯¹è±¡åˆ—è¡¨</span></span>
<span id="cb27-8"><a href="#cb27-8" aria-hidden="true" tabindex="-1"></a>ts <span class="op">=</span> pd.Series(np.random.randn(<span class="dv">6</span>), index<span class="op">=</span>dates)  <span class="co"># åˆ›å»ºä¸€ä¸ª Seriesï¼Œä»¥ datetime å¯¹è±¡åˆ—è¡¨ä½œä¸ºç´¢å¼•</span></span>
<span id="cb27-9"><a href="#cb27-9" aria-hidden="true" tabindex="-1"></a>stamp <span class="op">=</span> ts.index[<span class="dv">2</span>]  <span class="co"># è·å–æ—¶é—´åºåˆ—ç´¢å¼•çš„ç¬¬ä¸‰ä¸ªå…ƒç´ </span></span>
<span id="cb27-10"><a href="#cb27-10" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(ts[stamp])  <span class="co"># ä½¿ç”¨æ—¶é—´æˆ³ç´¢å¼•</span></span>
<span id="cb27-11"><a href="#cb27-11" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(ts[<span class="st">'2011-01-10'</span>])  <span class="co"># ä½¿ç”¨æ—¥æœŸå­—ç¬¦ä¸²ç´¢å¼•</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>1.208828437989877
-0.12618985641649783</code></pre>
</div>
</div>
</section>
<section id="ç´¢å¼•é€‰æ‹©å’Œå­é›†-ç»­" class="level2">
<h2 class="anchored" data-anchor-id="ç´¢å¼•é€‰æ‹©å’Œå­é›†-ç»­">ç´¢å¼•ã€é€‰æ‹©å’Œå­é›† (ç»­)</h2>
<p>å¯¹äºè¾ƒé•¿çš„æ—¶é—´åºåˆ—ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨å¹´ä»½æˆ–å¹´æœˆæ¥é€‰æ‹©åˆ‡ç‰‡ï¼š</p>
<div id="782b7f73" class="cell" data-execution_count="16">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np  <span class="co"># å¯¼å…¥ NumPy</span></span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd  <span class="co"># å¯¼å…¥ pandas</span></span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a>longer_ts <span class="op">=</span> pd.Series(np.random.randn(<span class="dv">1000</span>),</span>
<span id="cb29-5"><a href="#cb29-5" aria-hidden="true" tabindex="-1"></a>                      index<span class="op">=</span>pd.date_range(<span class="st">'1/1/2000'</span>, periods<span class="op">=</span><span class="dv">1000</span>))  <span class="co"># åˆ›å»ºä¸€ä¸ªè¾ƒé•¿çš„æ—¶é—´åºåˆ—</span></span>
<span id="cb29-6"><a href="#cb29-6" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(longer_ts[<span class="st">'2001'</span>])  <span class="co"># é€‰æ‹© 2001 å¹´çš„æ‰€æœ‰æ•°æ®</span></span>
<span id="cb29-7"><a href="#cb29-7" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(longer_ts[<span class="st">'2001-05'</span>])  <span class="co"># é€‰æ‹© 2001 å¹´ 5 æœˆçš„æ‰€æœ‰æ•°æ®</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>2001-01-01    0.778277
2001-01-02   -1.746666
2001-01-03    0.488165
2001-01-04   -0.970844
2001-01-05   -0.362200
                ...   
2001-12-27   -0.888858
2001-12-28   -0.984452
2001-12-29    1.273428
2001-12-30   -1.143759
2001-12-31   -0.016393
Freq: D, Length: 365, dtype: float64
2001-05-01   -1.534476
2001-05-02    1.717477
2001-05-03   -1.068018
2001-05-04   -1.154015
2001-05-05   -0.201790
2001-05-06    0.118378
2001-05-07   -0.688098
2001-05-08   -0.164069
2001-05-09   -0.261402
2001-05-10   -0.617958
2001-05-11   -0.312088
2001-05-12    0.169424
2001-05-13   -0.635458
2001-05-14    1.361047
2001-05-15   -1.737481
2001-05-16   -1.996880
2001-05-17   -0.490516
2001-05-18   -0.328491
2001-05-19   -0.425433
2001-05-20   -0.096868
2001-05-21   -0.624496
2001-05-22   -0.619592
2001-05-23    1.015465
2001-05-24    0.908434
2001-05-25   -1.122352
2001-05-26    1.939164
2001-05-27    1.221890
2001-05-28   -0.054268
2001-05-29    1.045968
2001-05-30    0.413487
2001-05-31    0.893980
Freq: D, dtype: float64</code></pre>
</div>
</div>
</section>
<section id="ç´¢å¼•é€‰æ‹©å’Œå­é›†-ç»­-1" class="level2">
<h2 class="anchored" data-anchor-id="ç´¢å¼•é€‰æ‹©å’Œå­é›†-ç»­-1">ç´¢å¼•ã€é€‰æ‹©å’Œå­é›† (ç»­)</h2>
<p>ä½¿ç”¨ <code>datetime</code> å¯¹è±¡è¿›è¡Œåˆ‡ç‰‡ä¹Ÿæœ‰æ•ˆï¼ŒåŒ…æ‹¬èŒƒå›´æŸ¥è¯¢ï¼š</p>
<div id="982b25a0" class="cell" data-execution_count="17">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np  <span class="co"># å¯¼å…¥ NumPy</span></span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd  <span class="co"># å¯¼å…¥ pandas</span></span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> datetime <span class="im">import</span> datetime  <span class="co"># å¯¼å…¥ datetime</span></span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-5"><a href="#cb31-5" aria-hidden="true" tabindex="-1"></a>dates <span class="op">=</span> [datetime(<span class="dv">2011</span>, <span class="dv">1</span>, <span class="dv">2</span>), datetime(<span class="dv">2011</span>, <span class="dv">1</span>, <span class="dv">5</span>),</span>
<span id="cb31-6"><a href="#cb31-6" aria-hidden="true" tabindex="-1"></a>         datetime(<span class="dv">2011</span>, <span class="dv">1</span>, <span class="dv">7</span>), datetime(<span class="dv">2011</span>, <span class="dv">1</span>, <span class="dv">8</span>),</span>
<span id="cb31-7"><a href="#cb31-7" aria-hidden="true" tabindex="-1"></a>         datetime(<span class="dv">2011</span>, <span class="dv">1</span>, <span class="dv">10</span>), datetime(<span class="dv">2011</span>, <span class="dv">1</span>, <span class="dv">12</span>)]  <span class="co"># åˆ›å»ºä¸€ä¸ª datetime å¯¹è±¡åˆ—è¡¨</span></span>
<span id="cb31-8"><a href="#cb31-8" aria-hidden="true" tabindex="-1"></a>ts <span class="op">=</span> pd.Series(np.random.randn(<span class="dv">6</span>), index<span class="op">=</span>dates)</span>
<span id="cb31-9"><a href="#cb31-9" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(ts[datetime(<span class="dv">2011</span>, <span class="dv">1</span>, <span class="dv">7</span>):])  <span class="co"># ä½¿ç”¨ datetime å¯¹è±¡è¿›è¡Œåˆ‡ç‰‡ (èŒƒå›´æŸ¥è¯¢)</span></span>
<span id="cb31-10"><a href="#cb31-10" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(ts[<span class="st">'2011-01-06'</span>:<span class="st">'2011-01-11'</span>])  <span class="co"># ä½¿ç”¨æ—¥æœŸå­—ç¬¦ä¸²è¿›è¡Œåˆ‡ç‰‡ (èŒƒå›´æŸ¥è¯¢)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>2011-01-07    0.962757
2011-01-08    0.009201
2011-01-10   -0.578818
2011-01-12   -1.134133
dtype: float64
2011-01-07    0.962757
2011-01-08    0.009201
2011-01-10   -0.578818
dtype: float64</code></pre>
</div>
</div>
</section>
<section id="ç´¢å¼•é€‰æ‹©å’Œå­é›†-ç»­-2" class="level2">
<h2 class="anchored" data-anchor-id="ç´¢å¼•é€‰æ‹©å’Œå­é›†-ç»­-2">ç´¢å¼•ã€é€‰æ‹©å’Œå­é›† (ç»­)</h2>
<p><code>truncate()</code> æ–¹æ³•åœ¨ä¸¤ä¸ªæ—¥æœŸä¹‹é—´å¯¹ <code>Series</code> è¿›è¡Œåˆ‡ç‰‡ï¼š</p>
<div id="313834df" class="cell" data-execution_count="18">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np  <span class="co"># å¯¼å…¥ NumPy</span></span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd  <span class="co"># å¯¼å…¥ pandas</span></span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> datetime <span class="im">import</span> datetime  <span class="co"># å¯¼å…¥ datetime</span></span>
<span id="cb33-4"><a href="#cb33-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-5"><a href="#cb33-5" aria-hidden="true" tabindex="-1"></a>dates <span class="op">=</span> [datetime(<span class="dv">2011</span>, <span class="dv">1</span>, <span class="dv">2</span>), datetime(<span class="dv">2011</span>, <span class="dv">1</span>, <span class="dv">5</span>),</span>
<span id="cb33-6"><a href="#cb33-6" aria-hidden="true" tabindex="-1"></a>         datetime(<span class="dv">2011</span>, <span class="dv">1</span>, <span class="dv">7</span>), datetime(<span class="dv">2011</span>, <span class="dv">1</span>, <span class="dv">8</span>),</span>
<span id="cb33-7"><a href="#cb33-7" aria-hidden="true" tabindex="-1"></a>         datetime(<span class="dv">2011</span>, <span class="dv">1</span>, <span class="dv">10</span>), datetime(<span class="dv">2011</span>, <span class="dv">1</span>, <span class="dv">12</span>)]  <span class="co"># åˆ›å»ºä¸€ä¸ª datetime å¯¹è±¡åˆ—è¡¨</span></span>
<span id="cb33-8"><a href="#cb33-8" aria-hidden="true" tabindex="-1"></a>ts <span class="op">=</span> pd.Series(np.random.randn(<span class="dv">6</span>), index<span class="op">=</span>dates)</span>
<span id="cb33-9"><a href="#cb33-9" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(ts.truncate(after<span class="op">=</span><span class="st">'2011-01-09'</span>))  <span class="co"># åœ¨ 2011-01-09 ä¹‹åæˆªæ–­</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>2011-01-02    1.080734
2011-01-05   -1.287651
2011-01-07    1.747145
2011-01-08    0.015727
dtype: float64</code></pre>
</div>
</div>
</section>
<section id="ç´¢å¼•é€‰æ‹©å’Œå­é›†-ç»­-3" class="level2">
<h2 class="anchored" data-anchor-id="ç´¢å¼•é€‰æ‹©å’Œå­é›†-ç»­-3">ç´¢å¼•ã€é€‰æ‹©å’Œå­é›† (ç»­)</h2>
<p>æ‰€æœ‰è¿™äº›åˆ‡ç‰‡æ“ä½œéƒ½é€‚ç”¨äº <code>DataFrame</code>ï¼Œåœ¨è¡Œä¸Šè¿›è¡Œç´¢å¼•ï¼š</p>
<div id="2e69fef5" class="cell" data-execution_count="19">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np  <span class="co"># å¯¼å…¥ NumPy</span></span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd  <span class="co"># å¯¼å…¥ pandas</span></span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-4"><a href="#cb35-4" aria-hidden="true" tabindex="-1"></a>dates <span class="op">=</span> pd.date_range(<span class="st">'1/1/2000'</span>, periods<span class="op">=</span><span class="dv">100</span>, freq<span class="op">=</span><span class="st">'W-WED'</span>)  <span class="co"># åˆ›å»ºä¸€ä¸ªæ—¥æœŸèŒƒå›´ (æ¯å‘¨ä¸‰)</span></span>
<span id="cb35-5"><a href="#cb35-5" aria-hidden="true" tabindex="-1"></a>long_df <span class="op">=</span> pd.DataFrame(np.random.randn(<span class="dv">100</span>, <span class="dv">4</span>),</span>
<span id="cb35-6"><a href="#cb35-6" aria-hidden="true" tabindex="-1"></a>                       index<span class="op">=</span>dates,</span>
<span id="cb35-7"><a href="#cb35-7" aria-hidden="true" tabindex="-1"></a>                       columns<span class="op">=</span>[<span class="st">'Colorado'</span>, <span class="st">'Texas'</span>, <span class="st">'New York'</span>, <span class="st">'Ohio'</span>])  <span class="co"># åˆ›å»ºä¸€ä¸ª DataFrame</span></span>
<span id="cb35-8"><a href="#cb35-8" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(long_df.loc[<span class="st">'2001-05'</span>])  <span class="co"># ä½¿ç”¨ .loc æŒ‰æ ‡ç­¾é€‰æ‹© 2001 å¹´ 5 æœˆçš„æ‰€æœ‰è¡Œ</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>            Colorado     Texas  New York      Ohio
2001-05-02 -1.639200 -1.360790  1.252533  1.779938
2001-05-09  1.048367  0.669613  0.097629  0.400700
2001-05-16 -0.935691  0.946895  0.766187  1.614594
2001-05-23 -1.598397  0.484545  0.847627 -0.585456
2001-05-30  0.965721 -0.938391 -0.426365  0.957039</code></pre>
</div>
</div>
</section>
<section id="å…·æœ‰é‡å¤ç´¢å¼•çš„æ—¶é—´åºåˆ—" class="level2">
<h2 class="anchored" data-anchor-id="å…·æœ‰é‡å¤ç´¢å¼•çš„æ—¶é—´åºåˆ—">å…·æœ‰é‡å¤ç´¢å¼•çš„æ—¶é—´åºåˆ—</h2>
<p>å¯¹äºåŒä¸€æ—¶é—´æˆ³ï¼Œå¯èƒ½å­˜åœ¨å¤šä¸ªæ•°æ®è§‚å¯Ÿå€¼ï¼š</p>
<div id="87467966" class="cell" data-execution_count="20">
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np  <span class="co"># å¯¼å…¥ NumPy</span></span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd  <span class="co"># å¯¼å…¥ pandas</span></span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-4"><a href="#cb37-4" aria-hidden="true" tabindex="-1"></a>dates <span class="op">=</span> pd.DatetimeIndex([<span class="st">'1/1/2000'</span>, <span class="st">'1/2/2000'</span>, <span class="st">'1/2/2000'</span>, <span class="st">'1/2/2000'</span>,</span>
<span id="cb37-5"><a href="#cb37-5" aria-hidden="true" tabindex="-1"></a>                        <span class="st">'1/3/2000'</span>])  <span class="co"># åˆ›å»ºä¸€ä¸ªå…·æœ‰é‡å¤æ—¥æœŸçš„ DatetimeIndex</span></span>
<span id="cb37-6"><a href="#cb37-6" aria-hidden="true" tabindex="-1"></a>dup_ts <span class="op">=</span> pd.Series(np.arange(<span class="dv">5</span>), index<span class="op">=</span>dates)  <span class="co"># åˆ›å»ºä¸€ä¸ªå…·æœ‰é‡å¤ç´¢å¼•çš„ Series</span></span>
<span id="cb37-7"><a href="#cb37-7" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(dup_ts)  <span class="co"># æ‰“å° Series</span></span>
<span id="cb37-8"><a href="#cb37-8" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(dup_ts.index.is_unique)  <span class="co"># æ£€æŸ¥ç´¢å¼•æ˜¯å¦å”¯ä¸€</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>2000-01-01    0
2000-01-02    1
2000-01-02    2
2000-01-02    3
2000-01-03    4
dtype: int64
False</code></pre>
</div>
</div>
</section>
<section id="å…·æœ‰é‡å¤ç´¢å¼•çš„æ—¶é—´åºåˆ—-ç»­" class="level2">
<h2 class="anchored" data-anchor-id="å…·æœ‰é‡å¤ç´¢å¼•çš„æ—¶é—´åºåˆ—-ç»­">å…·æœ‰é‡å¤ç´¢å¼•çš„æ—¶é—´åºåˆ— (ç»­)</h2>
<p>ç´¢å¼•ç°åœ¨å°†äº§ç”Ÿæ ‡é‡å€¼æˆ–åˆ‡ç‰‡ï¼š</p>
<div id="7306c166" class="cell" data-execution_count="21">
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np  <span class="co"># å¯¼å…¥ NumPy</span></span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd  <span class="co"># å¯¼å…¥ pandas</span></span>
<span id="cb39-3"><a href="#cb39-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-4"><a href="#cb39-4" aria-hidden="true" tabindex="-1"></a>dates <span class="op">=</span> pd.DatetimeIndex([<span class="st">'1/1/2000'</span>, <span class="st">'1/2/2000'</span>, <span class="st">'1/2/2000'</span>, <span class="st">'1/2/2000'</span>,</span>
<span id="cb39-5"><a href="#cb39-5" aria-hidden="true" tabindex="-1"></a>                        <span class="st">'1/3/2000'</span>])  <span class="co"># åˆ›å»ºä¸€ä¸ªå…·æœ‰é‡å¤æ—¥æœŸçš„ DatetimeIndex</span></span>
<span id="cb39-6"><a href="#cb39-6" aria-hidden="true" tabindex="-1"></a>dup_ts <span class="op">=</span> pd.Series(np.arange(<span class="dv">5</span>), index<span class="op">=</span>dates)  <span class="co"># åˆ›å»ºä¸€ä¸ªå…·æœ‰é‡å¤ç´¢å¼•çš„ Series</span></span>
<span id="cb39-7"><a href="#cb39-7" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(dup_ts[<span class="st">'1/3/2000'</span>])  <span class="co"># æœªé‡å¤çš„æ—¥æœŸï¼Œè¿”å›æ ‡é‡å€¼</span></span>
<span id="cb39-8"><a href="#cb39-8" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(dup_ts[<span class="st">'1/2/2000'</span>])  <span class="co"># é‡å¤çš„æ—¥æœŸï¼Œè¿”å›åˆ‡ç‰‡</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>4
2000-01-02    1
2000-01-02    2
2000-01-02    3
dtype: int64</code></pre>
</div>
</div>
</section>
<section id="å…·æœ‰é‡å¤ç´¢å¼•çš„æ—¶é—´åºåˆ—-ç»­-1" class="level2">
<h2 class="anchored" data-anchor-id="å…·æœ‰é‡å¤ç´¢å¼•çš„æ—¶é—´åºåˆ—-ç»­-1">å…·æœ‰é‡å¤ç´¢å¼•çš„æ—¶é—´åºåˆ— (ç»­)</h2>
<p>è¦èšåˆå…·æœ‰éå”¯ä¸€æ—¶é—´æˆ³çš„æ•°æ®ï¼Œè¯·ä½¿ç”¨ <code>groupby</code> å’Œ <code>level=0</code>ï¼š</p>
<div id="b842bb5f" class="cell" data-execution_count="22">
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np  <span class="co"># å¯¼å…¥ NumPy</span></span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd  <span class="co"># å¯¼å…¥ pandas</span></span>
<span id="cb41-3"><a href="#cb41-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-4"><a href="#cb41-4" aria-hidden="true" tabindex="-1"></a>dates <span class="op">=</span> pd.DatetimeIndex([<span class="st">'1/1/2000'</span>, <span class="st">'1/2/2000'</span>, <span class="st">'1/2/2000'</span>, <span class="st">'1/2/2000'</span>,</span>
<span id="cb41-5"><a href="#cb41-5" aria-hidden="true" tabindex="-1"></a>                        <span class="st">'1/3/2000'</span>])  <span class="co"># åˆ›å»ºä¸€ä¸ªå…·æœ‰é‡å¤æ—¥æœŸçš„ DatetimeIndex</span></span>
<span id="cb41-6"><a href="#cb41-6" aria-hidden="true" tabindex="-1"></a>dup_ts <span class="op">=</span> pd.Series(np.arange(<span class="dv">5</span>), index<span class="op">=</span>dates)  <span class="co"># åˆ›å»ºä¸€ä¸ªå…·æœ‰é‡å¤ç´¢å¼•çš„ Series</span></span>
<span id="cb41-7"><a href="#cb41-7" aria-hidden="true" tabindex="-1"></a>grouped <span class="op">=</span> dup_ts.groupby(level<span class="op">=</span><span class="dv">0</span>)  <span class="co"># æŒ‰ç´¢å¼•çº§åˆ« 0 (æ—¥æœŸ) åˆ†ç»„</span></span>
<span id="cb41-8"><a href="#cb41-8" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(grouped.mean())  <span class="co"># è®¡ç®—æ¯ä¸ªæ—¥æœŸçš„å¹³å‡å€¼</span></span>
<span id="cb41-9"><a href="#cb41-9" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(grouped.count())  <span class="co"># è®¡ç®—æ¯ä¸ªæ—¥æœŸçš„è®¡æ•°</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>2000-01-01    0.0
2000-01-02    2.0
2000-01-03    4.0
dtype: float64
2000-01-01    1
2000-01-02    3
2000-01-03    1
dtype: int64</code></pre>
</div>
</div>
</section>
<section id="æ—¥æœŸèŒƒå›´é¢‘ç‡å’Œç§»ä½" class="level2">
<h2 class="anchored" data-anchor-id="æ—¥æœŸèŒƒå›´é¢‘ç‡å’Œç§»ä½">æ—¥æœŸèŒƒå›´ã€é¢‘ç‡å’Œç§»ä½</h2>
<section id="ç”Ÿæˆæ—¥æœŸèŒƒå›´" class="level3">
<h3 class="anchored" data-anchor-id="ç”Ÿæˆæ—¥æœŸèŒƒå›´">ç”Ÿæˆæ—¥æœŸèŒƒå›´</h3>
<p><code>pandas.date_range()</code> ç”¨äºç”Ÿæˆå…·æœ‰ç‰¹å®šé•¿åº¦å’Œé¢‘ç‡çš„ <code>DatetimeIndex</code>ï¼š</p>
<div id="42f8fb5c" class="cell" data-execution_count="23">
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd  <span class="co"># å¯¼å…¥ pandas</span></span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-3"><a href="#cb43-3" aria-hidden="true" tabindex="-1"></a>index <span class="op">=</span> pd.date_range(<span class="st">'2012-04-01'</span>, <span class="st">'2012-06-01'</span>)  <span class="co"># åˆ›å»ºä¸€ä¸ªä» 2012-04-01 åˆ° 2012-06-01 çš„æ¯æ—¥æ—¥æœŸèŒƒå›´</span></span>
<span id="cb43-4"><a href="#cb43-4" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(index)  <span class="co"># æ‰“å° DatetimeIndex</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>DatetimeIndex(['2012-04-01', '2012-04-02', '2012-04-03', '2012-04-04',
               '2012-04-05', '2012-04-06', '2012-04-07', '2012-04-08',
               '2012-04-09', '2012-04-10', '2012-04-11', '2012-04-12',
               '2012-04-13', '2012-04-14', '2012-04-15', '2012-04-16',
               '2012-04-17', '2012-04-18', '2012-04-19', '2012-04-20',
               '2012-04-21', '2012-04-22', '2012-04-23', '2012-04-24',
               '2012-04-25', '2012-04-26', '2012-04-27', '2012-04-28',
               '2012-04-29', '2012-04-30', '2012-05-01', '2012-05-02',
               '2012-05-03', '2012-05-04', '2012-05-05', '2012-05-06',
               '2012-05-07', '2012-05-08', '2012-05-09', '2012-05-10',
               '2012-05-11', '2012-05-12', '2012-05-13', '2012-05-14',
               '2012-05-15', '2012-05-16', '2012-05-17', '2012-05-18',
               '2012-05-19', '2012-05-20', '2012-05-21', '2012-05-22',
               '2012-05-23', '2012-05-24', '2012-05-25', '2012-05-26',
               '2012-05-27', '2012-05-28', '2012-05-29', '2012-05-30',
               '2012-05-31', '2012-06-01'],
              dtype='datetime64[ns]', freq='D')</code></pre>
</div>
</div>
</section>
</section>
<section id="ç”Ÿæˆæ—¥æœŸèŒƒå›´ç»­" class="level2">
<h2 class="anchored" data-anchor-id="ç”Ÿæˆæ—¥æœŸèŒƒå›´ç»­">ç”Ÿæˆæ—¥æœŸèŒƒå›´(ç»­)</h2>
<p>é»˜è®¤æƒ…å†µä¸‹ï¼Œ<code>date_range</code> ç”Ÿæˆæ¯æ—¥æ—¶é—´æˆ³ã€‚æ‚¨å¯ä»¥æŒ‡å®šå¼€å§‹æˆ–ç»“æŸæ—¥æœŸä»¥åŠå‘¨æœŸæ•°ï¼š</p>
<div id="6c2dc805" class="cell" data-execution_count="24">
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd  <span class="co"># å¯¼å…¥ pandas</span></span>
<span id="cb45-2"><a href="#cb45-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-3"><a href="#cb45-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(pd.date_range(start<span class="op">=</span><span class="st">'2012-04-01'</span>, periods<span class="op">=</span><span class="dv">20</span>))  <span class="co"># ä» 2012-04-01 å¼€å§‹ï¼Œç”Ÿæˆ 20 ä¸ªæ¯æ—¥æ—¥æœŸ</span></span>
<span id="cb45-4"><a href="#cb45-4" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(pd.date_range(end<span class="op">=</span><span class="st">'2012-06-01'</span>, periods<span class="op">=</span><span class="dv">20</span>))  <span class="co"># åˆ° 2012-06-01 ç»“æŸï¼Œç”Ÿæˆ 20 ä¸ªæ¯æ—¥æ—¥æœŸ</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>DatetimeIndex(['2012-04-01', '2012-04-02', '2012-04-03', '2012-04-04',
               '2012-04-05', '2012-04-06', '2012-04-07', '2012-04-08',
               '2012-04-09', '2012-04-10', '2012-04-11', '2012-04-12',
               '2012-04-13', '2012-04-14', '2012-04-15', '2012-04-16',
               '2012-04-17', '2012-04-18', '2012-04-19', '2012-04-20'],
              dtype='datetime64[ns]', freq='D')
DatetimeIndex(['2012-05-13', '2012-05-14', '2012-05-15', '2012-05-16',
               '2012-05-17', '2012-05-18', '2012-05-19', '2012-05-20',
               '2012-05-21', '2012-05-22', '2012-05-23', '2012-05-24',
               '2012-05-25', '2012-05-26', '2012-05-27', '2012-05-28',
               '2012-05-29', '2012-05-30', '2012-05-31', '2012-06-01'],
              dtype='datetime64[ns]', freq='D')</code></pre>
</div>
</div>
</section>
<section id="ç”Ÿæˆæ—¥æœŸèŒƒå›´ç»­-1" class="level2">
<h2 class="anchored" data-anchor-id="ç”Ÿæˆæ—¥æœŸèŒƒå›´ç»­-1">ç”Ÿæˆæ—¥æœŸèŒƒå›´(ç»­)</h2>
<p>æ‚¨è¿˜å¯ä»¥æŒ‡å®šé¢‘ç‡ã€‚ä¾‹å¦‚ï¼Œè·å–æ¯ä¸ªæœˆçš„æœ€åä¸€ä¸ªå·¥ä½œæ—¥ï¼š</p>
<div id="e13a0230" class="cell" data-execution_count="25">
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd  <span class="co"># å¯¼å…¥ pandas</span></span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-3"><a href="#cb47-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(pd.date_range(<span class="st">'2000-01-01'</span>, <span class="st">'2000-12-01'</span>, freq<span class="op">=</span><span class="st">'BM'</span>))  <span class="co"># 'BM' = Business Month end (æ¯æœˆæœ€åä¸€ä¸ªå·¥ä½œæ—¥)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>DatetimeIndex(['2000-01-31', '2000-02-29', '2000-03-31', '2000-04-28',
               '2000-05-31', '2000-06-30', '2000-07-31', '2000-08-31',
               '2000-09-29', '2000-10-31', '2000-11-30'],
              dtype='datetime64[ns]', freq='BME')</code></pre>
</div>
</div>
<section id="é¢‘ç‡å’Œæ—¥æœŸåç§»" class="level3">
<h3 class="anchored" data-anchor-id="é¢‘ç‡å’Œæ—¥æœŸåç§»">é¢‘ç‡å’Œæ—¥æœŸåç§»</h3>
<p><code>pandas</code> ä¸­çš„é¢‘ç‡ç”±<em>åŸºæœ¬é¢‘ç‡</em>å’Œ<em>ä¹˜æ•°</em>ç»„æˆã€‚åŸºæœ¬é¢‘ç‡é€šå¸¸æ˜¯å­—ç¬¦ä¸²åˆ«å (ä¾‹å¦‚ï¼Œâ€˜Mâ€™ è¡¨ç¤ºæ¯æœˆï¼Œâ€˜Hâ€™ è¡¨ç¤ºæ¯å°æ—¶)ã€‚</p>
<table class="caption-top table">
<colgroup>
<col style="width: 37%">
<col style="width: 25%">
<col style="width: 37%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">åˆ«å</th>
<th style="text-align: left;">åç§»ç±»å‹</th>
<th style="text-align: left;">æè¿°</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><code>D</code></td>
<td style="text-align: left;"><code>Day</code></td>
<td style="text-align: left;">æ—¥å†æ—¥</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>B</code></td>
<td style="text-align: left;"><code>BusinessDay</code></td>
<td style="text-align: left;">å·¥ä½œæ—¥</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>H</code></td>
<td style="text-align: left;"><code>Hour</code></td>
<td style="text-align: left;">æ¯å°æ—¶</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>T</code> æˆ– <code>min</code></td>
<td style="text-align: left;"><code>Minute</code></td>
<td style="text-align: left;">æ¯åˆ†é’Ÿ</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>S</code></td>
<td style="text-align: left;"><code>Second</code></td>
<td style="text-align: left;">æ¯ç§’</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>L</code> æˆ– <code>ms</code></td>
<td style="text-align: left;"><code>Milli</code></td>
<td style="text-align: left;">æ¯«ç§’ (1/1,000 ç§’)</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>U</code></td>
<td style="text-align: left;"><code>Micro</code></td>
<td style="text-align: left;">å¾®ç§’ (1/1,000,000 ç§’)</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>M</code></td>
<td style="text-align: left;"><code>MonthEnd</code></td>
<td style="text-align: left;">æ¯æœˆæœ€åä¸€ä¸ªæ—¥å†æ—¥</td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="é¢‘ç‡å’Œæ—¥æœŸåç§»ç»­" class="level2">
<h2 class="anchored" data-anchor-id="é¢‘ç‡å’Œæ—¥æœŸåç§»ç»­">é¢‘ç‡å’Œæ—¥æœŸåç§»(ç»­)</h2>
<table class="caption-top table">
<colgroup>
<col style="width: 37%">
<col style="width: 25%">
<col style="width: 37%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">åˆ«å</th>
<th style="text-align: left;">åç§»ç±»å‹</th>
<th style="text-align: left;">æè¿°</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><code>BM</code></td>
<td style="text-align: left;"><code>BusinessMonthEnd</code></td>
<td style="text-align: left;">æ¯æœˆæœ€åä¸€ä¸ªå·¥ä½œæ—¥</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>MS</code></td>
<td style="text-align: left;"><code>MonthBegin</code></td>
<td style="text-align: left;">æ¯æœˆç¬¬ä¸€ä¸ªæ—¥å†æ—¥</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>BMS</code></td>
<td style="text-align: left;"><code>BusinessMonthBegin</code></td>
<td style="text-align: left;">æ¯æœˆç¬¬ä¸€ä¸ªå·¥ä½œæ—¥</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>W-MON</code>, <code>W-TUE</code>, â€¦</td>
<td style="text-align: left;"><code>Week</code></td>
<td style="text-align: left;">æ¯å‘¨çš„æŒ‡å®šæ˜ŸæœŸå‡  (MON, TUE, WED, THU,FRI, SAT, or SUN)</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>WOM-1MON</code>, <code>WOM-2MON</code>, â€¦</td>
<td style="text-align: left;"><code>WeekOfMonth</code></td>
<td style="text-align: left;">ç”Ÿæˆæ¯æœˆç¬¬ä¸€ã€ç¬¬äºŒã€ç¬¬ä¸‰æˆ–ç¬¬å››å‘¨çš„æ¯å‘¨æ—¥æœŸ (ä¾‹å¦‚ï¼ŒWOM-3FRI è¡¨ç¤ºæ¯æœˆç¬¬ä¸‰ä¸ªæ˜ŸæœŸäº”)</td>
</tr>
</tbody>
</table>
</section>
<section id="é¢‘ç‡å’Œæ—¥æœŸåç§»ç»­-1" class="level2">
<h2 class="anchored" data-anchor-id="é¢‘ç‡å’Œæ—¥æœŸåç§»ç»­-1">é¢‘ç‡å’Œæ—¥æœŸåç§»(ç»­)</h2>
<table class="caption-top table">
<colgroup>
<col style="width: 37%">
<col style="width: 25%">
<col style="width: 37%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">åˆ«å</th>
<th style="text-align: left;">åç§»ç±»å‹</th>
<th style="text-align: left;">æè¿°</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><code>Q-JAN</code>, <code>Q-FEB</code>, â€¦</td>
<td style="text-align: left;"><code>QuarterEnd</code></td>
<td style="text-align: left;">å­£åº¦æ—¥æœŸé”šå®šåœ¨æ¯ä¸ªæœˆçš„æœ€åä¸€ä¸ªæ—¥å†æ—¥ï¼Œå¹´ä»½ä»¥æŒ‡å®šæœˆä»½ç»“æŸ (JAN, FEB,MAR, APR, MAY, JUN, JUL, AUG, SEP, OCT, NOV, or DEC)</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>BQ-JAN</code>, <code>BQ-FEB</code>, â€¦</td>
<td style="text-align: left;"><code>BusinessQuarterEnd</code></td>
<td style="text-align: left;">å­£åº¦æ—¥æœŸé”šå®šåœ¨æ¯ä¸ªæœˆçš„æœ€åä¸€ä¸ªå·¥ä½œæ—¥ï¼Œå¹´ä»½ä»¥æŒ‡å®šæœˆä»½ç»“æŸ</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>QS-JAN</code>, <code>QS-FEB</code>, â€¦</td>
<td style="text-align: left;"><code>QuarterBegin</code></td>
<td style="text-align: left;">å­£åº¦æ—¥æœŸé”šå®šåœ¨æ¯ä¸ªæœˆçš„ç¬¬ä¸€ä¸ªæ—¥å†æ—¥ï¼Œå¹´ä»½ä»¥æŒ‡å®šæœˆä»½ç»“æŸ</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>BQS-JAN</code>, <code>BQS-FEB</code>, â€¦</td>
<td style="text-align: left;"><code>BusinessQuarterBegin</code></td>
<td style="text-align: left;">å­£åº¦æ—¥æœŸé”šå®šåœ¨æ¯ä¸ªæœˆçš„ç¬¬ä¸€ä¸ªå·¥ä½œæ—¥ï¼Œå¹´ä»½ä»¥æŒ‡å®šæœˆä»½ç»“æŸ</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>A-JAN</code>, <code>A-FEB</code>, â€¦</td>
<td style="text-align: left;"><code>YearEnd</code></td>
<td style="text-align: left;">å¹´åº¦æ—¥æœŸé”šå®šåœ¨ç»™å®šæœˆä»½çš„æœ€åä¸€ä¸ªæ—¥å†æ—¥ (JAN, FEB, MAR, APR, MAY, JUN, JUL, AUG, SEP,OCT, NOV, or DEC)</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>BA-JAN</code>, <code>BA-FEB</code>, â€¦</td>
<td style="text-align: left;"><code>BusinessYearEnd</code></td>
<td style="text-align: left;">å¹´åº¦æ—¥æœŸé”šå®šåœ¨ç»™å®šæœˆä»½çš„æœ€åä¸€ä¸ªå·¥ä½œæ—¥</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>AS-JAN</code>, <code>AS-FEB</code>, â€¦</td>
<td style="text-align: left;"><code>YearBegin</code></td>
<td style="text-align: left;">å¹´åº¦æ—¥æœŸé”šå®šåœ¨ç»™å®šæœˆä»½çš„ç¬¬ä¸€å¤©</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>BAS-JAN</code>, <code>BAS-FEB</code>, â€¦</td>
<td style="text-align: left;"><code>BusinessYearBegin</code></td>
<td style="text-align: left;">å¹´åº¦æ—¥æœŸé”šå®šåœ¨ç»™å®šæœˆä»½çš„ç¬¬ä¸€ä¸ªå·¥ä½œæ—¥</td>
</tr>
</tbody>
</table>
</section>
<section id="é¢‘ç‡å’Œæ—¥æœŸåç§»---ç¤ºä¾‹" class="level2">
<h2 class="anchored" data-anchor-id="é¢‘ç‡å’Œæ—¥æœŸåç§»---ç¤ºä¾‹">é¢‘ç‡å’Œæ—¥æœŸåç§» - ç¤ºä¾‹</h2>
<div id="99239b08" class="cell" data-execution_count="26">
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd  <span class="co"># å¯¼å…¥ pandas</span></span>
<span id="cb49-2"><a href="#cb49-2" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> pandas.tseries.offsets <span class="im">import</span> Hour, Minute  <span class="co"># å¯¼å…¥ Hour å’Œ Minute åç§»</span></span>
<span id="cb49-3"><a href="#cb49-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-4"><a href="#cb49-4" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(Hour())  <span class="co"># é»˜è®¤ 1 å°æ—¶</span></span>
<span id="cb49-5"><a href="#cb49-5" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(Hour(<span class="dv">4</span>))  <span class="co"># 4 å°æ—¶</span></span>
<span id="cb49-6"><a href="#cb49-6" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(pd.date_range(<span class="st">'2000-01-01'</span>, <span class="st">'2000-01-03 23:59'</span>, freq<span class="op">=</span><span class="st">'4H'</span>))  <span class="co"># æ¯ 4 å°æ—¶</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>&lt;Hour&gt;
&lt;4 * Hours&gt;
DatetimeIndex(['2000-01-01 00:00:00', '2000-01-01 04:00:00',
               '2000-01-01 08:00:00', '2000-01-01 12:00:00',
               '2000-01-01 16:00:00', '2000-01-01 20:00:00',
               '2000-01-02 00:00:00', '2000-01-02 04:00:00',
               '2000-01-02 08:00:00', '2000-01-02 12:00:00',
               '2000-01-02 16:00:00', '2000-01-02 20:00:00',
               '2000-01-03 00:00:00', '2000-01-03 04:00:00',
               '2000-01-03 08:00:00', '2000-01-03 12:00:00',
               '2000-01-03 16:00:00', '2000-01-03 20:00:00'],
              dtype='datetime64[ns]', freq='4h')</code></pre>
</div>
</div>
</section>
<section id="é¢‘ç‡å’Œæ—¥æœŸåç§»---ç¤ºä¾‹ç»­" class="level2">
<h2 class="anchored" data-anchor-id="é¢‘ç‡å’Œæ—¥æœŸåç§»---ç¤ºä¾‹ç»­">é¢‘ç‡å’Œæ—¥æœŸåç§» - ç¤ºä¾‹(ç»­)</h2>
<div id="f630ac8b" class="cell" data-execution_count="27">
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd  <span class="co"># å¯¼å…¥ pandas</span></span>
<span id="cb51-2"><a href="#cb51-2" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> pandas.tseries.offsets <span class="im">import</span> Hour, Minute  <span class="co"># å¯¼å…¥ Hour å’Œ Minute</span></span>
<span id="cb51-3"><a href="#cb51-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-4"><a href="#cb51-4" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(Hour(<span class="dv">2</span>) <span class="op">+</span> Minute(<span class="dv">30</span>))  <span class="co"># 2 å°æ—¶ 30 åˆ†é’Ÿ</span></span>
<span id="cb51-5"><a href="#cb51-5" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(pd.date_range(<span class="st">'2000-01-01'</span>, periods<span class="op">=</span><span class="dv">10</span>, freq<span class="op">=</span><span class="st">'1h30min'</span>))  <span class="co"># æ¯ 1 å°æ—¶ 30 åˆ†é’Ÿ</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>&lt;150 * Minutes&gt;
DatetimeIndex(['2000-01-01 00:00:00', '2000-01-01 01:30:00',
               '2000-01-01 03:00:00', '2000-01-01 04:30:00',
               '2000-01-01 06:00:00', '2000-01-01 07:30:00',
               '2000-01-01 09:00:00', '2000-01-01 10:30:00',
               '2000-01-01 12:00:00', '2000-01-01 13:30:00'],
              dtype='datetime64[ns]', freq='90min')</code></pre>
</div>
</div>
</section>
<section id="é¢‘ç‡å’Œæ—¥æœŸåç§»---week-of-month" class="level2">
<h2 class="anchored" data-anchor-id="é¢‘ç‡å’Œæ—¥æœŸåç§»---week-of-month">é¢‘ç‡å’Œæ—¥æœŸåç§» - â€œWeek of Monthâ€</h2>
<div id="9c3c25f7" class="cell" data-execution_count="28">
<div class="sourceCode cell-code" id="cb53"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd  <span class="co"># å¯¼å…¥ pandas</span></span>
<span id="cb53-2"><a href="#cb53-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-3"><a href="#cb53-3" aria-hidden="true" tabindex="-1"></a>rng <span class="op">=</span> pd.date_range(<span class="st">'2012-01-01'</span>, <span class="st">'2012-09-01'</span>, freq<span class="op">=</span><span class="st">'WOM-3FRI'</span>)  <span class="co"># æ¯æœˆç¬¬ä¸‰ä¸ªæ˜ŸæœŸäº”</span></span>
<span id="cb53-4"><a href="#cb53-4" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="bu">list</span>(rng))  <span class="co"># æ‰“å°æ—¥æœŸåˆ—è¡¨</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[Timestamp('2012-01-20 00:00:00'), Timestamp('2012-02-17 00:00:00'), Timestamp('2012-03-16 00:00:00'), Timestamp('2012-04-20 00:00:00'), Timestamp('2012-05-18 00:00:00'), Timestamp('2012-06-15 00:00:00'), Timestamp('2012-07-20 00:00:00'), Timestamp('2012-08-17 00:00:00')]</code></pre>
</div>
</div>
<section id="ç§»ä½-è¶…å‰å’Œæ»å-æ•°æ®" class="level3">
<h3 class="anchored" data-anchor-id="ç§»ä½-è¶…å‰å’Œæ»å-æ•°æ®">ç§»ä½ (è¶…å‰å’Œæ»å) æ•°æ®</h3>
<p><em>ç§»ä½</em>å°†æ•°æ®åœ¨æ—¶é—´ä¸Šå‘åæˆ–å‘å‰ç§»åŠ¨ã€‚ä½¿ç”¨ <code>shift()</code> æ–¹æ³•ï¼š</p>
<div id="8406dfc9" class="cell" data-execution_count="29">
<div class="sourceCode cell-code" id="cb55"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np  <span class="co"># å¯¼å…¥ NumPy</span></span>
<span id="cb55-2"><a href="#cb55-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd  <span class="co"># å¯¼å…¥ pandas</span></span>
<span id="cb55-3"><a href="#cb55-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb55-4"><a href="#cb55-4" aria-hidden="true" tabindex="-1"></a>ts <span class="op">=</span> pd.Series(np.random.randn(<span class="dv">4</span>),</span>
<span id="cb55-5"><a href="#cb55-5" aria-hidden="true" tabindex="-1"></a>               index<span class="op">=</span>pd.date_range(<span class="st">'1/1/2000'</span>, periods<span class="op">=</span><span class="dv">4</span>, freq<span class="op">=</span><span class="st">'M'</span>))  <span class="co"># åˆ›å»ºä¸€ä¸ªæ—¶é—´åºåˆ— (æ¯æœˆ)</span></span>
<span id="cb55-6"><a href="#cb55-6" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(ts)  <span class="co"># æ‰“å°åŸå§‹æ—¶é—´åºåˆ—</span></span>
<span id="cb55-7"><a href="#cb55-7" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(ts.shift(<span class="dv">2</span>))  <span class="co"># å‘åç§»åŠ¨ 2 ä¸ªå‘¨æœŸ (æ»å)</span></span>
<span id="cb55-8"><a href="#cb55-8" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(ts.shift(<span class="op">-</span><span class="dv">2</span>))  <span class="co"># å‘å‰ç§»åŠ¨ 2 ä¸ªå‘¨æœŸ (è¶…å‰)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>2000-01-31   -1.775190
2000-02-29    1.644746
2000-03-31   -0.828214
2000-04-30   -0.799291
Freq: ME, dtype: float64
2000-01-31         NaN
2000-02-29         NaN
2000-03-31   -1.775190
2000-04-30    1.644746
Freq: ME, dtype: float64
2000-01-31   -0.828214
2000-02-29   -0.799291
2000-03-31         NaN
2000-04-30         NaN
Freq: ME, dtype: float64</code></pre>
</div>
</div>
</section>
</section>
<section id="ç§»ä½-è¶…å‰å’Œæ»å-æ•°æ®-ç»­" class="level2">
<h2 class="anchored" data-anchor-id="ç§»ä½-è¶…å‰å’Œæ»å-æ•°æ®-ç»­">ç§»ä½ (è¶…å‰å’Œæ»å) æ•°æ® (ç»­)</h2>
<p>ä¸€ä¸ªå¸¸è§çš„ç”¨é€”æ˜¯è®¡ç®—ç™¾åˆ†æ¯”å˜åŒ–ï¼š</p>
<div id="f1ccff9f" class="cell" data-execution_count="30">
<div class="sourceCode cell-code" id="cb57"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np  <span class="co"># å¯¼å…¥ NumPy</span></span>
<span id="cb57-2"><a href="#cb57-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd  <span class="co"># å¯¼å…¥ pandas</span></span>
<span id="cb57-3"><a href="#cb57-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-4"><a href="#cb57-4" aria-hidden="true" tabindex="-1"></a>ts <span class="op">=</span> pd.Series(np.random.randn(<span class="dv">4</span>),</span>
<span id="cb57-5"><a href="#cb57-5" aria-hidden="true" tabindex="-1"></a>               index<span class="op">=</span>pd.date_range(<span class="st">'1/1/2000'</span>, periods<span class="op">=</span><span class="dv">4</span>, freq<span class="op">=</span><span class="st">'M'</span>))  <span class="co"># åˆ›å»ºä¸€ä¸ªæ—¶é—´åºåˆ— (æ¯æœˆ)</span></span>
<span id="cb57-6"><a href="#cb57-6" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(ts <span class="op">/</span> ts.shift(<span class="dv">1</span>) <span class="op">-</span> <span class="dv">1</span>)  <span class="co"># è®¡ç®—ç™¾åˆ†æ¯”å˜åŒ–</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>2000-01-31         NaN
2000-02-29    3.472842
2000-03-31   -2.084910
2000-04-30   -0.520555
Freq: ME, dtype: float64</code></pre>
</div>
</div>
</section>
<section id="ç§»ä½-è¶…å‰å’Œæ»å-æ•°æ®-ç»­-1" class="level2">
<h2 class="anchored" data-anchor-id="ç§»ä½-è¶…å‰å’Œæ»å-æ•°æ®-ç»­-1">ç§»ä½ (è¶…å‰å’Œæ»å) æ•°æ® (ç»­)</h2>
<p>æ‚¨è¿˜å¯ä»¥ç§»åŠ¨<em>æ—¶é—´æˆ³</em>ï¼Œä¿æŒæ•°æ®ä¸å˜ï¼š</p>
<div id="5a266625" class="cell" data-execution_count="31">
<div class="sourceCode cell-code" id="cb59"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np  <span class="co"># å¯¼å…¥ NumPy</span></span>
<span id="cb59-2"><a href="#cb59-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd  <span class="co"># å¯¼å…¥ pandas</span></span>
<span id="cb59-3"><a href="#cb59-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb59-4"><a href="#cb59-4" aria-hidden="true" tabindex="-1"></a>ts <span class="op">=</span> pd.Series(np.random.randn(<span class="dv">4</span>),</span>
<span id="cb59-5"><a href="#cb59-5" aria-hidden="true" tabindex="-1"></a>               index<span class="op">=</span>pd.date_range(<span class="st">'1/1/2000'</span>, periods<span class="op">=</span><span class="dv">4</span>, freq<span class="op">=</span><span class="st">'M'</span>))  <span class="co"># åˆ›å»ºä¸€ä¸ªæ—¶é—´åºåˆ— (æ¯æœˆ)</span></span>
<span id="cb59-6"><a href="#cb59-6" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(ts.shift(<span class="dv">2</span>, freq<span class="op">=</span><span class="st">'M'</span>))  <span class="co"># å°†æ—¶é—´æˆ³å‘åç§»åŠ¨ 2 ä¸ªæœˆ</span></span>
<span id="cb59-7"><a href="#cb59-7" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(ts.shift(<span class="dv">3</span>, freq<span class="op">=</span><span class="st">'D'</span>))  <span class="co"># å°†æ—¶é—´æˆ³å‘åç§»åŠ¨ 3 å¤©</span></span>
<span id="cb59-8"><a href="#cb59-8" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(ts.shift(<span class="dv">1</span>, freq<span class="op">=</span><span class="st">'90T'</span>))  <span class="co"># å°†æ—¶é—´æˆ³å‘åç§»åŠ¨ 90 åˆ†é’Ÿ ('T' è¡¨ç¤ºåˆ†é’Ÿ)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>2000-03-31    1.545804
2000-04-30   -0.087442
2000-05-31   -0.070348
2000-06-30   -2.808519
Freq: ME, dtype: float64
2000-02-03    1.545804
2000-03-03   -0.087442
2000-04-03   -0.070348
2000-05-03   -2.808519
dtype: float64
2000-01-31 01:30:00    1.545804
2000-02-29 01:30:00   -0.087442
2000-03-31 01:30:00   -0.070348
2000-04-30 01:30:00   -2.808519
dtype: float64</code></pre>
</div>
</div>
<section id="ä½¿ç”¨åç§»é‡ç§»åŠ¨æ—¥æœŸ" class="level3">
<h3 class="anchored" data-anchor-id="ä½¿ç”¨åç§»é‡ç§»åŠ¨æ—¥æœŸ">ä½¿ç”¨åç§»é‡ç§»åŠ¨æ—¥æœŸ</h3>
<p><code>pandas</code> æ—¥æœŸåç§»é‡å¯ä»¥ä¸ <code>datetime</code> æˆ– <code>Timestamp</code> å¯¹è±¡ä¸€èµ·ä½¿ç”¨ï¼š</p>
<div id="37e5e003" class="cell" data-execution_count="32">
<div class="sourceCode cell-code" id="cb61"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd  <span class="co"># å¯¼å…¥ pandas</span></span>
<span id="cb61-2"><a href="#cb61-2" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> datetime <span class="im">import</span> datetime  <span class="co"># å¯¼å…¥ datetime</span></span>
<span id="cb61-3"><a href="#cb61-3" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> pandas.tseries.offsets <span class="im">import</span> Day, MonthEnd  <span class="co"># å¯¼å…¥ Day å’Œ MonthEnd åç§»</span></span>
<span id="cb61-4"><a href="#cb61-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-5"><a href="#cb61-5" aria-hidden="true" tabindex="-1"></a>now <span class="op">=</span> datetime(<span class="dv">2011</span>, <span class="dv">11</span>, <span class="dv">17</span>)  <span class="co"># åˆ›å»ºä¸€ä¸ª datetime å¯¹è±¡</span></span>
<span id="cb61-6"><a href="#cb61-6" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(now <span class="op">+</span> <span class="dv">3</span> <span class="op">*</span> Day())  <span class="co"># åŠ ä¸Š 3 å¤©</span></span>
<span id="cb61-7"><a href="#cb61-7" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(now <span class="op">+</span> MonthEnd())  <span class="co"># æ»šåŠ¨åˆ°æœˆåº•</span></span>
<span id="cb61-8"><a href="#cb61-8" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(now <span class="op">+</span> MonthEnd(<span class="dv">2</span>))  <span class="co"># æ»šåŠ¨åˆ°ä¸‹ä¸ªæœˆåº•</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>2011-11-20 00:00:00
2011-11-30 00:00:00
2011-12-31 00:00:00</code></pre>
</div>
</div>
</section>
</section>
<section id="ä½¿ç”¨åç§»é‡ç§»åŠ¨æ—¥æœŸç»­" class="level2">
<h2 class="anchored" data-anchor-id="ä½¿ç”¨åç§»é‡ç§»åŠ¨æ—¥æœŸç»­">ä½¿ç”¨åç§»é‡ç§»åŠ¨æ—¥æœŸ(ç»­)</h2>
<div id="244cf8c5" class="cell" data-execution_count="33">
<div class="sourceCode cell-code" id="cb63"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb63-1"><a href="#cb63-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd  <span class="co"># å¯¼å…¥ pandas</span></span>
<span id="cb63-2"><a href="#cb63-2" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> datetime <span class="im">import</span> datetime  <span class="co"># å¯¼å…¥ datetime</span></span>
<span id="cb63-3"><a href="#cb63-3" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> pandas.tseries.offsets <span class="im">import</span>  MonthEnd  <span class="co"># å¯¼å…¥ MonthEnd åç§»</span></span>
<span id="cb63-4"><a href="#cb63-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb63-5"><a href="#cb63-5" aria-hidden="true" tabindex="-1"></a>now <span class="op">=</span> datetime(<span class="dv">2011</span>, <span class="dv">11</span>, <span class="dv">17</span>)  <span class="co"># åˆ›å»ºä¸€ä¸ª datetime å¯¹è±¡</span></span>
<span id="cb63-6"><a href="#cb63-6" aria-hidden="true" tabindex="-1"></a>offset <span class="op">=</span> MonthEnd()  <span class="co"># åˆ›å»º MonthEnd åç§»å¯¹è±¡</span></span>
<span id="cb63-7"><a href="#cb63-7" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(offset.rollforward(now))  <span class="co"># æ˜¾å¼å‘å‰æ»šåŠ¨</span></span>
<span id="cb63-8"><a href="#cb63-8" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(offset.rollback(now))  <span class="co"># æ˜¾å¼å‘åæ»šåŠ¨</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>2011-11-30 00:00:00
2011-10-31 00:00:00</code></pre>
</div>
</div>
</section>
<section id="ä½¿ç”¨åç§»é‡ç§»åŠ¨æ—¥æœŸç»­-1" class="level2">
<h2 class="anchored" data-anchor-id="ä½¿ç”¨åç§»é‡ç§»åŠ¨æ—¥æœŸç»­-1">ä½¿ç”¨åç§»é‡ç§»åŠ¨æ—¥æœŸ(ç»­)</h2>
<p>å°†æ—¥æœŸåç§»é‡ä¸ <code>groupby</code> ç»“åˆä½¿ç”¨çš„ä¸€ç§å·§å¦™æ–¹æ³•æ˜¯ â€œæ»šåŠ¨â€ æ—¥æœŸï¼š</p>
<div id="32e12f59" class="cell" data-execution_count="34">
<div class="sourceCode cell-code" id="cb65"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb65-1"><a href="#cb65-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np  <span class="co"># å¯¼å…¥ NumPy</span></span>
<span id="cb65-2"><a href="#cb65-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd  <span class="co"># å¯¼å…¥ pandas</span></span>
<span id="cb65-3"><a href="#cb65-3" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> pandas.tseries.offsets <span class="im">import</span> MonthEnd  <span class="co"># å¯¼å…¥ MonthEnd</span></span>
<span id="cb65-4"><a href="#cb65-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-5"><a href="#cb65-5" aria-hidden="true" tabindex="-1"></a>ts <span class="op">=</span> pd.Series(np.random.randn(<span class="dv">20</span>),</span>
<span id="cb65-6"><a href="#cb65-6" aria-hidden="true" tabindex="-1"></a>                index<span class="op">=</span>pd.date_range(<span class="st">'1/15/2000'</span>, periods<span class="op">=</span><span class="dv">20</span>, freq<span class="op">=</span><span class="st">'4D'</span>))  <span class="co"># åˆ›å»ºä¸€ä¸ªæ—¶é—´åºåˆ— (æ¯ 4 å¤©)</span></span>
<span id="cb65-7"><a href="#cb65-7" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(ts.groupby(MonthEnd().rollforward).mean())  <span class="co"># æŒ‰æœˆåº•åˆ†ç»„å¹¶è®¡ç®—å¹³å‡å€¼</span></span>
<span id="cb65-8"><a href="#cb65-8" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(ts.resample(<span class="st">'M'</span>).mean())  <span class="co"># ç­‰æ•ˆï¼Œä¸”é€Ÿåº¦æ›´å¿« (æŒ‰æœˆé‡é‡‡æ ·)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>2000-01-31    0.397156
2000-02-29    0.184932
2000-03-31   -0.481613
dtype: float64
2000-01-31    0.397156
2000-02-29    0.184932
2000-03-31   -0.481613
Freq: ME, dtype: float64</code></pre>
</div>
</div>
</section>
<section id="æ—¶åŒºå¤„ç†" class="level2">
<h2 class="anchored" data-anchor-id="æ—¶åŒºå¤„ç†">æ—¶åŒºå¤„ç†</h2>
<p>å¤„ç†æ—¶åŒºå¯èƒ½å¾ˆå¤æ‚ã€‚<code>pandas</code> ä½¿ç”¨ <code>pytz</code> åº“ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œpandas ä¸­çš„æ—¶é—´åºåˆ—æ˜¯æ—¶åŒºæœ´ç´ çš„(æ²¡æœ‰æ—¶åŒºä¿¡æ¯)ã€‚</p>
<div id="599abb3a" class="cell" data-execution_count="35">
<div class="sourceCode cell-code" id="cb67"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb67-1"><a href="#cb67-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pytz  <span class="co"># å¯¼å…¥ pytz</span></span>
<span id="cb67-2"><a href="#cb67-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb67-3"><a href="#cb67-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(pytz.common_timezones[<span class="op">-</span><span class="dv">5</span>:])  <span class="co"># æ‰“å°æœ€å 5 ä¸ªå¸¸è§æ—¶åŒº</span></span>
<span id="cb67-4"><a href="#cb67-4" aria-hidden="true" tabindex="-1"></a>tz <span class="op">=</span> pytz.timezone(<span class="st">'America/New_York'</span>)  <span class="co"># è·å–çº½çº¦æ—¶åŒº</span></span>
<span id="cb67-5"><a href="#cb67-5" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(tz)  <span class="co"># æ‰“å°æ—¶åŒºå¯¹è±¡</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>['US/Eastern', 'US/Hawaii', 'US/Mountain', 'US/Pacific', 'UTC']
America/New_York</code></pre>
</div>
</div>
<section id="æ—¶åŒºæœ¬åœ°åŒ–å’Œè½¬æ¢" class="level3">
<h3 class="anchored" data-anchor-id="æ—¶åŒºæœ¬åœ°åŒ–å’Œè½¬æ¢">æ—¶åŒºæœ¬åœ°åŒ–å’Œè½¬æ¢</h3>
<div id="980eab23" class="cell" data-execution_count="36">
<div class="sourceCode cell-code" id="cb69"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb69-1"><a href="#cb69-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np  <span class="co"># å¯¼å…¥ NumPy</span></span>
<span id="cb69-2"><a href="#cb69-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd  <span class="co"># å¯¼å…¥ pandas</span></span>
<span id="cb69-3"><a href="#cb69-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb69-4"><a href="#cb69-4" aria-hidden="true" tabindex="-1"></a>dates <span class="op">=</span> pd.date_range(<span class="st">'3/9/2012 9:30'</span>, periods<span class="op">=</span><span class="dv">6</span>, freq<span class="op">=</span><span class="st">'D'</span>)  <span class="co"># åˆ›å»ºä¸€ä¸ªæ—¥æœŸèŒƒå›´ (æ¯æ—¥)</span></span>
<span id="cb69-5"><a href="#cb69-5" aria-hidden="true" tabindex="-1"></a>ts <span class="op">=</span> pd.Series(np.random.randn(<span class="bu">len</span>(dates)), index<span class="op">=</span>dates)  <span class="co"># åˆ›å»ºä¸€ä¸ªæ—¶é—´åºåˆ—</span></span>
<span id="cb69-6"><a href="#cb69-6" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(ts)  <span class="co"># æ‰“å°æ—¶é—´åºåˆ—</span></span>
<span id="cb69-7"><a href="#cb69-7" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(ts.index.tz)  <span class="co"># æ—¶åŒºæœ´ç´  (None)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>2012-03-09 09:30:00   -0.146057
2012-03-10 09:30:00   -0.814732
2012-03-11 09:30:00   -0.179495
2012-03-12 09:30:00   -0.628043
2012-03-13 09:30:00   -1.259515
2012-03-14 09:30:00   -0.067669
Freq: D, dtype: float64
None</code></pre>
</div>
</div>
</section>
<section id="æ—¶åŒºæœ¬åœ°åŒ–å’Œè½¬æ¢ç»­" class="level3">
<h3 class="anchored" data-anchor-id="æ—¶åŒºæœ¬åœ°åŒ–å’Œè½¬æ¢ç»­">æ—¶åŒºæœ¬åœ°åŒ–å’Œè½¬æ¢(ç»­)</h3>
<div id="1089802e" class="cell" data-execution_count="37">
<div class="sourceCode cell-code" id="cb71"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb71-1"><a href="#cb71-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd  <span class="co"># å¯¼å…¥ pandas</span></span>
<span id="cb71-2"><a href="#cb71-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb71-3"><a href="#cb71-3" aria-hidden="true" tabindex="-1"></a><span class="co"># ç”Ÿæˆä¸€ä¸ªå¸¦æœ‰æ—¶åŒºçš„æ—¶é—´èŒƒå›´</span></span>
<span id="cb71-4"><a href="#cb71-4" aria-hidden="true" tabindex="-1"></a>date_rng <span class="op">=</span> pd.date_range(<span class="st">'3/9/2012 9:30'</span>, periods<span class="op">=</span><span class="dv">10</span>, freq<span class="op">=</span><span class="st">'D'</span>, tz<span class="op">=</span><span class="st">'UTC'</span>)  <span class="co"># åˆ›å»ºä¸€ä¸ªå¸¦æœ‰æ—¶åŒº (UTC) çš„æ—¥æœŸèŒƒå›´</span></span>
<span id="cb71-5"><a href="#cb71-5" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(date_rng.tz)  <span class="co"># æ‰“å°æ—¶åŒº</span></span>
<span id="cb71-6"><a href="#cb71-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb71-7"><a href="#cb71-7" aria-hidden="true" tabindex="-1"></a><span class="co"># æœ¬åœ°åŒ–åˆ°æ—¶åŒºã€‚</span></span>
<span id="cb71-8"><a href="#cb71-8" aria-hidden="true" tabindex="-1"></a>ts_utc <span class="op">=</span> ts.tz_localize(<span class="st">'UTC'</span>)  <span class="co"># å°†æ—¶é—´åºåˆ—æœ¬åœ°åŒ–åˆ° UTC</span></span>
<span id="cb71-9"><a href="#cb71-9" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(ts_utc)  <span class="co"># æ‰“å°æœ¬åœ°åŒ–åçš„æ—¶é—´åºåˆ—</span></span>
<span id="cb71-10"><a href="#cb71-10" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(ts_utc.index)  <span class="co"># æ‰“å°å¸¦æœ‰æ—¶åŒºçš„ç´¢å¼•</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>UTC
2012-03-09 09:30:00+00:00   -0.146057
2012-03-10 09:30:00+00:00   -0.814732
2012-03-11 09:30:00+00:00   -0.179495
2012-03-12 09:30:00+00:00   -0.628043
2012-03-13 09:30:00+00:00   -1.259515
2012-03-14 09:30:00+00:00   -0.067669
Freq: D, dtype: float64
DatetimeIndex(['2012-03-09 09:30:00+00:00', '2012-03-10 09:30:00+00:00',
               '2012-03-11 09:30:00+00:00', '2012-03-12 09:30:00+00:00',
               '2012-03-13 09:30:00+00:00', '2012-03-14 09:30:00+00:00'],
              dtype='datetime64[ns, UTC]', freq='D')</code></pre>
</div>
</div>
</section>
<section id="æ—¶åŒºæœ¬åœ°åŒ–å’Œè½¬æ¢ç»­-1" class="level3">
<h3 class="anchored" data-anchor-id="æ—¶åŒºæœ¬åœ°åŒ–å’Œè½¬æ¢ç»­-1">æ—¶åŒºæœ¬åœ°åŒ–å’Œè½¬æ¢(ç»­)</h3>
<div id="72017f5e" class="cell" data-execution_count="38">
<div class="sourceCode cell-code" id="cb73"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb73-1"><a href="#cb73-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np  <span class="co"># å¯¼å…¥ NumPy</span></span>
<span id="cb73-2"><a href="#cb73-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd  <span class="co"># å¯¼å…¥ pandas</span></span>
<span id="cb73-3"><a href="#cb73-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-4"><a href="#cb73-4" aria-hidden="true" tabindex="-1"></a>dates <span class="op">=</span> pd.date_range(<span class="st">'3/9/2012 9:30'</span>, periods<span class="op">=</span><span class="dv">6</span>, freq<span class="op">=</span><span class="st">'D'</span>)  <span class="co"># åˆ›å»ºä¸€ä¸ªæ—¥æœŸèŒƒå›´ (æ¯æ—¥)</span></span>
<span id="cb73-5"><a href="#cb73-5" aria-hidden="true" tabindex="-1"></a>ts <span class="op">=</span> pd.Series(np.random.randn(<span class="bu">len</span>(dates)), index<span class="op">=</span>dates)  <span class="co"># åˆ›å»ºä¸€ä¸ªæ—¶é—´åºåˆ—</span></span>
<span id="cb73-6"><a href="#cb73-6" aria-hidden="true" tabindex="-1"></a>ts_utc <span class="op">=</span> ts.tz_localize(<span class="st">'UTC'</span>)  <span class="co"># å°†æ—¶é—´åºåˆ—æœ¬åœ°åŒ–åˆ° UTC</span></span>
<span id="cb73-7"><a href="#cb73-7" aria-hidden="true" tabindex="-1"></a><span class="co"># è½¬æ¢ä¸ºå¦ä¸€ä¸ªæ—¶åŒºã€‚</span></span>
<span id="cb73-8"><a href="#cb73-8" aria-hidden="true" tabindex="-1"></a>ts_eastern <span class="op">=</span> ts_utc.tz_convert(<span class="st">'America/New_York'</span>)  <span class="co"># å°†æ—¶é—´åºåˆ—è½¬æ¢ä¸ºçº½çº¦æ—¶åŒº</span></span>
<span id="cb73-9"><a href="#cb73-9" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(ts_eastern)  <span class="co"># æ‰“å°è½¬æ¢åçš„æ—¶é—´åºåˆ—</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>2012-03-09 04:30:00-05:00   -0.730074
2012-03-10 04:30:00-05:00   -0.393134
2012-03-11 05:30:00-04:00    0.661329
2012-03-12 05:30:00-04:00    0.566687
2012-03-13 05:30:00-04:00    1.084561
2012-03-14 05:30:00-04:00   -1.141792
Freq: D, dtype: float64</code></pre>
</div>
</div>
</section>
<section id="ä½¿ç”¨å¸¦æœ‰æ—¶åŒºæ„è¯†çš„-timestamp-å¯¹è±¡è¿›è¡Œæ“ä½œ" class="level3">
<h3 class="anchored" data-anchor-id="ä½¿ç”¨å¸¦æœ‰æ—¶åŒºæ„è¯†çš„-timestamp-å¯¹è±¡è¿›è¡Œæ“ä½œ">ä½¿ç”¨å¸¦æœ‰æ—¶åŒºæ„è¯†çš„ Timestamp å¯¹è±¡è¿›è¡Œæ“ä½œ</h3>
<p><code>Timestamp</code> å¯¹è±¡ä¹Ÿæ”¯æŒæ—¶åŒºæœ¬åœ°åŒ–å’Œè½¬æ¢ï¼š</p>
<div id="118d1de2" class="cell" data-execution_count="39">
<div class="sourceCode cell-code" id="cb75"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb75-1"><a href="#cb75-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd  <span class="co"># å¯¼å…¥ pandas</span></span>
<span id="cb75-2"><a href="#cb75-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb75-3"><a href="#cb75-3" aria-hidden="true" tabindex="-1"></a>stamp <span class="op">=</span> pd.Timestamp(<span class="st">'2011-03-12 04:00'</span>)  <span class="co"># åˆ›å»ºä¸€ä¸ª Timestamp å¯¹è±¡</span></span>
<span id="cb75-4"><a href="#cb75-4" aria-hidden="true" tabindex="-1"></a>stamp_utc <span class="op">=</span> stamp.tz_localize(<span class="st">'utc'</span>)  <span class="co"># æœ¬åœ°åŒ–åˆ° UTC</span></span>
<span id="cb75-5"><a href="#cb75-5" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(stamp_utc.tz_convert(<span class="st">'America/New_York'</span>))  <span class="co"># è½¬æ¢ä¸ºçº½çº¦æ—¶åŒº</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>2011-03-11 23:00:00-05:00</code></pre>
</div>
</div>
</section>
<section id="ä½¿ç”¨å¸¦æœ‰æ—¶åŒºæ„è¯†çš„-timestamp-å¯¹è±¡è¿›è¡Œæ“ä½œç»­" class="level3">
<h3 class="anchored" data-anchor-id="ä½¿ç”¨å¸¦æœ‰æ—¶åŒºæ„è¯†çš„-timestamp-å¯¹è±¡è¿›è¡Œæ“ä½œç»­">ä½¿ç”¨å¸¦æœ‰æ—¶åŒºæ„è¯†çš„ Timestamp å¯¹è±¡è¿›è¡Œæ“ä½œ(ç»­)</h3>
<p>åœ¨ä¸åŒæ—¶åŒºä¹‹é—´æ‰§è¡Œæ“ä½œæ—¶ï¼Œç»“æœå°†é‡‡ç”¨ UTCã€‚</p>
<div id="70a06dab" class="cell" data-execution_count="40">
<div class="sourceCode cell-code" id="cb77"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb77-1"><a href="#cb77-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np  <span class="co"># å¯¼å…¥ NumPy</span></span>
<span id="cb77-2"><a href="#cb77-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd  <span class="co"># å¯¼å…¥ pandas</span></span>
<span id="cb77-3"><a href="#cb77-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-4"><a href="#cb77-4" aria-hidden="true" tabindex="-1"></a>dates <span class="op">=</span> pd.date_range(<span class="st">'3/7/2012 9:30'</span>, periods<span class="op">=</span><span class="dv">10</span>, freq<span class="op">=</span><span class="st">'B'</span>)  <span class="co"># åˆ›å»ºä¸€ä¸ªæ—¥æœŸèŒƒå›´ (å·¥ä½œæ—¥)</span></span>
<span id="cb77-5"><a href="#cb77-5" aria-hidden="true" tabindex="-1"></a>ts <span class="op">=</span> pd.Series(np.random.randn(<span class="bu">len</span>(dates)), index<span class="op">=</span>dates)  <span class="co"># åˆ›å»ºä¸€ä¸ªæ—¶é—´åºåˆ—</span></span>
<span id="cb77-6"><a href="#cb77-6" aria-hidden="true" tabindex="-1"></a>ts1 <span class="op">=</span> ts[:<span class="dv">7</span>].tz_localize(<span class="st">'Europe/London'</span>)  <span class="co"># æœ¬åœ°åŒ–åˆ°ä¼¦æ•¦æ—¶åŒº</span></span>
<span id="cb77-7"><a href="#cb77-7" aria-hidden="true" tabindex="-1"></a>ts2 <span class="op">=</span> ts1[<span class="dv">2</span>:].tz_convert(<span class="st">'Europe/Moscow'</span>)  <span class="co"># è½¬æ¢ä¸ºè«æ–¯ç§‘æ—¶åŒº</span></span>
<span id="cb77-8"><a href="#cb77-8" aria-hidden="true" tabindex="-1"></a>result <span class="op">=</span> ts1 <span class="op">+</span> ts2  <span class="co"># ä¸åŒæ—¶åŒºçš„æ—¶é—´åºåˆ—ç›¸åŠ </span></span>
<span id="cb77-9"><a href="#cb77-9" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(result.index)  <span class="co"># ç»“æœçš„ç´¢å¼•å°†æ˜¯ UTC</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>DatetimeIndex(['2012-03-07 09:30:00+00:00', '2012-03-08 09:30:00+00:00',
               '2012-03-09 09:30:00+00:00', '2012-03-12 09:30:00+00:00',
               '2012-03-13 09:30:00+00:00', '2012-03-14 09:30:00+00:00',
               '2012-03-15 09:30:00+00:00'],
              dtype='datetime64[ns, UTC]', freq=None)</code></pre>
</div>
</div>
</section>
</section>
<section id="å‘¨æœŸå’Œå‘¨æœŸç®—æœ¯" class="level2">
<h2 class="anchored" data-anchor-id="å‘¨æœŸå’Œå‘¨æœŸç®—æœ¯">å‘¨æœŸå’Œå‘¨æœŸç®—æœ¯</h2>
<p><em>å‘¨æœŸ (Periods)</em> è¡¨ç¤ºæ—¶é—´è·¨åº¦ (ä¾‹å¦‚ï¼Œå¤©ã€æœˆã€å­£åº¦ã€å¹´)ã€‚<code>Period</code> ç±»ï¼š</p>
<div id="83e23ee4" class="cell" data-execution_count="41">
<div class="sourceCode cell-code" id="cb79"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb79-1"><a href="#cb79-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd  <span class="co"># å¯¼å…¥ pandas</span></span>
<span id="cb79-2"><a href="#cb79-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb79-3"><a href="#cb79-3" aria-hidden="true" tabindex="-1"></a>p <span class="op">=</span> pd.Period(<span class="dv">2011</span>, freq<span class="op">=</span><span class="st">'A-DEC'</span>)  <span class="co"># åˆ›å»ºä¸€ä¸ªå¹´åº¦å‘¨æœŸ (ä»¥ 12 æœˆç»“æŸ)</span></span>
<span id="cb79-4"><a href="#cb79-4" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(p)  <span class="co"># æ‰“å°å‘¨æœŸ</span></span>
<span id="cb79-5"><a href="#cb79-5" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(p <span class="op">+</span> <span class="dv">5</span>)  <span class="co"># åŠ ä¸Š 5 å¹´</span></span>
<span id="cb79-6"><a href="#cb79-6" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(p <span class="op">-</span> <span class="dv">2</span>)  <span class="co"># å‡å» 2 å¹´</span></span>
<span id="cb79-7"><a href="#cb79-7" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(pd.Period(<span class="st">'2014'</span>, freq<span class="op">=</span><span class="st">'A-DEC'</span>) <span class="op">-</span> p)  <span class="co"># è®¡ç®—ä¸¤ä¸ªå‘¨æœŸä¹‹é—´çš„å·® (å¹´æ•°)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>2011
2016
2009
&lt;3 * YearEnds: month=12&gt;</code></pre>
</div>
</div>
</section>
<section id="å‘¨æœŸå’Œå‘¨æœŸç®—æœ¯-ç»­" class="level2">
<h2 class="anchored" data-anchor-id="å‘¨æœŸå’Œå‘¨æœŸç®—æœ¯-ç»­">å‘¨æœŸå’Œå‘¨æœŸç®—æœ¯ (ç»­)</h2>
<p><code>period_range</code> åˆ›å»ºå‘¨æœŸçš„è§„åˆ™èŒƒå›´ï¼š</p>
<div id="952a1d9a" class="cell" data-execution_count="42">
<div class="sourceCode cell-code" id="cb81"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb81-1"><a href="#cb81-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np  <span class="co"># å¯¼å…¥ NumPy</span></span>
<span id="cb81-2"><a href="#cb81-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd  <span class="co"># å¯¼å…¥ pandas</span></span>
<span id="cb81-3"><a href="#cb81-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb81-4"><a href="#cb81-4" aria-hidden="true" tabindex="-1"></a>rng <span class="op">=</span> pd.period_range(<span class="st">'2000-01-01'</span>, <span class="st">'2000-06-30'</span>, freq<span class="op">=</span><span class="st">'M'</span>)  <span class="co"># åˆ›å»ºä¸€ä¸ªæ¯æœˆå‘¨æœŸèŒƒå›´</span></span>
<span id="cb81-5"><a href="#cb81-5" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(rng)  <span class="co"># æ‰“å° PeriodIndex</span></span>
<span id="cb81-6"><a href="#cb81-6" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(pd.Series(np.random.randn(<span class="dv">6</span>), index<span class="op">=</span>rng))  <span class="co"># åˆ›å»ºä¸€ä¸ªä»¥ PeriodIndex ä¸ºç´¢å¼•çš„ Series</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>PeriodIndex(['2000-01', '2000-02', '2000-03', '2000-04', '2000-05', '2000-06'], dtype='period[M]')
2000-01    1.779866
2000-02    1.738569
2000-03   -0.819227
2000-04    0.886658
2000-05    0.271296
2000-06    0.240180
Freq: M, dtype: float64</code></pre>
</div>
</div>
</section>
<section id="å‘¨æœŸå’Œå‘¨æœŸç®—æœ¯-ç»­-1" class="level2">
<h2 class="anchored" data-anchor-id="å‘¨æœŸå’Œå‘¨æœŸç®—æœ¯-ç»­-1">å‘¨æœŸå’Œå‘¨æœŸç®—æœ¯ (ç»­)</h2>
<div id="4820716f" class="cell" data-execution_count="43">
<div class="sourceCode cell-code" id="cb83"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb83-1"><a href="#cb83-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd  <span class="co"># å¯¼å…¥ pandas</span></span>
<span id="cb83-2"><a href="#cb83-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-3"><a href="#cb83-3" aria-hidden="true" tabindex="-1"></a>values <span class="op">=</span> [<span class="st">'2001Q3'</span>, <span class="st">'2002Q2'</span>, <span class="st">'2003Q1'</span>]  <span class="co"># å®šä¹‰ä¸€ä¸ªå­£åº¦å­—ç¬¦ä¸²åˆ—è¡¨</span></span>
<span id="cb83-4"><a href="#cb83-4" aria-hidden="true" tabindex="-1"></a>index <span class="op">=</span> pd.PeriodIndex(values, freq<span class="op">=</span><span class="st">'Q-DEC'</span>)  <span class="co"># ä»å­—ç¬¦ä¸²åˆ—è¡¨åˆ›å»ºä¸€ä¸ª PeriodIndex (ä»¥ 12 æœˆç»“æŸçš„å­£åº¦)</span></span>
<span id="cb83-5"><a href="#cb83-5" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(index)  <span class="co"># æ‰“å° PeriodIndex</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>PeriodIndex(['2001Q3', '2002Q2', '2003Q1'], dtype='period[Q-DEC]')</code></pre>
</div>
</div>
<section id="å‘¨æœŸé¢‘ç‡è½¬æ¢" class="level3">
<h3 class="anchored" data-anchor-id="å‘¨æœŸé¢‘ç‡è½¬æ¢">å‘¨æœŸé¢‘ç‡è½¬æ¢</h3>
<p>å¯ä»¥ä½¿ç”¨ <code>asfreq</code> è½¬æ¢å‘¨æœŸå’Œ <code>PeriodIndex</code> å¯¹è±¡ï¼š</p>
<div id="72fd9263" class="cell" data-execution_count="44">
<div class="sourceCode cell-code" id="cb85"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb85-1"><a href="#cb85-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd  <span class="co"># å¯¼å…¥ pandas</span></span>
<span id="cb85-2"><a href="#cb85-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb85-3"><a href="#cb85-3" aria-hidden="true" tabindex="-1"></a>p <span class="op">=</span> pd.Period(<span class="st">'2011'</span>, freq<span class="op">=</span><span class="st">'A-DEC'</span>)  <span class="co"># åˆ›å»ºä¸€ä¸ªå¹´åº¦å‘¨æœŸ (ä»¥ 12 æœˆç»“æŸ)</span></span>
<span id="cb85-4"><a href="#cb85-4" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(p.asfreq(<span class="st">'M'</span>, how<span class="op">=</span><span class="st">'start'</span>))  <span class="co"># è½¬æ¢ä¸ºæ¯æœˆå‘¨æœŸ (å¼€å§‹)</span></span>
<span id="cb85-5"><a href="#cb85-5" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(p.asfreq(<span class="st">'M'</span>, how<span class="op">=</span><span class="st">'end'</span>))  <span class="co"># è½¬æ¢ä¸ºæ¯æœˆå‘¨æœŸ (ç»“æŸ)</span></span>
<span id="cb85-6"><a href="#cb85-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb85-7"><a href="#cb85-7" aria-hidden="true" tabindex="-1"></a>p <span class="op">=</span> pd.Period(<span class="st">'Aug-2011'</span>, <span class="st">'M'</span>) <span class="co"># åˆ›å»ºä¸€ä¸ªæœˆçš„å‘¨æœŸ</span></span>
<span id="cb85-8"><a href="#cb85-8" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(p.asfreq(<span class="st">'A-JUN'</span>)) <span class="co"># è½¬æ¢ä¸ºä»¥å…­æœˆç»“æŸçš„å¹´åº¦å‘¨æœŸ</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>2011-01
2011-12
2012</code></pre>
</div>
</div>
</section>
<section id="å‘¨æœŸé¢‘ç‡è½¬æ¢ç»­" class="level3">
<h3 class="anchored" data-anchor-id="å‘¨æœŸé¢‘ç‡è½¬æ¢ç»­">å‘¨æœŸé¢‘ç‡è½¬æ¢(ç»­)</h3>
<div id="0d05841b" class="cell" data-execution_count="45">
<div class="sourceCode cell-code" id="cb87"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb87-1"><a href="#cb87-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np  <span class="co"># å¯¼å…¥ NumPy</span></span>
<span id="cb87-2"><a href="#cb87-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd  <span class="co"># å¯¼å…¥ pandas</span></span>
<span id="cb87-3"><a href="#cb87-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb87-4"><a href="#cb87-4" aria-hidden="true" tabindex="-1"></a>periods <span class="op">=</span> pd.period_range(<span class="st">'2006'</span>, <span class="st">'2009'</span>, freq<span class="op">=</span><span class="st">'A-DEC'</span>)  <span class="co"># åˆ›å»ºä¸€ä¸ªå¹´åº¦å‘¨æœŸèŒƒå›´ (ä»¥ 12 æœˆç»“æŸ)</span></span>
<span id="cb87-5"><a href="#cb87-5" aria-hidden="true" tabindex="-1"></a>ts <span class="op">=</span> pd.Series(np.random.randn(<span class="bu">len</span>(periods)), index<span class="op">=</span>periods)  <span class="co"># åˆ›å»ºä¸€ä¸ªä»¥ PeriodIndex ä¸ºç´¢å¼•çš„ Series</span></span>
<span id="cb87-6"><a href="#cb87-6" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(ts.asfreq(<span class="st">'M'</span>, how<span class="op">=</span><span class="st">'start'</span>))   <span class="co"># è½¬æ¢ä¸ºæ¯æœˆå‘¨æœŸ (å¼€å§‹)</span></span>
<span id="cb87-7"><a href="#cb87-7" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(ts.asfreq(<span class="st">'B'</span>, how<span class="op">=</span><span class="st">'end'</span>))  <span class="co"># è½¬æ¢ä¸ºå·¥ä½œæ—¥å‘¨æœŸ (ç»“æŸ)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>2006-01    1.681827
2007-01   -0.195829
2008-01    0.273490
2009-01   -0.028402
Freq: M, dtype: float64
2006-12-29    1.681827
2007-12-31   -0.195829
2008-12-31    0.273490
2009-12-31   -0.028402
Freq: B, dtype: float64</code></pre>
</div>
</div>
</section>
<section id="å­£åº¦å‘¨æœŸé¢‘ç‡" class="level3">
<h3 class="anchored" data-anchor-id="å­£åº¦å‘¨æœŸé¢‘ç‡">å­£åº¦å‘¨æœŸé¢‘ç‡</h3>
<p>å­£åº¦æ•°æ®åœ¨è´¢åŠ¡ä¸­å¾ˆå¸¸è§ã€‚<code>pandas</code> æ”¯æŒå­£åº¦é¢‘ç‡ (Q-JAN åˆ° Q-DEC)ï¼š</p>
<div id="f3e10412" class="cell" data-execution_count="46">
<div class="sourceCode cell-code" id="cb89"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb89-1"><a href="#cb89-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd  <span class="co"># å¯¼å…¥ pandas</span></span>
<span id="cb89-2"><a href="#cb89-2" aria-hidden="true" tabindex="-1"></a><span class="co">#åœ¨è´¢æ”¿å¹´åº¦äº 1 æœˆç»“æŸçš„æƒ…å†µä¸‹ï¼Œ2012Q4 çš„æ—¶é—´èŒƒå›´æ˜¯ä» 2011 å¹´ 11 æœˆåˆ° 2012 å¹´ 1 æœˆ</span></span>
<span id="cb89-3"><a href="#cb89-3" aria-hidden="true" tabindex="-1"></a>p <span class="op">=</span> pd.Period(<span class="st">'2012Q4'</span>, freq<span class="op">=</span><span class="st">'Q-JAN'</span>)  <span class="co"># åˆ›å»ºä¸€ä¸ªå­£åº¦å‘¨æœŸ (ä»¥ 1 æœˆç»“æŸ)</span></span>
<span id="cb89-4"><a href="#cb89-4" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(p)  <span class="co"># æ‰“å°å‘¨æœŸ</span></span>
<span id="cb89-5"><a href="#cb89-5" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(p.asfreq(<span class="st">'D'</span>, how<span class="op">=</span><span class="st">'start'</span>))  <span class="co"># è½¬æ¢ä¸ºæ¯æ—¥å‘¨æœŸ (å¼€å§‹)</span></span>
<span id="cb89-6"><a href="#cb89-6" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(p.asfreq(<span class="st">'D'</span>, how<span class="op">=</span><span class="st">'end'</span>))  <span class="co"># è½¬æ¢ä¸ºæ¯æ—¥å‘¨æœŸ (ç»“æŸ)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>2012Q4
2011-11-01
2012-01-31</code></pre>
</div>
</div>
</section>
<section id="å­£åº¦å‘¨æœŸé¢‘ç‡ç»­" class="level3">
<h3 class="anchored" data-anchor-id="å­£åº¦å‘¨æœŸé¢‘ç‡ç»­">å­£åº¦å‘¨æœŸé¢‘ç‡(ç»­)</h3>
<p>è·å–å­£åº¦å€’æ•°ç¬¬äºŒä¸ªå·¥ä½œæ—¥ä¸‹åˆ 4 ç‚¹çš„æ—¶é—´æˆ³</p>
<div id="e19832ba" class="cell" data-execution_count="47">
<div class="sourceCode cell-code" id="cb91"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb91-1"><a href="#cb91-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd  <span class="co"># å¯¼å…¥ pandas</span></span>
<span id="cb91-2"><a href="#cb91-2" aria-hidden="true" tabindex="-1"></a>p <span class="op">=</span> pd.Period(<span class="st">'2012Q4'</span>, freq<span class="op">=</span><span class="st">'Q-JAN'</span>)  <span class="co"># åˆ›å»ºä¸€ä¸ªå­£åº¦å‘¨æœŸ (ä»¥ 1 æœˆç»“æŸ)</span></span>
<span id="cb91-3"><a href="#cb91-3" aria-hidden="true" tabindex="-1"></a>p4pm <span class="op">=</span> (p.asfreq(<span class="st">'B'</span>, <span class="st">'e'</span>) <span class="op">-</span> <span class="dv">1</span>).asfreq(<span class="st">'T'</span>, <span class="st">'s'</span>) <span class="op">+</span> <span class="dv">16</span> <span class="op">*</span> <span class="dv">60</span> <span class="co">#è½¬æ¢ä¸ºäº¤æ˜“æ—¥ï¼Œå–å‰ä¸€å¤©ã€‚è½¬æ¢ä¸ºåˆ†é’Ÿï¼Œå–å½“å¤©çš„å¼€å§‹æ—¶é—´ã€‚ç„¶åå†åŠ ä¸Š16*60åˆ†é’Ÿ</span></span>
<span id="cb91-4"><a href="#cb91-4" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(p4pm)  <span class="co"># æ‰“å°å‘¨æœŸ</span></span>
<span id="cb91-5"><a href="#cb91-5" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(p4pm.to_timestamp())  <span class="co"># è½¬æ¢ä¸º Timestamp</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>2012-01-30 16:00
2012-01-30 16:00:00</code></pre>
</div>
</div>
</section>
<section id="å­£åº¦å‘¨æœŸé¢‘ç‡ç»­-1" class="level3">
<h3 class="anchored" data-anchor-id="å­£åº¦å‘¨æœŸé¢‘ç‡ç»­-1">å­£åº¦å‘¨æœŸé¢‘ç‡(ç»­)</h3>
<p>ä½¿ç”¨ pandas.period_range ç”Ÿæˆå­£åº¦èŒƒå›´</p>
<div id="54a427a4" class="cell" data-execution_count="48">
<div class="sourceCode cell-code" id="cb93"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb93-1"><a href="#cb93-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np  <span class="co"># å¯¼å…¥ NumPy</span></span>
<span id="cb93-2"><a href="#cb93-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd  <span class="co"># å¯¼å…¥ pandas</span></span>
<span id="cb93-3"><a href="#cb93-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb93-4"><a href="#cb93-4" aria-hidden="true" tabindex="-1"></a>periods <span class="op">=</span> pd.period_range(<span class="st">'2011Q3'</span>, <span class="st">'2012Q4'</span>, freq<span class="op">=</span><span class="st">'Q-JAN'</span>)  <span class="co"># åˆ›å»ºä¸€ä¸ªå­£åº¦å‘¨æœŸèŒƒå›´ (ä»¥ 1 æœˆç»“æŸ)</span></span>
<span id="cb93-5"><a href="#cb93-5" aria-hidden="true" tabindex="-1"></a>ts <span class="op">=</span> pd.Series(np.arange(<span class="bu">len</span>(periods)), index<span class="op">=</span>periods)  <span class="co"># åˆ›å»ºä¸€ä¸ªä»¥ PeriodIndex ä¸ºç´¢å¼•çš„ Series</span></span>
<span id="cb93-6"><a href="#cb93-6" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(ts)  <span class="co"># æ‰“å°æ—¶é—´åºåˆ—</span></span>
<span id="cb93-7"><a href="#cb93-7" aria-hidden="true" tabindex="-1"></a>new_periods <span class="op">=</span> (periods.asfreq(<span class="st">'B'</span>, <span class="st">'e'</span>) <span class="op">-</span> <span class="dv">1</span>).asfreq(<span class="st">'H'</span>, <span class="st">'s'</span>) <span class="op">+</span> <span class="dv">16</span>  <span class="co"># è®¡ç®—ä¸‹åˆ 4 ç‚¹çš„æ—¶é—´æˆ³</span></span>
<span id="cb93-8"><a href="#cb93-8" aria-hidden="true" tabindex="-1"></a>ts.index <span class="op">=</span> new_periods.to_timestamp()  <span class="co"># å°†ç´¢å¼•è½¬æ¢ä¸º Timestamp</span></span>
<span id="cb93-9"><a href="#cb93-9" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(ts)  <span class="co"># æ‰“å°è½¬æ¢åçš„æ—¶é—´åºåˆ—</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>2011Q3    0
2011Q4    1
2012Q1    2
2012Q2    3
2012Q3    4
2012Q4    5
Freq: Q-JAN, dtype: int64
2010-10-28 16:00:00    0
2011-01-28 16:00:00    1
2011-04-28 16:00:00    2
2011-07-28 16:00:00    3
2011-10-28 16:00:00    4
2012-01-30 16:00:00    5
dtype: int64</code></pre>
</div>
</div>
</section>
<section id="å°†æ—¶é—´æˆ³è½¬æ¢ä¸ºå‘¨æœŸ-åŠè¿”å›" class="level3">
<h3 class="anchored" data-anchor-id="å°†æ—¶é—´æˆ³è½¬æ¢ä¸ºå‘¨æœŸ-åŠè¿”å›">å°†æ—¶é—´æˆ³è½¬æ¢ä¸ºå‘¨æœŸ (åŠè¿”å›)</h3>
<p><code>to_period()</code> å°†æ—¶é—´æˆ³è½¬æ¢ä¸ºå‘¨æœŸï¼š</p>
<div id="c487ce8f" class="cell" data-execution_count="49">
<div class="sourceCode cell-code" id="cb95"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb95-1"><a href="#cb95-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np  <span class="co"># å¯¼å…¥ NumPy</span></span>
<span id="cb95-2"><a href="#cb95-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd  <span class="co"># å¯¼å…¥ pandas</span></span>
<span id="cb95-3"><a href="#cb95-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-4"><a href="#cb95-4" aria-hidden="true" tabindex="-1"></a>dates <span class="op">=</span> pd.date_range(<span class="st">'1/1/2000'</span>, periods<span class="op">=</span><span class="dv">3</span>, freq<span class="op">=</span><span class="st">'M'</span>)  <span class="co"># åˆ›å»ºä¸€ä¸ªæ—¥æœŸèŒƒå›´ (æ¯æœˆ)</span></span>
<span id="cb95-5"><a href="#cb95-5" aria-hidden="true" tabindex="-1"></a>ts <span class="op">=</span> pd.Series(np.random.randn(<span class="dv">3</span>), index<span class="op">=</span>dates)  <span class="co"># åˆ›å»ºä¸€ä¸ªä»¥ DatetimeIndex ä¸ºç´¢å¼•çš„ Series</span></span>
<span id="cb95-6"><a href="#cb95-6" aria-hidden="true" tabindex="-1"></a>pts <span class="op">=</span> ts.to_period()  <span class="co"># è½¬æ¢ä¸º PeriodIndex</span></span>
<span id="cb95-7"><a href="#cb95-7" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(ts)  <span class="co"># æ‰“å°åŸå§‹æ—¶é—´åºåˆ—</span></span>
<span id="cb95-8"><a href="#cb95-8" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(pts)  <span class="co"># æ‰“å°è½¬æ¢ä¸ºå‘¨æœŸçš„æ—¶é—´åºåˆ—</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>2000-01-31   -1.938277
2000-02-29    0.065547
2000-03-31   -0.557196
Freq: ME, dtype: float64
2000-01   -1.938277
2000-02    0.065547
2000-03   -0.557196
Freq: M, dtype: float64</code></pre>
</div>
</div>
</section>
<section id="å°†æ—¶é—´æˆ³è½¬æ¢ä¸ºå‘¨æœŸ-åŠè¿”å›ç»­" class="level3">
<h3 class="anchored" data-anchor-id="å°†æ—¶é—´æˆ³è½¬æ¢ä¸ºå‘¨æœŸ-åŠè¿”å›ç»­">å°†æ—¶é—´æˆ³è½¬æ¢ä¸ºå‘¨æœŸ (åŠè¿”å›)(ç»­)</h3>
<div id="04cedb96" class="cell" data-execution_count="50">
<div class="sourceCode cell-code" id="cb97"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb97-1"><a href="#cb97-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np  <span class="co"># å¯¼å…¥ NumPy</span></span>
<span id="cb97-2"><a href="#cb97-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd  <span class="co"># å¯¼å…¥ pandas</span></span>
<span id="cb97-3"><a href="#cb97-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb97-4"><a href="#cb97-4" aria-hidden="true" tabindex="-1"></a>dates <span class="op">=</span> pd.date_range(<span class="st">'1/29/2000'</span>, periods<span class="op">=</span><span class="dv">6</span>, freq<span class="op">=</span><span class="st">'D'</span>)   <span class="co"># åˆ›å»ºä¸€ä¸ªæ—¥æœŸèŒƒå›´ (æ¯æ—¥)</span></span>
<span id="cb97-5"><a href="#cb97-5" aria-hidden="true" tabindex="-1"></a>ts2 <span class="op">=</span> pd.Series(np.random.randn(<span class="dv">6</span>), index<span class="op">=</span>dates)  <span class="co"># åˆ›å»ºä¸€ä¸ªä»¥ DatetimeIndex ä¸ºç´¢å¼•çš„ Series</span></span>
<span id="cb97-6"><a href="#cb97-6" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(ts2.to_period(<span class="st">'M'</span>))  <span class="co"># è½¬æ¢ä¸ºæ¯æœˆå‘¨æœŸ</span></span>
<span id="cb97-7"><a href="#cb97-7" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(ts2.to_period(<span class="st">'M'</span>).to_timestamp(how<span class="op">=</span><span class="st">'end'</span>))  <span class="co"># è½¬æ¢å› Timestamp (æœˆæœ«)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>2000-01   -0.747664
2000-01   -0.073217
2000-01    0.699958
2000-02   -1.798177
2000-02    0.226364
2000-02    0.115551
Freq: M, dtype: float64
2000-01-31 23:59:59.999999999   -0.747664
2000-01-31 23:59:59.999999999   -0.073217
2000-01-31 23:59:59.999999999    0.699958
2000-02-29 23:59:59.999999999   -1.798177
2000-02-29 23:59:59.999999999    0.226364
2000-02-29 23:59:59.999999999    0.115551
dtype: float64</code></pre>
</div>
</div>
</section>
<section id="ä»æ•°ç»„åˆ›å»º-periodindex" class="level3">
<h3 class="anchored" data-anchor-id="ä»æ•°ç»„åˆ›å»º-periodindex">ä»æ•°ç»„åˆ›å»º PeriodIndex</h3>
<p>æ‚¨å¯ä»¥ç»„åˆå¹´ä»½å’Œå­£åº¦åˆ—æ¥åˆ›å»º <code>PeriodIndex</code>ï¼š</p>
<div id="48c2503a" class="cell" data-execution_count="51">
<div class="sourceCode cell-code" id="cb99"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb99-1"><a href="#cb99-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd  <span class="co"># å¯¼å…¥ pandas</span></span>
<span id="cb99-2"><a href="#cb99-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb99-3"><a href="#cb99-3" aria-hidden="true" tabindex="-1"></a>data <span class="op">=</span> pd.read_csv(<span class="st">'examples/macrodata.csv'</span>)  <span class="co"># è¯»å– CSV æ–‡ä»¶</span></span>
<span id="cb99-4"><a href="#cb99-4" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(data.head(<span class="dv">5</span>))  <span class="co"># æ‰“å°å‰ 5 è¡Œ</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   year  quarter   realgdp  realcons  realinv  realgovt  realdpi    cpi  \
0  1959        1  2710.349    1707.4  286.898   470.045   1886.9  28.98   
1  1959        2  2778.801    1733.7  310.859   481.301   1919.7  29.15   
2  1959        3  2775.488    1751.8  289.226   491.260   1916.4  29.35   
3  1959        4  2785.204    1753.7  299.356   484.052   1931.3  29.37   
4  1960        1  2847.699    1770.5  331.722   462.199   1955.5  29.54   

      m1  tbilrate  unemp      pop  infl  realint  
0  139.7      2.82    5.8  177.146  0.00     0.00  
1  141.7      3.08    5.1  177.830  2.34     0.74  
2  140.5      3.82    5.3  178.657  2.74     1.09  
3  140.0      4.33    5.6  179.386  0.27     4.06  
4  139.6      3.50    5.2  180.007  2.31     1.19  </code></pre>
</div>
</div>
</section>
<section id="ä»æ•°ç»„åˆ›å»º-periodindex-ç»­" class="level3">
<h3 class="anchored" data-anchor-id="ä»æ•°ç»„åˆ›å»º-periodindex-ç»­">ä»æ•°ç»„åˆ›å»º PeriodIndex (ç»­)</h3>
<div id="b64872bd" class="cell" data-execution_count="52">
<div class="sourceCode cell-code" id="cb101"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb101-1"><a href="#cb101-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd  <span class="co"># å¯¼å…¥ pandas</span></span>
<span id="cb101-2"><a href="#cb101-2" aria-hidden="true" tabindex="-1"></a>data <span class="op">=</span> pd.read_csv(<span class="st">'examples/macrodata.csv'</span>)  <span class="co"># è¯»å– CSV æ–‡ä»¶</span></span>
<span id="cb101-3"><a href="#cb101-3" aria-hidden="true" tabindex="-1"></a>index <span class="op">=</span> pd.PeriodIndex(year<span class="op">=</span>data[<span class="st">'year'</span>], quarter<span class="op">=</span>data[<span class="st">'quarter'</span>],freq<span class="op">=</span><span class="st">'Q-DEC'</span>)  <span class="co"># ä» year å’Œ quarter åˆ—åˆ›å»º PeriodIndex</span></span>
<span id="cb101-4"><a href="#cb101-4" aria-hidden="true" tabindex="-1"></a>data.index <span class="op">=</span> index  <span class="co"># è®¾ç½® DataFrame çš„ç´¢å¼•</span></span>
<span id="cb101-5"><a href="#cb101-5" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(data[<span class="st">'infl'</span>].head())  <span class="co"># æ‰“å° 'infl' åˆ—çš„å‰å‡ è¡Œ</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>1959Q1    0.00
1959Q2    2.34
1959Q3    2.74
1959Q4    0.27
1960Q1    2.31
Freq: Q-DEC, Name: infl, dtype: float64</code></pre>
</div>
</div>
</section>
</section>
<section id="é‡é‡‡æ ·å’Œé¢‘ç‡è½¬æ¢" class="level2">
<h2 class="anchored" data-anchor-id="é‡é‡‡æ ·å’Œé¢‘ç‡è½¬æ¢">é‡é‡‡æ ·å’Œé¢‘ç‡è½¬æ¢</h2>
<p><em>é‡é‡‡æ ·</em>å°†æ—¶é—´åºåˆ—ä»ä¸€ä¸ªé¢‘ç‡è½¬æ¢ä¸ºå¦ä¸€ä¸ªé¢‘ç‡ã€‚</p>
<ul>
<li><strong>é™é‡‡æ ·:</strong> å°†è¾ƒé«˜é¢‘ç‡çš„æ•°æ®èšåˆåˆ°è¾ƒä½é¢‘ç‡ (ä¾‹å¦‚ï¼Œæ¯æ—¥åˆ°æ¯æœˆ)ã€‚</li>
<li><strong>å‡é‡‡æ ·:</strong> å°†è¾ƒä½é¢‘ç‡çš„æ•°æ®è½¬æ¢ä¸ºè¾ƒé«˜é¢‘ç‡ (ä¾‹å¦‚ï¼Œæ¯æ—¥åˆ°æ¯å°æ—¶)ã€‚</li>
</ul>
<p>ä½¿ç”¨ <code>resample()</code> æ–¹æ³•ã€‚å®ƒç±»ä¼¼äº <code>groupby</code>ã€‚</p>
<div id="4beffd7b" class="cell" data-execution_count="53">
<div class="sourceCode cell-code" id="cb103"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb103-1"><a href="#cb103-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np  <span class="co"># å¯¼å…¥ NumPy</span></span>
<span id="cb103-2"><a href="#cb103-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd  <span class="co"># å¯¼å…¥ pandas</span></span>
<span id="cb103-3"><a href="#cb103-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb103-4"><a href="#cb103-4" aria-hidden="true" tabindex="-1"></a>dates <span class="op">=</span> pd.date_range(<span class="st">'1/1/2000'</span>, periods<span class="op">=</span><span class="dv">100</span>, freq<span class="op">=</span><span class="st">'D'</span>)  <span class="co"># åˆ›å»ºä¸€ä¸ªæ—¥æœŸèŒƒå›´ (æ¯æ—¥)</span></span>
<span id="cb103-5"><a href="#cb103-5" aria-hidden="true" tabindex="-1"></a>ts <span class="op">=</span> pd.Series(np.random.randn(<span class="bu">len</span>(dates)), index<span class="op">=</span>dates)  <span class="co"># åˆ›å»ºä¸€ä¸ªæ—¶é—´åºåˆ—</span></span>
<span id="cb103-6"><a href="#cb103-6" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(ts.resample(<span class="st">'M'</span>).mean())  <span class="co"># æ¯æœˆå¹³å‡å€¼ (é™é‡‡æ ·)</span></span>
<span id="cb103-7"><a href="#cb103-7" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(ts.resample(<span class="st">'M'</span>, kind<span class="op">=</span><span class="st">'period'</span>).mean())  <span class="co"># æ¯æœˆå¹³å‡å€¼ (é™é‡‡æ ·ï¼Œä½¿ç”¨å‘¨æœŸ)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>2000-01-31   -0.258972
2000-02-29    0.387736
2000-03-31   -0.116505
2000-04-30    0.097491
Freq: ME, dtype: float64
2000-01   -0.258972
2000-02    0.387736
2000-03   -0.116505
2000-04    0.097491
Freq: M, dtype: float64</code></pre>
</div>
</div>
<section id="resample-æ–¹æ³•å‚æ•°" class="level3">
<h3 class="anchored" data-anchor-id="resample-æ–¹æ³•å‚æ•°">Resample æ–¹æ³•å‚æ•°</h3>
<div class="line-block">å‚æ•° | æè¿° |<br>
: | :â€“ |<br>
<code>rule</code> | å­—ç¬¦ä¸²ã€DateOffset æˆ– timedeltaï¼ŒæŒ‡ç¤ºæ‰€éœ€çš„é‡é‡‡æ ·é¢‘ç‡ (ä¾‹å¦‚ï¼Œâ€˜Mâ€™ã€â€˜5minâ€™ æˆ– Second(15)) |<br>
<code>axis</code> | è¦é‡é‡‡æ ·çš„è½´ï¼›é»˜è®¤ axis=0 |</div>
<p>|<code>fill_method</code>|å‡é‡‡æ ·æ—¶å¦‚ä½•æ’å€¼ï¼Œå¦‚ â€œffillâ€ æˆ– â€œbfillâ€ï¼›é»˜è®¤ä¸æ’å€¼| |<code>closed</code>|åœ¨é™é‡‡æ ·ä¸­ï¼Œæ¯ä¸ªé—´éš”çš„å“ªä¸€ç«¯æ˜¯é—­åˆçš„ (åŒ…å«çš„)ï¼Œâ€œrightâ€ æˆ– â€œleftâ€|</p>
</section>
<section id="resample-æ–¹æ³•å‚æ•°ç»­" class="level3">
<h3 class="anchored" data-anchor-id="resample-æ–¹æ³•å‚æ•°ç»­">Resample æ–¹æ³•å‚æ•°(ç»­)</h3>
<div class="line-block">å‚æ•° | æè¿° |<br>
: | :â€“ |</div>
<p>|<code>label</code>|åœ¨é™é‡‡æ ·ä¸­ï¼Œå¦‚ä½•æ ‡è®°èšåˆç»“æœï¼Œä½¿ç”¨ â€œrightâ€ æˆ– â€œleftâ€ ç®±è¾¹ (ä¾‹å¦‚ï¼Œ9:30 åˆ° 9:35 çš„äº”åˆ†é’Ÿé—´éš”å¯ä»¥æ ‡è®°ä¸º 9:30 æˆ– 9:35)| |<code>limit</code>|å‘å‰æˆ–å‘åå¡«å……æ—¶ï¼Œè¦å¡«å……çš„æœ€å¤§å‘¨æœŸæ•°| |<code>kind</code>|èšåˆåˆ°å‘¨æœŸ (â€œperiodâ€) æˆ–æ—¶é—´æˆ³ (â€œtimestampâ€)ï¼›é»˜è®¤ä¸ºæ—¶é—´åºåˆ—çš„ç´¢å¼•ç±»å‹| |<code>convention</code>|é‡é‡‡æ ·å‘¨æœŸæ—¶ï¼Œå°†ä½é¢‘å‘¨æœŸè½¬æ¢ä¸ºé«˜é¢‘å‘¨æœŸçš„çº¦å®š (â€œstartâ€ æˆ– â€œendâ€)ï¼›é»˜è®¤ä¸º â€œstartâ€| |<code>origin</code>|ç”¨äºç¡®å®šé‡é‡‡æ ·ç®±è¾¹ç¼˜çš„â€œåŸºå‡†â€æ—¶é—´æˆ³ï¼›ä¹Ÿå¯ä»¥æ˜¯â€œepochâ€ã€â€œstartâ€ã€â€œstart_dayâ€ã€â€œendâ€æˆ–â€œend_dayâ€ä¹‹ä¸€ï¼›æœ‰å…³å®Œæ•´è¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚é˜…é‡é‡‡æ ·æ–‡æ¡£å­—ç¬¦ä¸²| |<code>offset</code>|æ·»åŠ åˆ°åŸç‚¹çš„åç§» timedeltaï¼›é»˜è®¤ä¸º None|</p>
</section>
<section id="é™é‡‡æ ·" class="level3">
<h3 class="anchored" data-anchor-id="é™é‡‡æ ·">é™é‡‡æ ·</h3>
<div id="46cfd5a8" class="cell" data-execution_count="54">
<div class="sourceCode cell-code" id="cb105"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb105-1"><a href="#cb105-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np  <span class="co"># å¯¼å…¥ NumPy</span></span>
<span id="cb105-2"><a href="#cb105-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd  <span class="co"># å¯¼å…¥ pandas</span></span>
<span id="cb105-3"><a href="#cb105-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb105-4"><a href="#cb105-4" aria-hidden="true" tabindex="-1"></a>dates <span class="op">=</span> pd.date_range(<span class="st">'1/1/2000'</span>, periods<span class="op">=</span><span class="dv">12</span>, freq<span class="op">=</span><span class="st">'T'</span>)  <span class="co"># åˆ›å»ºä¸€ä¸ªæ—¥æœŸèŒƒå›´ (æ¯åˆ†é’Ÿ)</span></span>
<span id="cb105-5"><a href="#cb105-5" aria-hidden="true" tabindex="-1"></a>ts <span class="op">=</span> pd.Series(np.arange(<span class="dv">12</span>), index<span class="op">=</span>dates)  <span class="co"># åˆ›å»ºä¸€ä¸ªæ—¶é—´åºåˆ—</span></span>
<span id="cb105-6"><a href="#cb105-6" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(ts)  <span class="co"># æ‰“å°åŸå§‹æ—¶é—´åºåˆ—</span></span>
<span id="cb105-7"><a href="#cb105-7" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(ts.resample(<span class="st">'5min'</span>).<span class="bu">sum</span>())  <span class="co"># æ¯ 5 åˆ†é’Ÿæ±‚å’Œ (é™é‡‡æ ·)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>2000-01-01 00:00:00     0
2000-01-01 00:01:00     1
2000-01-01 00:02:00     2
2000-01-01 00:03:00     3
2000-01-01 00:04:00     4
2000-01-01 00:05:00     5
2000-01-01 00:06:00     6
2000-01-01 00:07:00     7
2000-01-01 00:08:00     8
2000-01-01 00:09:00     9
2000-01-01 00:10:00    10
2000-01-01 00:11:00    11
Freq: min, dtype: int64
2000-01-01 00:00:00    10
2000-01-01 00:05:00    35
2000-01-01 00:10:00    21
Freq: 5min, dtype: int64</code></pre>
</div>
</div>
</section>
</section>
<section id="é™é‡‡æ ·ç»­" class="level2">
<h2 class="anchored" data-anchor-id="é™é‡‡æ ·ç»­">é™é‡‡æ ·(ç»­)</h2>
<div id="70fa70f0" class="cell" data-execution_count="55">
<div class="sourceCode cell-code" id="cb107"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb107-1"><a href="#cb107-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np  <span class="co"># å¯¼å…¥ NumPy</span></span>
<span id="cb107-2"><a href="#cb107-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd  <span class="co"># å¯¼å…¥ pandas</span></span>
<span id="cb107-3"><a href="#cb107-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb107-4"><a href="#cb107-4" aria-hidden="true" tabindex="-1"></a>dates <span class="op">=</span> pd.date_range(<span class="st">'1/1/2000'</span>, periods<span class="op">=</span><span class="dv">12</span>, freq<span class="op">=</span><span class="st">'T'</span>)  <span class="co"># åˆ›å»ºä¸€ä¸ªæ—¥æœŸèŒƒå›´ (æ¯åˆ†é’Ÿ)</span></span>
<span id="cb107-5"><a href="#cb107-5" aria-hidden="true" tabindex="-1"></a>ts <span class="op">=</span> pd.Series(np.arange(<span class="dv">12</span>), index<span class="op">=</span>dates)  <span class="co"># åˆ›å»ºä¸€ä¸ªæ—¶é—´åºåˆ—</span></span>
<span id="cb107-6"><a href="#cb107-6" aria-hidden="true" tabindex="-1"></a><span class="co"># closed='right', label='left'</span></span>
<span id="cb107-7"><a href="#cb107-7" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(ts.resample(<span class="st">'5min'</span>, closed<span class="op">=</span><span class="st">'right'</span>).<span class="bu">sum</span>())  <span class="co"># æ¯ 5 åˆ†é’Ÿæ±‚å’Œ (å³é—­åˆï¼Œå·¦æ ‡ç­¾)</span></span>
<span id="cb107-8"><a href="#cb107-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb107-9"><a href="#cb107-9" aria-hidden="true" tabindex="-1"></a><span class="co"># closed='right', label='right'</span></span>
<span id="cb107-10"><a href="#cb107-10" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(ts.resample(<span class="st">'5min'</span>, closed<span class="op">=</span><span class="st">'right'</span>, label<span class="op">=</span><span class="st">'right'</span>).<span class="bu">sum</span>())  <span class="co"># æ¯ 5 åˆ†é’Ÿæ±‚å’Œ (å³é—­åˆï¼Œå³æ ‡ç­¾)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>1999-12-31 23:55:00     0
2000-01-01 00:00:00    15
2000-01-01 00:05:00    40
2000-01-01 00:10:00    11
Freq: 5min, dtype: int64
2000-01-01 00:00:00     0
2000-01-01 00:05:00    15
2000-01-01 00:10:00    40
2000-01-01 00:15:00    11
Freq: 5min, dtype: int64</code></pre>
</div>
</div>
</section>
<section id="é™é‡‡æ ·ç»­-1" class="level2">
<h2 class="anchored" data-anchor-id="é™é‡‡æ ·ç»­-1">é™é‡‡æ ·(ç»­)</h2>
<div id="27bfbc4c" class="cell" data-execution_count="56">
<div class="sourceCode cell-code" id="cb109"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb109-1"><a href="#cb109-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np  <span class="co"># å¯¼å…¥ NumPy</span></span>
<span id="cb109-2"><a href="#cb109-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd  <span class="co"># å¯¼å…¥ pandas</span></span>
<span id="cb109-3"><a href="#cb109-3" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> pandas.tseries.frequencies <span class="im">import</span> to_offset</span>
<span id="cb109-4"><a href="#cb109-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb109-5"><a href="#cb109-5" aria-hidden="true" tabindex="-1"></a>dates <span class="op">=</span> pd.date_range(<span class="st">'1/1/2000'</span>, periods<span class="op">=</span><span class="dv">12</span>, freq<span class="op">=</span><span class="st">'T'</span>)  <span class="co"># åˆ›å»ºä¸€ä¸ªæ—¥æœŸèŒƒå›´ (æ¯åˆ†é’Ÿ)</span></span>
<span id="cb109-6"><a href="#cb109-6" aria-hidden="true" tabindex="-1"></a>ts <span class="op">=</span> pd.Series(np.arange(<span class="dv">12</span>), index<span class="op">=</span>dates)  <span class="co"># åˆ›å»ºä¸€ä¸ªæ—¶é—´åºåˆ—</span></span>
<span id="cb109-7"><a href="#cb109-7" aria-hidden="true" tabindex="-1"></a><span class="co"># ç§»åŠ¨ç»“æœç´¢å¼•</span></span>
<span id="cb109-8"><a href="#cb109-8" aria-hidden="true" tabindex="-1"></a>result <span class="op">=</span> ts.resample(<span class="st">'5min'</span>, closed<span class="op">=</span><span class="st">'right'</span>, label<span class="op">=</span><span class="st">'right'</span>).<span class="bu">sum</span>()  <span class="co"># æ¯ 5 åˆ†é’Ÿæ±‚å’Œ (å³é—­åˆï¼Œå³æ ‡ç­¾)</span></span>
<span id="cb109-9"><a href="#cb109-9" aria-hidden="true" tabindex="-1"></a>result.index <span class="op">=</span> result.index <span class="op">+</span> to_offset(<span class="st">"-1s"</span>)   <span class="co"># å°†ç´¢å¼•å‡å» 1 ç§’</span></span>
<span id="cb109-10"><a href="#cb109-10" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(result)  <span class="co"># æ‰“å°ä¿®æ”¹åçš„æ—¶é—´åºåˆ—</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>1999-12-31 23:59:59     0
2000-01-01 00:04:59    15
2000-01-01 00:09:59    40
2000-01-01 00:14:59    11
Freq: 5min, dtype: int64</code></pre>
</div>
</div>
<section id="å¼€ç›˜-æœ€é«˜-æœ€ä½-æ”¶ç›˜-ohlc-é‡é‡‡æ ·" class="level4">
<h4 class="anchored" data-anchor-id="å¼€ç›˜-æœ€é«˜-æœ€ä½-æ”¶ç›˜-ohlc-é‡é‡‡æ ·">å¼€ç›˜-æœ€é«˜-æœ€ä½-æ”¶ç›˜ (OHLC) é‡é‡‡æ ·</h4>
<p>é‡‘èæ•°æ®é‡é‡‡æ ·</p>
<div id="d326339f" class="cell" data-execution_count="57">
<div class="sourceCode cell-code" id="cb111"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb111-1"><a href="#cb111-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np  <span class="co"># å¯¼å…¥ NumPy</span></span>
<span id="cb111-2"><a href="#cb111-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd  <span class="co"># å¯¼å…¥ pandas</span></span>
<span id="cb111-3"><a href="#cb111-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb111-4"><a href="#cb111-4" aria-hidden="true" tabindex="-1"></a>dates <span class="op">=</span> pd.date_range(<span class="st">'1/1/2000'</span>, periods<span class="op">=</span><span class="dv">12</span>, freq<span class="op">=</span><span class="st">'T'</span>)  <span class="co"># åˆ›å»ºä¸€ä¸ªæ—¥æœŸèŒƒå›´ (æ¯åˆ†é’Ÿ)</span></span>
<span id="cb111-5"><a href="#cb111-5" aria-hidden="true" tabindex="-1"></a>ts <span class="op">=</span> pd.Series(np.arange(<span class="dv">12</span>), index<span class="op">=</span>dates)  <span class="co"># åˆ›å»ºä¸€ä¸ªæ—¶é—´åºåˆ—</span></span>
<span id="cb111-6"><a href="#cb111-6" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(ts.resample(<span class="st">'5min'</span>).ohlc())  <span class="co"># æ¯ 5 åˆ†é’Ÿçš„ OHLC (å¼€ç›˜ã€æœ€é«˜ã€æœ€ä½ã€æ”¶ç›˜)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                     open  high  low  close
2000-01-01 00:00:00     0     4    0      4
2000-01-01 00:05:00     5     9    5      9
2000-01-01 00:10:00    10    11   10     11</code></pre>
</div>
</div>
</section>
<section id="å‡é‡‡æ ·å’Œæ’å€¼" class="level3">
<h3 class="anchored" data-anchor-id="å‡é‡‡æ ·å’Œæ’å€¼">å‡é‡‡æ ·å’Œæ’å€¼</h3>
<div id="783afaaf" class="cell" data-execution_count="58">
<div class="sourceCode cell-code" id="cb113"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb113-1"><a href="#cb113-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np  <span class="co"># å¯¼å…¥ NumPy</span></span>
<span id="cb113-2"><a href="#cb113-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd  <span class="co"># å¯¼å…¥ pandas</span></span>
<span id="cb113-3"><a href="#cb113-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-4"><a href="#cb113-4" aria-hidden="true" tabindex="-1"></a>frame <span class="op">=</span> pd.DataFrame(np.random.randn(<span class="dv">2</span>, <span class="dv">4</span>),</span>
<span id="cb113-5"><a href="#cb113-5" aria-hidden="true" tabindex="-1"></a>                    index<span class="op">=</span>pd.date_range(<span class="st">'1/1/2000'</span>, periods<span class="op">=</span><span class="dv">2</span>, freq<span class="op">=</span><span class="st">'W-WED'</span>),  <span class="co"># æ¯å‘¨ä¸‰</span></span>
<span id="cb113-6"><a href="#cb113-6" aria-hidden="true" tabindex="-1"></a>                    columns<span class="op">=</span>[<span class="st">'Colorado'</span>, <span class="st">'Texas'</span>, <span class="st">'New York'</span>, <span class="st">'Ohio'</span>])  <span class="co"># åˆ›å»ºä¸€ä¸ª DataFrame</span></span>
<span id="cb113-7"><a href="#cb113-7" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(frame)  <span class="co"># æ‰“å° DataFrame</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>            Colorado     Texas  New York      Ohio
2000-01-05 -1.163635  0.984639  0.453824 -1.478240
2000-01-12 -0.847976 -0.770445 -0.731393 -0.645453</code></pre>
</div>
</div>
</section>
</section>
<section id="å‡é‡‡æ ·å’Œæ’å€¼ç»­" class="level2">
<h2 class="anchored" data-anchor-id="å‡é‡‡æ ·å’Œæ’å€¼ç»­">å‡é‡‡æ ·å’Œæ’å€¼(ç»­)</h2>
<div id="281025bb" class="cell" data-execution_count="59">
<div class="sourceCode cell-code" id="cb115"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb115-1"><a href="#cb115-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np  <span class="co"># å¯¼å…¥ NumPy</span></span>
<span id="cb115-2"><a href="#cb115-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd  <span class="co"># å¯¼å…¥ pandas</span></span>
<span id="cb115-3"><a href="#cb115-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-4"><a href="#cb115-4" aria-hidden="true" tabindex="-1"></a>frame <span class="op">=</span> pd.DataFrame(np.random.randn(<span class="dv">2</span>, <span class="dv">4</span>),</span>
<span id="cb115-5"><a href="#cb115-5" aria-hidden="true" tabindex="-1"></a>                    index<span class="op">=</span>pd.date_range(<span class="st">'1/1/2000'</span>, periods<span class="op">=</span><span class="dv">2</span>, freq<span class="op">=</span><span class="st">'W-WED'</span>),  <span class="co"># æ¯å‘¨ä¸‰</span></span>
<span id="cb115-6"><a href="#cb115-6" aria-hidden="true" tabindex="-1"></a>                    columns<span class="op">=</span>[<span class="st">'Colorado'</span>, <span class="st">'Texas'</span>, <span class="st">'New York'</span>, <span class="st">'Ohio'</span>])  <span class="co"># åˆ›å»ºä¸€ä¸ª DataFrame</span></span>
<span id="cb115-7"><a href="#cb115-7" aria-hidden="true" tabindex="-1"></a>df_daily <span class="op">=</span> frame.resample(<span class="st">'D'</span>).asfreq()  <span class="co"># å‡é‡‡æ ·åˆ°æ¯æ—¥ (ç”¨ NaN å¡«å……)</span></span>
<span id="cb115-8"><a href="#cb115-8" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(df_daily)  <span class="co"># æ‰“å°å‡é‡‡æ ·åçš„ DataFrame</span></span>
<span id="cb115-9"><a href="#cb115-9" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(frame.resample(<span class="st">'D'</span>).ffill())  <span class="co"># å‡é‡‡æ ·åˆ°æ¯æ—¥ (å‘å‰å¡«å……)</span></span>
<span id="cb115-10"><a href="#cb115-10" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(frame.resample(<span class="st">'D'</span>).ffill(limit<span class="op">=</span><span class="dv">2</span>))  <span class="co"># å‡é‡‡æ ·åˆ°æ¯æ—¥ (å‘å‰å¡«å……ï¼Œé™åˆ¶ä¸º 2 ä¸ªå‘¨æœŸ)</span></span>
<span id="cb115-11"><a href="#cb115-11" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(frame.resample(<span class="st">'W-THU'</span>).ffill())   <span class="co"># å‡é‡‡æ ·åˆ°æ¯å‘¨å›› (å‘å‰å¡«å……)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>            Colorado     Texas  New York      Ohio
2000-01-05  1.267983 -0.557187 -0.937678  0.403461
2000-01-06       NaN       NaN       NaN       NaN
2000-01-07       NaN       NaN       NaN       NaN
2000-01-08       NaN       NaN       NaN       NaN
2000-01-09       NaN       NaN       NaN       NaN
2000-01-10       NaN       NaN       NaN       NaN
2000-01-11       NaN       NaN       NaN       NaN
2000-01-12  0.128901 -0.086334 -0.973667  0.845069
            Colorado     Texas  New York      Ohio
2000-01-05  1.267983 -0.557187 -0.937678  0.403461
2000-01-06  1.267983 -0.557187 -0.937678  0.403461
2000-01-07  1.267983 -0.557187 -0.937678  0.403461
2000-01-08  1.267983 -0.557187 -0.937678  0.403461
2000-01-09  1.267983 -0.557187 -0.937678  0.403461
2000-01-10  1.267983 -0.557187 -0.937678  0.403461
2000-01-11  1.267983 -0.557187 -0.937678  0.403461
2000-01-12  0.128901 -0.086334 -0.973667  0.845069
            Colorado     Texas  New York      Ohio
2000-01-05  1.267983 -0.557187 -0.937678  0.403461
2000-01-06  1.267983 -0.557187 -0.937678  0.403461
2000-01-07  1.267983 -0.557187 -0.937678  0.403461
2000-01-08       NaN       NaN       NaN       NaN
2000-01-09       NaN       NaN       NaN       NaN
2000-01-10       NaN       NaN       NaN       NaN
2000-01-11       NaN       NaN       NaN       NaN
2000-01-12  0.128901 -0.086334 -0.973667  0.845069
            Colorado     Texas  New York      Ohio
2000-01-06  1.267983 -0.557187 -0.937678  0.403461
2000-01-13  0.128901 -0.086334 -0.973667  0.845069</code></pre>
</div>
</div>
<section id="ä½¿ç”¨å‘¨æœŸè¿›è¡Œé‡é‡‡æ ·" class="level3">
<h3 class="anchored" data-anchor-id="ä½¿ç”¨å‘¨æœŸè¿›è¡Œé‡é‡‡æ ·">ä½¿ç”¨å‘¨æœŸè¿›è¡Œé‡é‡‡æ ·</h3>
<p>é‡é‡‡æ ·ä»¥å‘¨æœŸä¸ºç´¢å¼•çš„æ•°æ®ç±»ä¼¼ï¼š</p>
<div id="5ef2e421" class="cell" data-execution_count="60">
<div class="sourceCode cell-code" id="cb117"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb117-1"><a href="#cb117-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np  <span class="co"># å¯¼å…¥ NumPy</span></span>
<span id="cb117-2"><a href="#cb117-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd  <span class="co"># å¯¼å…¥ pandas</span></span>
<span id="cb117-3"><a href="#cb117-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-4"><a href="#cb117-4" aria-hidden="true" tabindex="-1"></a>frame <span class="op">=</span> pd.DataFrame(np.random.randn(<span class="dv">24</span>, <span class="dv">4</span>),</span>
<span id="cb117-5"><a href="#cb117-5" aria-hidden="true" tabindex="-1"></a>                     index<span class="op">=</span>pd.period_range(<span class="st">'1-2000'</span>, <span class="st">'12-2001'</span>, freq<span class="op">=</span><span class="st">'M'</span>),  <span class="co"># æ¯æœˆå‘¨æœŸ</span></span>
<span id="cb117-6"><a href="#cb117-6" aria-hidden="true" tabindex="-1"></a>                     columns<span class="op">=</span>[<span class="st">'Colorado'</span>, <span class="st">'Texas'</span>, <span class="st">'New York'</span>, <span class="st">'Ohio'</span>])  <span class="co"># åˆ›å»ºä¸€ä¸ª DataFrame</span></span>
<span id="cb117-7"><a href="#cb117-7" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(frame.head())  <span class="co"># æ‰“å° DataFrame çš„å‰å‡ è¡Œ</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>         Colorado     Texas  New York      Ohio
2000-01 -0.368723 -0.765435 -1.499382  0.768872
2000-02 -0.817508  0.088998  0.146404 -0.688862
2000-03  0.857336 -0.316786 -0.001938  0.457846
2000-04  0.693818  1.206817  0.934642  2.477505
2000-05 -0.453236  0.591688  0.450695  0.297406</code></pre>
</div>
</div>
</section>
</section>
<section id="ä½¿ç”¨å‘¨æœŸè¿›è¡Œé‡é‡‡æ ·ç»­" class="level2">
<h2 class="anchored" data-anchor-id="ä½¿ç”¨å‘¨æœŸè¿›è¡Œé‡é‡‡æ ·ç»­">ä½¿ç”¨å‘¨æœŸè¿›è¡Œé‡é‡‡æ ·(ç»­)</h2>
<div id="3dcff5d5" class="cell" data-execution_count="61">
<div class="sourceCode cell-code" id="cb119"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb119-1"><a href="#cb119-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np  <span class="co"># å¯¼å…¥ NumPy</span></span>
<span id="cb119-2"><a href="#cb119-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd  <span class="co"># å¯¼å…¥ pandas</span></span>
<span id="cb119-3"><a href="#cb119-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb119-4"><a href="#cb119-4" aria-hidden="true" tabindex="-1"></a>frame <span class="op">=</span> pd.DataFrame(np.random.randn(<span class="dv">24</span>, <span class="dv">4</span>),</span>
<span id="cb119-5"><a href="#cb119-5" aria-hidden="true" tabindex="-1"></a>                     index<span class="op">=</span>pd.period_range(<span class="st">'1-2000'</span>, <span class="st">'12-2001'</span>, freq<span class="op">=</span><span class="st">'M'</span>),  <span class="co"># æ¯æœˆå‘¨æœŸ</span></span>
<span id="cb119-6"><a href="#cb119-6" aria-hidden="true" tabindex="-1"></a>                     columns<span class="op">=</span>[<span class="st">'Colorado'</span>, <span class="st">'Texas'</span>, <span class="st">'New York'</span>, <span class="st">'Ohio'</span>])  <span class="co"># åˆ›å»ºä¸€ä¸ª DataFrame</span></span>
<span id="cb119-7"><a href="#cb119-7" aria-hidden="true" tabindex="-1"></a>annual_frame <span class="op">=</span> frame.resample(<span class="st">'A-DEC'</span>).mean()  <span class="co"># é™é‡‡æ ·åˆ°å¹´åº¦ (ä»¥ 12 æœˆç»“æŸ)</span></span>
<span id="cb119-8"><a href="#cb119-8" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(annual_frame)  <span class="co"># æ‰“å°é™é‡‡æ ·åçš„ DataFrame</span></span>
<span id="cb119-9"><a href="#cb119-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb119-10"><a href="#cb119-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Q-DEC: å­£åº¦ï¼Œå¹´ä»½ä»¥ 12 æœˆç»“æŸ</span></span>
<span id="cb119-11"><a href="#cb119-11" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(annual_frame.resample(<span class="st">'Q-DEC'</span>, convention<span class="op">=</span><span class="st">'end'</span>).asfreq())  <span class="co"># é™é‡‡æ ·åˆ°å­£åº¦ (å¹´åº•ï¼Œè½¬æ¢ä¸ºé¢‘ç‡)</span></span>
<span id="cb119-12"><a href="#cb119-12" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(annual_frame.resample(<span class="st">'Q-MAR'</span>).ffill())  <span class="co"># é™é‡‡æ ·åˆ°å­£åº¦(ä»¥ä¸‰æœˆç»“å°¾ï¼Œå¹¶å‘å‰å¡«å……)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>      Colorado     Texas  New York      Ohio
2000  0.031645  0.057826  0.035487  0.240862
2001  0.277345  0.033634  0.158828  0.381369
        Colorado     Texas  New York      Ohio
2000Q4  0.031645  0.057826  0.035487  0.240862
2001Q1       NaN       NaN       NaN       NaN
2001Q2       NaN       NaN       NaN       NaN
2001Q3       NaN       NaN       NaN       NaN
2001Q4  0.277345  0.033634  0.158828  0.381369
        Colorado     Texas  New York      Ohio
2000Q4  0.031645  0.057826  0.035487  0.240862
2001Q1  0.031645  0.057826  0.035487  0.240862
2001Q2  0.031645  0.057826  0.035487  0.240862
2001Q3  0.031645  0.057826  0.035487  0.240862
2001Q4  0.277345  0.033634  0.158828  0.381369
2002Q1  0.277345  0.033634  0.158828  0.381369
2002Q2  0.277345  0.033634  0.158828  0.381369
2002Q3  0.277345  0.033634  0.158828  0.381369</code></pre>
</div>
</div>
</section>
<section id="åˆ†ç»„æ—¶é—´é‡é‡‡æ ·" class="level2">
<h2 class="anchored" data-anchor-id="åˆ†ç»„æ—¶é—´é‡é‡‡æ ·">åˆ†ç»„æ—¶é—´é‡é‡‡æ ·</h2>
<div id="f72cbf0c" class="cell" data-execution_count="62">
<div class="sourceCode cell-code" id="cb121"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb121-1"><a href="#cb121-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np  <span class="co"># å¯¼å…¥ NumPy</span></span>
<span id="cb121-2"><a href="#cb121-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd  <span class="co"># å¯¼å…¥ pandas</span></span>
<span id="cb121-3"><a href="#cb121-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb121-4"><a href="#cb121-4" aria-hidden="true" tabindex="-1"></a>N <span class="op">=</span> <span class="dv">15</span>  <span class="co"># å®šä¹‰æ—¶é—´åºåˆ—çš„é•¿åº¦</span></span>
<span id="cb121-5"><a href="#cb121-5" aria-hidden="true" tabindex="-1"></a>times <span class="op">=</span> pd.date_range(<span class="st">'2017-05-20 00:00'</span>, freq<span class="op">=</span><span class="st">'1min'</span>, periods<span class="op">=</span>N)  <span class="co"># åˆ›å»ºä¸€ä¸ªæ—¶é—´èŒƒå›´ (æ¯åˆ†é’Ÿ)</span></span>
<span id="cb121-6"><a href="#cb121-6" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> pd.DataFrame({<span class="st">'time'</span>: times, <span class="st">'value'</span>: np.arange(N)})  <span class="co"># åˆ›å»ºä¸€ä¸ª DataFrame</span></span>
<span id="cb121-7"><a href="#cb121-7" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(df)  <span class="co"># æ‰“å° DataFrame</span></span>
<span id="cb121-8"><a href="#cb121-8" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(df.set_index(<span class="st">'time'</span>).resample(<span class="st">'5min'</span>).count())  <span class="co"># æŒ‰æ—¶é—´åˆ†ç»„ï¼Œæ¯ 5 åˆ†é’Ÿè®¡æ•°</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                  time  value
0  2017-05-20 00:00:00      0
1  2017-05-20 00:01:00      1
2  2017-05-20 00:02:00      2
3  2017-05-20 00:03:00      3
4  2017-05-20 00:04:00      4
5  2017-05-20 00:05:00      5
6  2017-05-20 00:06:00      6
7  2017-05-20 00:07:00      7
8  2017-05-20 00:08:00      8
9  2017-05-20 00:09:00      9
10 2017-05-20 00:10:00     10
11 2017-05-20 00:11:00     11
12 2017-05-20 00:12:00     12
13 2017-05-20 00:13:00     13
14 2017-05-20 00:14:00     14
                     value
time                      
2017-05-20 00:00:00      5
2017-05-20 00:05:00      5
2017-05-20 00:10:00      5</code></pre>
</div>
</div>
</section>
<section id="åˆ†ç»„æ—¶é—´é‡é‡‡æ ·ç»­" class="level2">
<h2 class="anchored" data-anchor-id="åˆ†ç»„æ—¶é—´é‡é‡‡æ ·ç»­">åˆ†ç»„æ—¶é—´é‡é‡‡æ ·(ç»­)</h2>
<div id="95f82f0d" class="cell" data-execution_count="63">
<div class="sourceCode cell-code" id="cb123"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb123-1"><a href="#cb123-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np  <span class="co"># å¯¼å…¥ NumPy</span></span>
<span id="cb123-2"><a href="#cb123-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd  <span class="co"># å¯¼å…¥ pandas</span></span>
<span id="cb123-3"><a href="#cb123-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb123-4"><a href="#cb123-4" aria-hidden="true" tabindex="-1"></a>N <span class="op">=</span> <span class="dv">15</span></span>
<span id="cb123-5"><a href="#cb123-5" aria-hidden="true" tabindex="-1"></a>times <span class="op">=</span> pd.date_range(<span class="st">'2017-05-20 00:00'</span>, freq<span class="op">=</span><span class="st">'1min'</span>, periods<span class="op">=</span>N)  <span class="co"># åˆ›å»ºä¸€ä¸ªæ—¥æœŸèŒƒå›´ (æ¯åˆ†é’Ÿ)</span></span>
<span id="cb123-6"><a href="#cb123-6" aria-hidden="true" tabindex="-1"></a>df2 <span class="op">=</span> pd.DataFrame({<span class="st">'time'</span>: times.repeat(<span class="dv">3</span>),  <span class="co"># time åˆ—é‡å¤ 3 æ¬¡</span></span>
<span id="cb123-7"><a href="#cb123-7" aria-hidden="true" tabindex="-1"></a>                    <span class="st">'key'</span>: np.tile([<span class="st">'a'</span>, <span class="st">'b'</span>, <span class="st">'c'</span>], N),  <span class="co"># åˆ›å»º key åˆ— (a, b, c é‡å¤)</span></span>
<span id="cb123-8"><a href="#cb123-8" aria-hidden="true" tabindex="-1"></a>                    <span class="st">'value'</span>: np.arange(N <span class="op">*</span> <span class="fl">3.</span>)})  <span class="co"># åˆ›å»º value åˆ—</span></span>
<span id="cb123-9"><a href="#cb123-9" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(df2.head(<span class="dv">7</span>))  <span class="co"># æ‰“å° DataFrame çš„å‰å‡ è¡Œ</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                 time key  value
0 2017-05-20 00:00:00   a    0.0
1 2017-05-20 00:00:00   b    1.0
2 2017-05-20 00:00:00   c    2.0
3 2017-05-20 00:01:00   a    3.0
4 2017-05-20 00:01:00   b    4.0
5 2017-05-20 00:01:00   c    5.0
6 2017-05-20 00:02:00   a    6.0</code></pre>
</div>
</div>
</section>
<section id="åˆ†ç»„æ—¶é—´é‡é‡‡æ ·ç»­-1" class="level2">
<h2 class="anchored" data-anchor-id="åˆ†ç»„æ—¶é—´é‡é‡‡æ ·ç»­-1">åˆ†ç»„æ—¶é—´é‡é‡‡æ ·(ç»­)</h2>
<div id="2e34eecf" class="cell" data-execution_count="64">
<div class="sourceCode cell-code" id="cb125"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb125-1"><a href="#cb125-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np  <span class="co"># å¯¼å…¥ NumPy</span></span>
<span id="cb125-2"><a href="#cb125-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd  <span class="co"># å¯¼å…¥ pandas</span></span>
<span id="cb125-3"><a href="#cb125-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb125-4"><a href="#cb125-4" aria-hidden="true" tabindex="-1"></a>N <span class="op">=</span> <span class="dv">15</span></span>
<span id="cb125-5"><a href="#cb125-5" aria-hidden="true" tabindex="-1"></a>times <span class="op">=</span> pd.date_range(<span class="st">'2017-05-20 00:00'</span>, freq<span class="op">=</span><span class="st">'1min'</span>, periods<span class="op">=</span>N)  <span class="co"># åˆ›å»ºä¸€ä¸ªæ—¥æœŸèŒƒå›´ (æ¯åˆ†é’Ÿ)</span></span>
<span id="cb125-6"><a href="#cb125-6" aria-hidden="true" tabindex="-1"></a>df2 <span class="op">=</span> pd.DataFrame({<span class="st">'time'</span>: times.repeat(<span class="dv">3</span>),</span>
<span id="cb125-7"><a href="#cb125-7" aria-hidden="true" tabindex="-1"></a>                    <span class="st">'key'</span>: np.tile([<span class="st">'a'</span>, <span class="st">'b'</span>, <span class="st">'c'</span>], N),</span>
<span id="cb125-8"><a href="#cb125-8" aria-hidden="true" tabindex="-1"></a>                    <span class="st">'value'</span>: np.arange(N <span class="op">*</span> <span class="fl">3.</span>)})  <span class="co"># åˆ›å»º DataFrame</span></span>
<span id="cb125-9"><a href="#cb125-9" aria-hidden="true" tabindex="-1"></a>time_key <span class="op">=</span> pd.Grouper(freq<span class="op">=</span><span class="st">'5min'</span>)  <span class="co"># åˆ›å»ºä¸€ä¸ªæ—¶é—´åˆ†ç»„å™¨ (æ¯ 5 åˆ†é’Ÿ)</span></span>
<span id="cb125-10"><a href="#cb125-10" aria-hidden="true" tabindex="-1"></a>resampled <span class="op">=</span> (df2.set_index(<span class="st">'time'</span>)  <span class="co"># è®¾ç½® time åˆ—ä¸ºç´¢å¼•</span></span>
<span id="cb125-11"><a href="#cb125-11" aria-hidden="true" tabindex="-1"></a>             .groupby([<span class="st">'key'</span>, time_key])  <span class="co"># æŒ‰ key å’Œ time_key åˆ†ç»„</span></span>
<span id="cb125-12"><a href="#cb125-12" aria-hidden="true" tabindex="-1"></a>             .<span class="bu">sum</span>())  <span class="co"># æ±‚å’Œ</span></span>
<span id="cb125-13"><a href="#cb125-13" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(resampled)  <span class="co"># æ‰“å°é‡é‡‡æ ·åçš„ DataFrame</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                         value
key time                      
a   2017-05-20 00:00:00   30.0
    2017-05-20 00:05:00  105.0
    2017-05-20 00:10:00  180.0
b   2017-05-20 00:00:00   35.0
    2017-05-20 00:05:00  110.0
    2017-05-20 00:10:00  185.0
c   2017-05-20 00:00:00   40.0
    2017-05-20 00:05:00  115.0
    2017-05-20 00:10:00  190.0</code></pre>
</div>
</div>
</section>
<section id="ç§»åŠ¨çª—å£å‡½æ•°" class="level2">
<h2 class="anchored" data-anchor-id="ç§»åŠ¨çª—å£å‡½æ•°">ç§»åŠ¨çª—å£å‡½æ•°</h2>
<p><em>ç§»åŠ¨çª—å£å‡½æ•°</em> (ä¹Ÿç§°ä¸º<em>æ»šåŠ¨çª—å£å‡½æ•°</em>) å¯¹æ•°æ®çš„æ»‘åŠ¨çª—å£è¿›è¡Œæ“ä½œã€‚å®ƒä»¬é€šå¸¸ç”¨äºå¹³æ»‘å˜ˆæ‚çš„æ—¶é—´åºåˆ—ã€‚</p>
<div id="b018a6e1" class="cell" data-execution_count="65">
<div class="sourceCode cell-code" id="cb127"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb127-1"><a href="#cb127-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np   <span class="co"># å¯¼å…¥ NumPy</span></span>
<span id="cb127-2"><a href="#cb127-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd  <span class="co"># å¯¼å…¥ pandas</span></span>
<span id="cb127-3"><a href="#cb127-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb127-4"><a href="#cb127-4" aria-hidden="true" tabindex="-1"></a>close_px_all <span class="op">=</span> pd.read_csv(<span class="st">'examples/stock_px.csv'</span>,parse_dates<span class="op">=</span><span class="va">True</span>, index_col<span class="op">=</span><span class="dv">0</span>)  <span class="co"># è¯»å– CSV æ–‡ä»¶ï¼Œè§£ææ—¥æœŸï¼Œè®¾ç½®ç¬¬ä¸€åˆ—ä¸ºç´¢å¼•</span></span>
<span id="cb127-5"><a href="#cb127-5" aria-hidden="true" tabindex="-1"></a>close_px <span class="op">=</span> close_px_all[[<span class="st">'AAPL'</span>, <span class="st">'MSFT'</span>, <span class="st">'XOM'</span>]]  <span class="co"># é€‰æ‹© AAPL, MSFT, XOM åˆ—</span></span>
<span id="cb127-6"><a href="#cb127-6" aria-hidden="true" tabindex="-1"></a>close_px <span class="op">=</span> close_px.resample(<span class="st">'B'</span>).ffill()  <span class="co"># æŒ‰å·¥ä½œæ—¥é‡é‡‡æ · (å‘å‰å¡«å……)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="ç§»åŠ¨çª—å£å‡½æ•°ç»­" class="level2">
<h2 class="anchored" data-anchor-id="ç§»åŠ¨çª—å£å‡½æ•°ç»­">ç§»åŠ¨çª—å£å‡½æ•°(ç»­)</h2>
<div id="a6402d27" class="cell" data-execution_count="66">
<div class="sourceCode cell-code" id="cb128"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb128-1"><a href="#cb128-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt <span class="co">#å¯¼å…¥ç»˜å›¾æ¨¡å—</span></span>
<span id="cb128-2"><a href="#cb128-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd  <span class="co"># å¯¼å…¥ pandas</span></span>
<span id="cb128-3"><a href="#cb128-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb128-4"><a href="#cb128-4" aria-hidden="true" tabindex="-1"></a>close_px_all <span class="op">=</span> pd.read_csv(<span class="st">'examples/stock_px.csv'</span>,parse_dates<span class="op">=</span><span class="va">True</span>, index_col<span class="op">=</span><span class="dv">0</span>)  <span class="co"># è¯»å– CSV æ–‡ä»¶ï¼Œè§£ææ—¥æœŸï¼Œè®¾ç½®ç¬¬ä¸€åˆ—ä¸ºç´¢å¼•</span></span>
<span id="cb128-5"><a href="#cb128-5" aria-hidden="true" tabindex="-1"></a>close_px <span class="op">=</span> close_px_all[[<span class="st">'AAPL'</span>, <span class="st">'MSFT'</span>, <span class="st">'XOM'</span>]]  <span class="co"># é€‰æ‹© AAPL, MSFT, XOM åˆ—</span></span>
<span id="cb128-6"><a href="#cb128-6" aria-hidden="true" tabindex="-1"></a>close_px <span class="op">=</span> close_px.resample(<span class="st">'B'</span>).ffill()  <span class="co"># æŒ‰å·¥ä½œæ—¥é‡é‡‡æ · (å‘å‰å¡«å……)</span></span>
<span id="cb128-7"><a href="#cb128-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb128-8"><a href="#cb128-8" aria-hidden="true" tabindex="-1"></a>close_px[<span class="st">'AAPL'</span>].plot()  <span class="co"># ç»˜åˆ¶ AAPL çš„æ”¶ç›˜ä»·</span></span>
<span id="cb128-9"><a href="#cb128-9" aria-hidden="true" tabindex="-1"></a>close_px[<span class="st">'AAPL'</span>].rolling(<span class="dv">250</span>).mean().plot()  <span class="co"># ç»˜åˆ¶ AAPL çš„ 250 å¤©ç§»åŠ¨å¹³å‡çº¿</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="pandas3ed11cn_files/figure-html/cell-67-output-1.png" width="575" height="411" class="figure-img"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="ç§»åŠ¨çª—å£å‡½æ•°ç»­-1" class="level2">
<h2 class="anchored" data-anchor-id="ç§»åŠ¨çª—å£å‡½æ•°ç»­-1">ç§»åŠ¨çª—å£å‡½æ•°(ç»­)</h2>
<div id="42c9eb07" class="cell" data-execution_count="67">
<div class="sourceCode cell-code" id="cb129"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb129-1"><a href="#cb129-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np  <span class="co"># å¯¼å…¥ NumPy</span></span>
<span id="cb129-2"><a href="#cb129-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd  <span class="co"># å¯¼å…¥ pandas</span></span>
<span id="cb129-3"><a href="#cb129-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt <span class="co">#å¯¼å…¥ç»˜å›¾æ¨¡å—</span></span>
<span id="cb129-4"><a href="#cb129-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-5"><a href="#cb129-5" aria-hidden="true" tabindex="-1"></a>close_px_all <span class="op">=</span> pd.read_csv(<span class="st">'examples/stock_px.csv'</span>,parse_dates<span class="op">=</span><span class="va">True</span>, index_col<span class="op">=</span><span class="dv">0</span>)  <span class="co"># è¯»å– CSV æ–‡ä»¶ï¼Œè§£ææ—¥æœŸï¼Œè®¾ç½®ç¬¬ä¸€åˆ—ä¸ºç´¢å¼•</span></span>
<span id="cb129-6"><a href="#cb129-6" aria-hidden="true" tabindex="-1"></a>close_px <span class="op">=</span> close_px_all[[<span class="st">'AAPL'</span>, <span class="st">'MSFT'</span>, <span class="st">'XOM'</span>]]  <span class="co"># é€‰æ‹© AAPL, MSFT, XOM åˆ—</span></span>
<span id="cb129-7"><a href="#cb129-7" aria-hidden="true" tabindex="-1"></a>close_px <span class="op">=</span> close_px.resample(<span class="st">'B'</span>).ffill()  <span class="co"># æŒ‰å·¥ä½œæ—¥é‡é‡‡æ · (å‘å‰å¡«å……)</span></span>
<span id="cb129-8"><a href="#cb129-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-9"><a href="#cb129-9" aria-hidden="true" tabindex="-1"></a>std250 <span class="op">=</span> close_px[<span class="st">'AAPL'</span>].pct_change().rolling(<span class="dv">250</span>, min_periods<span class="op">=</span><span class="dv">10</span>).std()  <span class="co"># è®¡ç®— 250 å¤©æ»šåŠ¨æ ‡å‡†å·® (è‡³å°‘ 10 ä¸ªå‘¨æœŸ)</span></span>
<span id="cb129-10"><a href="#cb129-10" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(std250[<span class="dv">5</span>:<span class="dv">12</span>])  <span class="co"># æ‰“å°ä¸€éƒ¨åˆ†æ ‡å‡†å·®</span></span>
<span id="cb129-11"><a href="#cb129-11" aria-hidden="true" tabindex="-1"></a>std250.plot()  <span class="co"># ç»˜åˆ¶æ ‡å‡†å·®</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>2003-01-09         NaN
2003-01-10         NaN
2003-01-13         NaN
2003-01-14         NaN
2003-01-15         NaN
2003-01-16    0.009628
2003-01-17    0.013818
Freq: B, Name: AAPL, dtype: float64</code></pre>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="pandas3ed11cn_files/figure-html/cell-68-output-2.png" width="587" height="411" class="figure-img"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="ç§»åŠ¨çª—å£å‡½æ•°ç»­-2" class="level2">
<h2 class="anchored" data-anchor-id="ç§»åŠ¨çª—å£å‡½æ•°ç»­-2">ç§»åŠ¨çª—å£å‡½æ•°(ç»­)</h2>
<div id="67ff40f0" class="cell" data-execution_count="68">
<div class="sourceCode cell-code" id="cb131"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb131-1"><a href="#cb131-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np  <span class="co"># å¯¼å…¥ NumPy</span></span>
<span id="cb131-2"><a href="#cb131-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd  <span class="co"># å¯¼å…¥ pandas</span></span>
<span id="cb131-3"><a href="#cb131-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt <span class="co">#å¯¼å…¥ç»˜å›¾æ¨¡å—</span></span>
<span id="cb131-4"><a href="#cb131-4" aria-hidden="true" tabindex="-1"></a>close_px_all <span class="op">=</span> pd.read_csv(<span class="st">'examples/stock_px.csv'</span>,parse_dates<span class="op">=</span><span class="va">True</span>, index_col<span class="op">=</span><span class="dv">0</span>)  <span class="co"># è¯»å– CSV æ–‡ä»¶ï¼Œè§£ææ—¥æœŸï¼Œè®¾ç½®ç¬¬ä¸€åˆ—ä¸ºç´¢å¼•</span></span>
<span id="cb131-5"><a href="#cb131-5" aria-hidden="true" tabindex="-1"></a>close_px <span class="op">=</span> close_px_all[[<span class="st">'AAPL'</span>, <span class="st">'MSFT'</span>, <span class="st">'XOM'</span>]]  <span class="co"># é€‰æ‹© AAPL, MSFT, XOM åˆ—</span></span>
<span id="cb131-6"><a href="#cb131-6" aria-hidden="true" tabindex="-1"></a>close_px <span class="op">=</span> close_px.resample(<span class="st">'B'</span>).ffill()  <span class="co"># æŒ‰å·¥ä½œæ—¥é‡é‡‡æ · (å‘å‰å¡«å……)</span></span>
<span id="cb131-7"><a href="#cb131-7" aria-hidden="true" tabindex="-1"></a>std250 <span class="op">=</span> close_px[<span class="st">'AAPL'</span>].pct_change().rolling(<span class="dv">250</span>, min_periods<span class="op">=</span><span class="dv">10</span>).std()  <span class="co"># è®¡ç®— 250 å¤©æ»šåŠ¨æ ‡å‡†å·® (è‡³å°‘ 10 ä¸ªå‘¨æœŸ)</span></span>
<span id="cb131-8"><a href="#cb131-8" aria-hidden="true" tabindex="-1"></a>expanding_mean <span class="op">=</span> std250.expanding().mean()  <span class="co"># è®¡ç®—æ‰©å±•å¹³å‡å€¼</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="ç§»åŠ¨çª—å£å‡½æ•°ç»­-3" class="level2">
<h2 class="anchored" data-anchor-id="ç§»åŠ¨çª—å£å‡½æ•°ç»­-3">ç§»åŠ¨çª—å£å‡½æ•°(ç»­)</h2>
<div id="3792e3fc" class="cell" data-execution_count="69">
<div class="sourceCode cell-code" id="cb132"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb132-1"><a href="#cb132-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt  <span class="co"># å¯¼å…¥ matplotlib.pyplot</span></span>
<span id="cb132-2"><a href="#cb132-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd  <span class="co"># å¯¼å…¥ pandas</span></span>
<span id="cb132-3"><a href="#cb132-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb132-4"><a href="#cb132-4" aria-hidden="true" tabindex="-1"></a>close_px_all <span class="op">=</span> pd.read_csv(<span class="st">'examples/stock_px.csv'</span>,parse_dates<span class="op">=</span><span class="va">True</span>, index_col<span class="op">=</span><span class="dv">0</span>)  <span class="co"># è¯»å– CSV æ–‡ä»¶ï¼Œè§£ææ—¥æœŸï¼Œè®¾ç½®ç¬¬ä¸€åˆ—ä¸ºç´¢å¼•</span></span>
<span id="cb132-5"><a href="#cb132-5" aria-hidden="true" tabindex="-1"></a>close_px <span class="op">=</span> close_px_all[[<span class="st">'AAPL'</span>, <span class="st">'MSFT'</span>, <span class="st">'XOM'</span>]]  <span class="co"># é€‰æ‹© AAPL, MSFT, XOM åˆ—</span></span>
<span id="cb132-6"><a href="#cb132-6" aria-hidden="true" tabindex="-1"></a>close_px <span class="op">=</span> close_px.resample(<span class="st">'B'</span>).ffill()  <span class="co"># æŒ‰å·¥ä½œæ—¥é‡é‡‡æ · (å‘å‰å¡«å……)</span></span>
<span id="cb132-7"><a href="#cb132-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb132-8"><a href="#cb132-8" aria-hidden="true" tabindex="-1"></a>plt.style.use(<span class="st">'grayscale'</span>)  <span class="co"># ä½¿ç”¨ç°åº¦æ ·å¼</span></span>
<span id="cb132-9"><a href="#cb132-9" aria-hidden="true" tabindex="-1"></a>close_px.rolling(<span class="dv">60</span>).mean().plot(logy<span class="op">=</span><span class="va">True</span>)  <span class="co"># ç»˜åˆ¶ 60 å¤©æ»šåŠ¨å¹³å‡çº¿ (å¯¹æ•° y è½´)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="pandas3ed11cn_files/figure-html/cell-70-output-1.png" width="572" height="411" class="figure-img"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="ç§»åŠ¨çª—å£å‡½æ•°ç»­-4" class="level2">
<h2 class="anchored" data-anchor-id="ç§»åŠ¨çª—å£å‡½æ•°ç»­-4">ç§»åŠ¨çª—å£å‡½æ•°(ç»­)</h2>
<div id="ed5f91f5" class="cell" data-execution_count="70">
<div class="sourceCode cell-code" id="cb133"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb133-1"><a href="#cb133-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd  <span class="co"># å¯¼å…¥ pandas</span></span>
<span id="cb133-2"><a href="#cb133-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb133-3"><a href="#cb133-3" aria-hidden="true" tabindex="-1"></a>close_px_all <span class="op">=</span> pd.read_csv(<span class="st">'examples/stock_px.csv'</span>,parse_dates<span class="op">=</span><span class="va">True</span>, index_col<span class="op">=</span><span class="dv">0</span>)  <span class="co"># è¯»å– CSV æ–‡ä»¶ï¼Œè§£ææ—¥æœŸï¼Œè®¾ç½®ç¬¬ä¸€åˆ—ä¸ºç´¢å¼•</span></span>
<span id="cb133-4"><a href="#cb133-4" aria-hidden="true" tabindex="-1"></a>close_px <span class="op">=</span> close_px_all[[<span class="st">'AAPL'</span>, <span class="st">'MSFT'</span>, <span class="st">'XOM'</span>]]  <span class="co"># é€‰æ‹© AAPL, MSFT, XOM åˆ—</span></span>
<span id="cb133-5"><a href="#cb133-5" aria-hidden="true" tabindex="-1"></a>close_px <span class="op">=</span> close_px.resample(<span class="st">'B'</span>).ffill()  <span class="co"># æŒ‰å·¥ä½œæ—¥é‡é‡‡æ · (å‘å‰å¡«å……)</span></span>
<span id="cb133-6"><a href="#cb133-6" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(close_px.rolling(<span class="st">'20D'</span>).mean())  <span class="co"># è®¡ç®— 20 å¤©æ»šåŠ¨å¹³å‡çº¿</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                  AAPL       MSFT        XOM
2003-01-02    7.400000  21.110000  29.220000
2003-01-03    7.425000  21.125000  29.230000
2003-01-06    7.433333  21.256667  29.473333
2003-01-07    7.432500  21.425000  29.342500
2003-01-08    7.402000  21.402000  29.240000
...                ...        ...        ...
2011-10-10  389.351429  25.602143  72.527857
2011-10-11  388.505000  25.674286  72.835000
2011-10-12  388.531429  25.810000  73.400714
2011-10-13  388.826429  25.961429  73.905000
2011-10-14  391.038000  26.048667  74.185333

[2292 rows x 3 columns]</code></pre>
</div>
</div>
<section id="æŒ‡æ•°åŠ æƒå‡½æ•°" class="level3">
<h3 class="anchored" data-anchor-id="æŒ‡æ•°åŠ æƒå‡½æ•°">æŒ‡æ•°åŠ æƒå‡½æ•°</h3>
<div id="9915aadf" class="cell" data-execution_count="71">
<div class="sourceCode cell-code" id="cb135"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb135-1"><a href="#cb135-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt  <span class="co"># å¯¼å…¥ matplotlib.pyplot</span></span>
<span id="cb135-2"><a href="#cb135-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd  <span class="co"># å¯¼å…¥ pandas</span></span>
<span id="cb135-3"><a href="#cb135-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb135-4"><a href="#cb135-4" aria-hidden="true" tabindex="-1"></a>close_px_all <span class="op">=</span> pd.read_csv(<span class="st">'examples/stock_px.csv'</span>,parse_dates<span class="op">=</span><span class="va">True</span>, index_col<span class="op">=</span><span class="dv">0</span>)  <span class="co"># è¯»å– CSV æ–‡ä»¶ï¼Œè§£ææ—¥æœŸï¼Œè®¾ç½®ç¬¬ä¸€åˆ—ä¸ºç´¢å¼•</span></span>
<span id="cb135-5"><a href="#cb135-5" aria-hidden="true" tabindex="-1"></a>close_px <span class="op">=</span> close_px_all[[<span class="st">'AAPL'</span>, <span class="st">'MSFT'</span>, <span class="st">'XOM'</span>]]  <span class="co"># é€‰æ‹© AAPL, MSFT, XOM åˆ—</span></span>
<span id="cb135-6"><a href="#cb135-6" aria-hidden="true" tabindex="-1"></a>close_px <span class="op">=</span> close_px.resample(<span class="st">'B'</span>).ffill()  <span class="co"># æŒ‰å·¥ä½œæ—¥é‡é‡‡æ · (å‘å‰å¡«å……)</span></span>
<span id="cb135-7"><a href="#cb135-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb135-8"><a href="#cb135-8" aria-hidden="true" tabindex="-1"></a>aapl_px <span class="op">=</span> close_px[<span class="st">'AAPL'</span>][<span class="st">'2006'</span>:<span class="st">'2007'</span>]  <span class="co"># é€‰æ‹© 2006 å¹´å’Œ 2007 å¹´çš„ AAPL æ•°æ®</span></span>
<span id="cb135-9"><a href="#cb135-9" aria-hidden="true" tabindex="-1"></a>ma30 <span class="op">=</span> aapl_px.rolling(<span class="dv">30</span>, min_periods<span class="op">=</span><span class="dv">20</span>).mean()  <span class="co"># 30 å¤©ç®€å•ç§»åŠ¨å¹³å‡çº¿ (è‡³å°‘ 20 ä¸ªå‘¨æœŸ)</span></span>
<span id="cb135-10"><a href="#cb135-10" aria-hidden="true" tabindex="-1"></a>ewma30 <span class="op">=</span> aapl_px.ewm(span<span class="op">=</span><span class="dv">30</span>).mean()  <span class="co"># 30 å¤©æŒ‡æ•°åŠ æƒç§»åŠ¨å¹³å‡çº¿</span></span>
<span id="cb135-11"><a href="#cb135-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb135-12"><a href="#cb135-12" aria-hidden="true" tabindex="-1"></a>aapl_px.plot(style<span class="op">=</span><span class="st">'k-'</span>, label<span class="op">=</span><span class="st">'Price'</span>)  <span class="co"># ç»˜åˆ¶ AAPL ä»·æ ¼</span></span>
<span id="cb135-13"><a href="#cb135-13" aria-hidden="true" tabindex="-1"></a>ma30.plot(style<span class="op">=</span><span class="st">'k--'</span>, label<span class="op">=</span><span class="st">'Simple Moving Avg'</span>)  <span class="co"># ç»˜åˆ¶ç®€å•ç§»åŠ¨å¹³å‡çº¿</span></span>
<span id="cb135-14"><a href="#cb135-14" aria-hidden="true" tabindex="-1"></a>ewma30.plot(style<span class="op">=</span><span class="st">'k-'</span>, label<span class="op">=</span><span class="st">'EW MA'</span>)  <span class="co"># ç»˜åˆ¶æŒ‡æ•°åŠ æƒç§»åŠ¨å¹³å‡çº¿</span></span>
<span id="cb135-15"><a href="#cb135-15" aria-hidden="true" tabindex="-1"></a>plt.legend()  <span class="co"># æ˜¾ç¤ºå›¾ä¾‹</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="pandas3ed11cn_files/figure-html/cell-72-output-1.png" width="575" height="426" class="figure-img"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="äºŒå…ƒç§»åŠ¨çª—å£å‡½æ•°" class="level3">
<h3 class="anchored" data-anchor-id="äºŒå…ƒç§»åŠ¨çª—å£å‡½æ•°">äºŒå…ƒç§»åŠ¨çª—å£å‡½æ•°</h3>
<div id="c649919a" class="cell" data-execution_count="72">
<div class="sourceCode cell-code" id="cb136"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb136-1"><a href="#cb136-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt  <span class="co"># å¯¼å…¥ matplotlib.pyplot</span></span>
<span id="cb136-2"><a href="#cb136-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd  <span class="co"># å¯¼å…¥ pandas</span></span>
<span id="cb136-3"><a href="#cb136-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-4"><a href="#cb136-4" aria-hidden="true" tabindex="-1"></a>close_px_all <span class="op">=</span> pd.read_csv(<span class="st">'examples/stock_px.csv'</span>,parse_dates<span class="op">=</span><span class="va">True</span>, index_col<span class="op">=</span><span class="dv">0</span>)  <span class="co"># è¯»å– CSV æ–‡ä»¶ï¼Œè§£ææ—¥æœŸï¼Œè®¾ç½®ç¬¬ä¸€åˆ—ä¸ºç´¢å¼•</span></span>
<span id="cb136-5"><a href="#cb136-5" aria-hidden="true" tabindex="-1"></a>close_px <span class="op">=</span> close_px_all[[<span class="st">'AAPL'</span>, <span class="st">'MSFT'</span>, <span class="st">'XOM'</span>]]  <span class="co"># é€‰æ‹© AAPL, MSFT, XOM åˆ—</span></span>
<span id="cb136-6"><a href="#cb136-6" aria-hidden="true" tabindex="-1"></a>close_px <span class="op">=</span> close_px.resample(<span class="st">'B'</span>).ffill()  <span class="co"># æŒ‰å·¥ä½œæ—¥é‡é‡‡æ · (å‘å‰å¡«å……)</span></span>
<span id="cb136-7"><a href="#cb136-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-8"><a href="#cb136-8" aria-hidden="true" tabindex="-1"></a>spx_px <span class="op">=</span> close_px_all[<span class="st">'SPX'</span>]  <span class="co"># è·å– S&amp;P 500 æŒ‡æ•°</span></span>
<span id="cb136-9"><a href="#cb136-9" aria-hidden="true" tabindex="-1"></a>spx_rets <span class="op">=</span> spx_px.pct_change()  <span class="co"># è®¡ç®— S&amp;P 500 æŒ‡æ•°çš„æ”¶ç›Šç‡</span></span>
<span id="cb136-10"><a href="#cb136-10" aria-hidden="true" tabindex="-1"></a>returns <span class="op">=</span> close_px.pct_change()  <span class="co"># è®¡ç®—æ‰€æœ‰è‚¡ç¥¨çš„æ”¶ç›Šç‡</span></span>
<span id="cb136-11"><a href="#cb136-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-12"><a href="#cb136-12" aria-hidden="true" tabindex="-1"></a><span class="co"># AAPL æ”¶ç›Šç‡ä¸ S&amp;P 500 æ”¶ç›Šç‡çš„ç›¸å…³æ€§</span></span>
<span id="cb136-13"><a href="#cb136-13" aria-hidden="true" tabindex="-1"></a>corr <span class="op">=</span> returns[<span class="st">'AAPL'</span>].rolling(<span class="dv">125</span>, min_periods<span class="op">=</span><span class="dv">100</span>).corr(spx_rets)  <span class="co"># è®¡ç®— 125 å¤©æ»šåŠ¨ç›¸å…³æ€§ (è‡³å°‘ 100 ä¸ªå‘¨æœŸ)</span></span>
<span id="cb136-14"><a href="#cb136-14" aria-hidden="true" tabindex="-1"></a>corr.plot()  <span class="co"># ç»˜åˆ¶ç›¸å…³æ€§</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="pandas3ed11cn_files/figure-html/cell-73-output-1.png" width="571" height="411" class="figure-img"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="äºŒå…ƒç§»åŠ¨çª—å£å‡½æ•°-ç»­" class="level3">
<h3 class="anchored" data-anchor-id="äºŒå…ƒç§»åŠ¨çª—å£å‡½æ•°-ç»­">äºŒå…ƒç§»åŠ¨çª—å£å‡½æ•° (ç»­)</h3>
<div id="675a860b" class="cell" data-execution_count="73">
<div class="sourceCode cell-code" id="cb137"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb137-1"><a href="#cb137-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt  <span class="co"># å¯¼å…¥ matplotlib.pyplot</span></span>
<span id="cb137-2"><a href="#cb137-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd  <span class="co"># å¯¼å…¥ pandas</span></span>
<span id="cb137-3"><a href="#cb137-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb137-4"><a href="#cb137-4" aria-hidden="true" tabindex="-1"></a>close_px_all <span class="op">=</span> pd.read_csv(<span class="st">'examples/stock_px.csv'</span>,parse_dates<span class="op">=</span><span class="va">True</span>, index_col<span class="op">=</span><span class="dv">0</span>)  <span class="co"># è¯»å– CSV æ–‡ä»¶ï¼Œè§£ææ—¥æœŸï¼Œè®¾ç½®ç¬¬ä¸€åˆ—ä¸ºç´¢å¼•</span></span>
<span id="cb137-5"><a href="#cb137-5" aria-hidden="true" tabindex="-1"></a>close_px <span class="op">=</span> close_px_all[[<span class="st">'AAPL'</span>, <span class="st">'MSFT'</span>, <span class="st">'XOM'</span>]]  <span class="co"># é€‰æ‹© AAPL, MSFT, XOM åˆ—</span></span>
<span id="cb137-6"><a href="#cb137-6" aria-hidden="true" tabindex="-1"></a>close_px <span class="op">=</span> close_px.resample(<span class="st">'B'</span>).ffill()  <span class="co"># æŒ‰å·¥ä½œæ—¥é‡é‡‡æ · (å‘å‰å¡«å……)</span></span>
<span id="cb137-7"><a href="#cb137-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb137-8"><a href="#cb137-8" aria-hidden="true" tabindex="-1"></a>spx_px <span class="op">=</span> close_px_all[<span class="st">'SPX'</span>]  <span class="co"># è·å– S&amp;P 500 æŒ‡æ•°</span></span>
<span id="cb137-9"><a href="#cb137-9" aria-hidden="true" tabindex="-1"></a>spx_rets <span class="op">=</span> spx_px.pct_change()  <span class="co"># è®¡ç®— S&amp;P 500 æŒ‡æ•°çš„æ”¶ç›Šç‡</span></span>
<span id="cb137-10"><a href="#cb137-10" aria-hidden="true" tabindex="-1"></a>returns <span class="op">=</span> close_px.pct_change()  <span class="co"># è®¡ç®—æ‰€æœ‰è‚¡ç¥¨çš„æ”¶ç›Šç‡</span></span>
<span id="cb137-11"><a href="#cb137-11" aria-hidden="true" tabindex="-1"></a><span class="co"># æ‰€æœ‰è‚¡ç¥¨æ”¶ç›Šç‡ä¸ S&amp;P 500 çš„ç›¸å…³æ€§</span></span>
<span id="cb137-12"><a href="#cb137-12" aria-hidden="true" tabindex="-1"></a>corr <span class="op">=</span> returns.rolling(<span class="dv">125</span>, min_periods<span class="op">=</span><span class="dv">100</span>).corr(spx_rets)  <span class="co"># è®¡ç®— 125 å¤©æ»šåŠ¨ç›¸å…³æ€§ (è‡³å°‘ 100 ä¸ªå‘¨æœŸ)</span></span>
<span id="cb137-13"><a href="#cb137-13" aria-hidden="true" tabindex="-1"></a>corr.plot()  <span class="co"># ç»˜åˆ¶ç›¸å…³æ€§</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="pandas3ed11cn_files/figure-html/cell-74-output-1.png" width="571" height="411" class="figure-img"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="ç”¨æˆ·å®šä¹‰çš„ç§»åŠ¨çª—å£å‡½æ•°" class="level3">
<h3 class="anchored" data-anchor-id="ç”¨æˆ·å®šä¹‰çš„ç§»åŠ¨çª—å£å‡½æ•°">ç”¨æˆ·å®šä¹‰çš„ç§»åŠ¨çª—å£å‡½æ•°</h3>
<p><code>apply</code> æ–¹æ³•å…è®¸æ‚¨åº”ç”¨è‡ªå®šä¹‰å‡½æ•°ï¼š</p>
<div id="3d23b262" class="cell" data-execution_count="74">
<div class="sourceCode cell-code" id="cb138"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb138-1"><a href="#cb138-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt  <span class="co"># å¯¼å…¥ matplotlib.pyplot</span></span>
<span id="cb138-2"><a href="#cb138-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd  <span class="co"># å¯¼å…¥ pandas</span></span>
<span id="cb138-3"><a href="#cb138-3" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> scipy.stats <span class="im">import</span> percentileofscore  <span class="co"># å¯¼å…¥ percentileofscore</span></span>
<span id="cb138-4"><a href="#cb138-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb138-5"><a href="#cb138-5" aria-hidden="true" tabindex="-1"></a>close_px_all <span class="op">=</span> pd.read_csv(<span class="st">'examples/stock_px.csv'</span>,parse_dates<span class="op">=</span><span class="va">True</span>, index_col<span class="op">=</span><span class="dv">0</span>)  <span class="co"># è¯»å– CSV æ–‡ä»¶ï¼Œè§£ææ—¥æœŸï¼Œè®¾ç½®ç¬¬ä¸€åˆ—ä¸ºç´¢å¼•</span></span>
<span id="cb138-6"><a href="#cb138-6" aria-hidden="true" tabindex="-1"></a>close_px <span class="op">=</span> close_px_all[[<span class="st">'AAPL'</span>, <span class="st">'MSFT'</span>, <span class="st">'XOM'</span>]]  <span class="co"># é€‰æ‹© AAPL, MSFT, XOM åˆ—</span></span>
<span id="cb138-7"><a href="#cb138-7" aria-hidden="true" tabindex="-1"></a>close_px <span class="op">=</span> close_px.resample(<span class="st">'B'</span>).ffill()  <span class="co"># æŒ‰å·¥ä½œæ—¥é‡é‡‡æ · (å‘å‰å¡«å……)</span></span>
<span id="cb138-8"><a href="#cb138-8" aria-hidden="true" tabindex="-1"></a>returns <span class="op">=</span> close_px.pct_change()  <span class="co"># è®¡ç®—æ‰€æœ‰è‚¡ç¥¨çš„æ”¶ç›Šç‡</span></span>
<span id="cb138-9"><a href="#cb138-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb138-10"><a href="#cb138-10" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> score_at_2percent(x):</span>
<span id="cb138-11"><a href="#cb138-11" aria-hidden="true" tabindex="-1"></a>    <span class="co">"""è®¡ç®— 0.02 åœ¨æ•°ç»„ x ä¸­çš„ç™¾åˆ†ä½æ•°"""</span></span>
<span id="cb138-12"><a href="#cb138-12" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> percentileofscore(x, <span class="fl">0.02</span>)</span>
<span id="cb138-13"><a href="#cb138-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb138-14"><a href="#cb138-14" aria-hidden="true" tabindex="-1"></a>result <span class="op">=</span> returns[<span class="st">'AAPL'</span>].rolling(<span class="dv">250</span>).<span class="bu">apply</span>(score_at_2percent)  <span class="co"># è®¡ç®— 250 å¤©æ»šåŠ¨ç™¾åˆ†ä½æ•°</span></span>
<span id="cb138-15"><a href="#cb138-15" aria-hidden="true" tabindex="-1"></a>result.plot()  <span class="co"># ç»˜åˆ¶ç™¾åˆ†ä½æ•°</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="pandas3ed11cn_files/figure-html/cell-75-output-1.png" width="579" height="411" class="figure-img"></p>
</figure>
</div>
</div>
</div>
</section>
</section>
<section id="æ€»ç»“" class="level2">
<h2 class="anchored" data-anchor-id="æ€»ç»“">æ€»ç»“</h2>
<p>æœ¬ç« ä»‹ç»äº†åœ¨ <code>pandas</code> ä¸­å¤„ç†æ—¶é—´åºåˆ—æ•°æ®çš„åŸºæœ¬æŠ€æœ¯ï¼ŒåŒ…æ‹¬ï¼š</p>
<ul>
<li>æ—¥æœŸå’Œæ—¶é—´æ•°æ®ç±»å‹ã€‚</li>
<li>æ—¶é—´åºåˆ—ç´¢å¼•ã€é€‰æ‹©å’Œå­é›†åŒ–ã€‚</li>
<li>ç”Ÿæˆæ—¥æœŸèŒƒå›´å’Œé¢‘ç‡ã€‚</li>
<li>ç§»åŠ¨æ•°æ®ã€‚</li>
<li>æ—¶åŒºå¤„ç†ã€‚</li>
<li>å‘¨æœŸå’Œå‘¨æœŸç®—æœ¯ã€‚</li>
<li>é‡é‡‡æ · (é™é‡‡æ ·å’Œå‡é‡‡æ ·)ã€‚</li>
<li>ç§»åŠ¨çª—å£å‡½æ•°ã€‚</li>
</ul>
<p>è¿™äº›å·¥å…·æ˜¯åˆ†æåŸºäºæ—¶é—´çš„æ•°æ®çš„åŸºç¡€ã€‚</p>
</section>
<section id="å°ç»“" class="level2">
<h2 class="anchored" data-anchor-id="å°ç»“">å°ç»“</h2>
<ul>
<li><strong>æ—¶é—´åºåˆ—æ•°æ®:</strong> æŒ‰æ—¶é—´é¡ºåºç´¢å¼•çš„æ•°æ®ç‚¹åºåˆ—ã€‚</li>
<li><strong>pandas åŠŸèƒ½:</strong> <code>pandas</code> æä¾›äº†å¼ºå¤§çš„å·¥å…·æ¥æ“ä½œæ—¶é—´åºåˆ—æ•°æ®ã€‚</li>
<li><strong>å…³é”®æ“ä½œ:</strong> å­¦ä¹ äº†å¤„ç†æ—¥æœŸ/æ—¶é—´ç±»å‹ã€é‡é‡‡æ ·ã€ç§»ä½å’Œåº”ç”¨æ»šåŠ¨å‡½æ•°ã€‚</li>
<li><strong>åº”ç”¨:</strong> è¿™äº›æŠ€æœ¯é€‚ç”¨äºé‡‘èã€ç»æµã€ç”Ÿæ€ç­‰é¢†åŸŸã€‚</li>
<li><strong>æ„å»ºå—:</strong> é«˜çº§æ—¶é—´åºåˆ—å»ºæ¨¡çš„åŸºç¡€ã€‚</li>
</ul>
</section>
<section id="æ€è€ƒä¸è®¨è®º" class="level2">
<h2 class="anchored" data-anchor-id="æ€è€ƒä¸è®¨è®º">æ€è€ƒä¸è®¨è®º</h2>
<ol type="1">
<li><strong>æ•°æ®é¢‘ç‡é€‰æ‹©:</strong> é¢‘ç‡é€‰æ‹©å¦‚ä½•å½±å“æ´å¯ŸåŠ›ï¼Ÿ</li>
<li><strong>ç¼ºå¤±æ•°æ®ç­–ç•¥:</strong> è®¨è®ºå¤„ç†ç¼ºå¤±æ•°æ®çš„ç­–ç•¥ã€‚</li>
<li><strong>ç§»åŠ¨çª—å£å‡½æ•°é€‰æ‹©:</strong> ä¸åŒç±»å‹ç§»åŠ¨å¹³å‡çº¿ä¹‹é—´çš„æƒè¡¡ã€‚</li>
<li><strong>æ—¶åŒºæ„è¯†:</strong> ä¸ºä»€ä¹ˆæ—¶åŒºæ„è¯†è‡³å…³é‡è¦ï¼Ÿ</li>
<li><strong>é‡é‡‡æ ·åº”ç”¨:</strong> é‡é‡‡æ ·çš„å…¶ä»–åº”ç”¨ã€‚</li>
<li><strong>å‘¨æœŸä¸æ—¶é—´æˆ³:</strong> ä½•æ—¶ä½¿ç”¨å‘¨æœŸä¸æ—¶é—´æˆ³ï¼Ÿ</li>
</ol>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleGiscusIfUsed = (isAlternate, darkModeDefault) => {
    const baseTheme = document.querySelector('#giscus-base-theme')?.value ?? 'light';
    const alternateTheme = document.querySelector('#giscus-alt-theme')?.value ?? 'dark';
    let newTheme = '';
    if(darkModeDefault) {
      newTheme = isAlternate ? baseTheme : alternateTheme;
    } else {
      newTheme = isAlternate ? alternateTheme : baseTheme;
    }
    const changeGiscusTheme = () => {
      // From: https://github.com/giscus/giscus/issues/336
      const sendMessage = (message) => {
        const iframe = document.querySelector('iframe.giscus-frame');
        if (!iframe) return;
        iframe.contentWindow.postMessage({ giscus: message }, 'https://giscus.app');
      }
      sendMessage({
        setConfig: {
          theme: newTheme
        }
      });
    }
    const isGiscussLoaded = window.document.querySelector('iframe.giscus-frame') !== null;
    if (isGiscussLoaded) {
      changeGiscusTheme();
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  const darkModeDefault = false;
  let localAlternateSentinel = darkModeDefault ? 'alternate' : 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
    toggleGiscusIfUsed(toAlternate, darkModeDefault);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "î§‹";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp("https:\/\/qiufei\.github\.io\/web-slide-pandas3ed");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
<p>ğŸ”‹<a href="https://posit.co"><img src="https://posit.co/wp-content/themes/Posit/assets/images/posit-logo-2024.svg" class="img-fluid" alt="Posit" width="65"></a></p>
</div>   
    <div class="nav-footer-center">
      <ul class="footer-items list-unstyled">
    <li class="nav-item">
 é‚±é£ Â© 2025
  </li>  
    <li class="nav-item">
    <a class="nav-link" href="https://beian.miit.gov.cn">
<p>æµ™ICPå¤‡ 2024072710å·-1</p>
</a>
  </li>  
    <li class="nav-item">
    <a class="nav-link" href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=33021202002511">
<p>æµ™å…¬ç½‘å®‰å¤‡ 33021202002511å·</p>
</a>
  </li>  
</ul>
    </div>
    <div class="nav-footer-right">
      <ul class="footer-items list-unstyled">
    <li class="nav-item compact">
    <a class="nav-link" href="mailto:hfutqiufei@163.com">
      <i class="bi bi-envelope-at-fill" role="img">
</i> 
    </a>
  </li>  
</ul>
    </div>
  </div>
</footer>




</body></html>