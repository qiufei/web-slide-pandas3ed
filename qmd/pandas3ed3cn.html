<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.40">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Python 数据分析</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<link href="../https://assets.qiufei.site/personal/profile.jpg" rel="icon" type="image/jpeg">
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-549806ee2085284f45b00abea8c6df48.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-dark-8ea72dc5fed832574809a9c94082fbbb.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap-681fbf911679f9b3dbf9743eb275ba49.min.css" rel="stylesheet" append-hash="true" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="../site_libs/bootstrap/bootstrap-dark-7e49aeac8059a213a463aa1a739e8272.min.css" rel="prefetch" append-hash="true" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<script id="quarto-search-options" type="application/json">{
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="https://assets.qiufei.site/setup/styles.css">
</head>

<body class="nav-fixed fullcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="https://qiufei.github.io"> 
<span class="menu-text">首页</span></a>
  </li>  
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="https://qiufei.github.io/web-slide"> 
<span class="menu-text">课件</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../about.html"> 
<span class="menu-text">简介</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Python 数据分析</h1>
<p class="subtitle lead">第 3 章：内置数据结构、函数和文件</p>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<section id="第-3-章内置数据结构函数和文件" class="level2">
<h2 class="anchored" data-anchor-id="第-3-章内置数据结构函数和文件">第 3 章：内置数据结构、函数和文件</h2>
<p>本章深入探讨 Python 中对数据分析至关重要的基本构建块。我们将探索 Python 的内置数据结构，如何创建可重用的函数，以及如何与文件交互。</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>虽然像 pandas 和 NumPy 这样的库为更大的数据集提供了高级功能，但它们的设计目的是与 Python 的核心数据操作工具协同工作。掌握这些基础知识至关重要！🛠️</p>
</div>
</div>
</section>
<section id="数据结构和序列" class="level2">
<h2 class="anchored" data-anchor-id="数据结构和序列">数据结构和序列</h2>
<p>Python 提供了几种通用的数据结构。我们将从以下几个开始：</p>
<ul>
<li><strong>元组 (Tuples)</strong></li>
<li><strong>列表 (Lists)</strong></li>
<li><strong>字典 (Dictionaries)</strong></li>
</ul>
<p>理解这些是掌握 Python 的关键一步。🐍</p>
</section>
<section id="元组定义" class="level2">
<h2 class="anchored" data-anchor-id="元组定义">元组：定义</h2>
<p>元组是<strong>固定长度</strong>、<strong>不可变</strong>的 Python 对象序列。一旦创建，就<em>不能</em>更改其元素或大小。</p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
不可变性
</div>
</div>
<div class="callout-body-container callout-body">
<p>不可变性意味着内容在创建后不能更改。这确保了数据的完整性。可以把它想象成一个密封的容器📦——你可以看到里面的东西，但你不能交换东西。</p>
</div>
</div>
</section>
<section id="元组创建" class="level2">
<h2 class="anchored" data-anchor-id="元组创建">元组：创建</h2>
<p>使用逗号分隔的值创建元组，通常在括号中：</p>
<div id="c48b5dc7" class="cell" data-execution_count="1">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>tup <span class="op">=</span> (<span class="dv">4</span>, <span class="dv">5</span>, <span class="dv">6</span>)  <span class="co"># 使用圆括号创建元组</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(tup)      <span class="co"># 输出: (4, 5, 6)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>(4, 5, 6)</code></pre>
</div>
</div>
<p>括号通常是可选的：</p>
<div id="ce043c3b" class="cell" data-execution_count="2">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>tup <span class="op">=</span> <span class="dv">4</span>, <span class="dv">5</span>, <span class="dv">6</span>  <span class="co"># 不使用括号创建元组</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(tup)    <span class="co"># 输出: (4, 5, 6)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>(4, 5, 6)</code></pre>
</div>
</div>
</section>
<section id="元组转换和访问" class="level2">
<h2 class="anchored" data-anchor-id="元组转换和访问">元组：转换和访问</h2>
<p>使用 <code>tuple()</code> 将序列/迭代器转换为元组：</p>
<div id="39bf67b6" class="cell" data-execution_count="3">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>my_list <span class="op">=</span> [<span class="dv">4</span>, <span class="dv">0</span>, <span class="dv">2</span>]           <span class="co"># 创建一个列表</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>my_tuple <span class="op">=</span> <span class="bu">tuple</span>(my_list)     <span class="co"># 将列表转换为元组</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(my_tuple)              <span class="co"># 输出: (4, 0, 2)</span></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>string_tuple <span class="op">=</span> <span class="bu">tuple</span>(<span class="st">'string'</span>) <span class="co"># 将字符串转换为元组</span></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(string_tuple)           <span class="co"># 输出: ('s', 't', 'r', 'i', 'n', 'g')</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>(4, 0, 2)
('s', 't', 'r', 'i', 'n', 'g')</code></pre>
</div>
</div>
<p>使用 <code>[]</code> 访问元素（从 0 开始索引）：</p>
<div id="9fc5ad3d" class="cell" data-execution_count="4">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(string_tuple[<span class="dv">0</span>])  <span class="co"># 访问元组的第一个元素，输出: 's'</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>s</code></pre>
</div>
</div>
</section>
<section id="元组嵌套元组" class="level2">
<h2 class="anchored" data-anchor-id="元组嵌套元组">元组：嵌套元组</h2>
<p>元组可以包含其他元组：</p>
<div id="96500155" class="cell" data-execution_count="5">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>nested_tup <span class="op">=</span> (<span class="dv">4</span>, <span class="dv">5</span>, <span class="dv">6</span>), (<span class="dv">7</span>, <span class="dv">8</span>) <span class="co"># 创建一个嵌套元组</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(nested_tup)             <span class="co"># 输出: ((4, 5, 6), (7, 8))</span></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(nested_tup[<span class="dv">0</span>])          <span class="co"># 访问第一个元组，输出: (4, 5, 6)</span></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(nested_tup[<span class="dv">1</span>][<span class="dv">0</span>])       <span class="co"># 访问第二个元组的第一个元素，输出: 7</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>((4, 5, 6), (7, 8))
(4, 5, 6)
7</code></pre>
</div>
</div>
</section>
<section id="元组不可变性详细示例" class="level2">
<h2 class="anchored" data-anchor-id="元组不可变性详细示例">元组：不可变性（详细示例）</h2>
<p>虽然元组<em>内</em>的对象可能是可变的，但元组本身是不可变的：</p>
<div id="b998de95" class="cell" data-execution_count="6">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>tup <span class="op">=</span> <span class="bu">tuple</span>([<span class="st">'foo'</span>, [<span class="dv">1</span>, <span class="dv">2</span>], <span class="va">True</span>]) <span class="co"># 创建一个包含列表的元组</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="co"># tup[2] = False  # 这行代码会引发 TypeError，因为元组不可变！</span></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a><span class="co"># 但是，可以*在原处*修改可变元素：</span></span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>tup[<span class="dv">1</span>].append(<span class="dv">3</span>)  <span class="co"># 向列表 [1, 2] 中追加元素 3</span></span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(tup)       <span class="co"># 输出: ('foo', [1, 2, 3], True)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>('foo', [1, 2, 3], True)</code></pre>
</div>
</div>
<div class="callout callout-style-default callout-caution callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Caution
</div>
</div>
<div class="callout-body-container callout-body">
<p>你不能将<em>新</em>对象分配给元组中的位置，但是你可以修改元组中可变对象的<em>内容</em>。</p>
</div>
</div>
</section>
<section id="元组连接和重复" class="level2">
<h2 class="anchored" data-anchor-id="元组连接和重复">元组：连接和重复</h2>
<p>使用 <code>+</code> 连接：</p>
<div id="8b057335" class="cell" data-execution_count="7">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>tuple1 <span class="op">=</span> (<span class="dv">4</span>, <span class="va">None</span>, <span class="st">'foo'</span>)          <span class="co"># 创建元组 tuple1</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>tuple2 <span class="op">=</span> (<span class="dv">6</span>, <span class="dv">0</span>)                   <span class="co"># 创建元组 tuple2</span></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>tuple3 <span class="op">=</span> (<span class="st">'bar'</span>,)                 <span class="co"># 创建单元素元组 tuple3（注意逗号）</span></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>combined_tuple <span class="op">=</span> tuple1 <span class="op">+</span> tuple2 <span class="op">+</span> tuple3 <span class="co"># 连接三个元组</span></span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(combined_tuple)             <span class="co"># 输出: (4, None, 'foo', 6, 0, 'bar')</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>(4, None, 'foo', 6, 0, 'bar')</code></pre>
</div>
</div>
<p>使用 <code>*</code> 重复：</p>
<div id="fb1cb420" class="cell" data-execution_count="8">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>repeated_tuple <span class="op">=</span> (<span class="st">'foo'</span>, <span class="st">'bar'</span>) <span class="op">*</span> <span class="dv">4</span> <span class="co"># 将元组重复 4 次</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(repeated_tuple)             <span class="co"># 输出: ('foo', 'bar', 'foo', 'bar', 'foo', 'bar', 'foo', 'bar')</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>('foo', 'bar', 'foo', 'bar', 'foo', 'bar', 'foo', 'bar')</code></pre>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>只会复制对象的<em>引用</em>，而不是对象本身。</p>
</div>
</div>
</section>
<section id="元组解包" class="level2">
<h2 class="anchored" data-anchor-id="元组解包">元组：解包</h2>
<p>将元组解包到变量中：</p>
<div id="faf1aee5" class="cell" data-execution_count="9">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>tup <span class="op">=</span> (<span class="dv">4</span>, <span class="dv">5</span>, <span class="dv">6</span>) <span class="co"># 创建一个元组</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>a, b, c <span class="op">=</span> tup    <span class="co"># 将元组解包到变量 a, b, c 中</span></span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(b)        <span class="co"># 输出: 5</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>5</code></pre>
</div>
</div>
<p>嵌套元组也可以：</p>
<div id="11f23f79" class="cell" data-execution_count="10">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>tup <span class="op">=</span> <span class="dv">4</span>, <span class="dv">5</span>, (<span class="dv">6</span>, <span class="dv">7</span>) <span class="co"># 创建一个嵌套元组</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>a, b, (c, d) <span class="op">=</span> tup  <span class="co"># 解包嵌套元组</span></span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(d)         <span class="co"># 输出: 7</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>7</code></pre>
</div>
</div>
</section>
<section id="元组交换变量" class="level2">
<h2 class="anchored" data-anchor-id="元组交换变量">元组：交换变量</h2>
<p>优雅的变量交换：</p>
<div id="6abff1d9" class="cell" data-execution_count="11">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>a, b <span class="op">=</span> <span class="dv">1</span>, <span class="dv">2</span>        <span class="co"># 将 a 赋值为 1，b 赋值为 2</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"a: </span><span class="sc">{</span>a<span class="sc">}</span><span class="ss">, b: </span><span class="sc">{</span>b<span class="sc">}</span><span class="ss">"</span>) <span class="co"># 输出: a: 1, b: 2</span></span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a>b, a <span class="op">=</span> a, b        <span class="co"># 交换 a 和 b 的值</span></span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"a: </span><span class="sc">{</span>a<span class="sc">}</span><span class="ss">, b: </span><span class="sc">{</span>b<span class="sc">}</span><span class="ss">"</span>) <span class="co"># 输出: a: 2, b: 1</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>a: 1, b: 2
a: 2, b: 1</code></pre>
</div>
</div>
</section>
<section id="元组rest-和-_" class="level2">
<h2 class="anchored" data-anchor-id="元组rest-和-_">元组：*rest (和 _)</h2>
<p><code>*rest</code> 捕获剩余的元素：</p>
<div id="c754aa49" class="cell" data-execution_count="12">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>values <span class="op">=</span> <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span> <span class="co"># 创建一个元组</span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>a, b, <span class="op">*</span>rest <span class="op">=</span> values   <span class="co"># 将前两个元素赋值给 a 和 b，其余赋值给 rest</span></span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(a)             <span class="co"># 输出: 1</span></span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(b)             <span class="co"># 输出: 2</span></span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(rest)          <span class="co"># 输出: [3, 4, 5]</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>1
2
[3, 4, 5]</code></pre>
</div>
</div>
<p><code>_</code> 用于不需要的变量：</p>
<div id="f789b0c2" class="cell" data-execution_count="13">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>a, b, <span class="op">*</span>_ <span class="op">=</span> values  <span class="co"># 忽略剩余的元素</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="元组方法-count" class="level2">
<h2 class="anchored" data-anchor-id="元组方法-count">元组：方法 (count)</h2>
<p>由于不可变性，元组的方法很少。<code>count()</code> 很有用：</p>
<div id="7cd8a4c8" class="cell" data-execution_count="14">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>a <span class="op">=</span> (<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">2</span>) <span class="co"># 创建一个元组</span></span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>count_of_2 <span class="op">=</span> a.count(<span class="dv">2</span>)   <span class="co"># 计算元组中 2 出现的次数</span></span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(count_of_2)         <span class="co"># 输出: 4</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>4</code></pre>
</div>
</div>
<div class="sourceCode" id="cb28"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="co"># `count` 方法返回指定值出现的次数。</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="列表定义和可变性" class="level2">
<h2 class="anchored" data-anchor-id="列表定义和可变性">列表：定义和可变性</h2>
<p>列表是<strong>可变长度</strong>且<strong>可变</strong>的。你可以在创建后更改其内容和大小。</p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
可变性
</div>
</div>
<div class="callout-body-container callout-body">
<p>可变性意味着你<em>可以</em>在创建后更改元素、添加新元素或删除现有元素。列表非常灵活！🤸‍♀️</p>
</div>
</div>
</section>
<section id="列表创建" class="level2">
<h2 class="anchored" data-anchor-id="列表创建">列表：创建</h2>
<p>使用 <code>[]</code> 或 <code>list()</code> 创建列表：</p>
<div id="2899f77f" class="cell" data-execution_count="15">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a>a_list <span class="op">=</span> [<span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">7</span>, <span class="va">None</span>]     <span class="co"># 使用方括号创建列表</span></span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a>tup <span class="op">=</span> (<span class="st">'foo'</span>, <span class="st">'bar'</span>, <span class="st">'baz'</span>)  <span class="co"># 创建一个元组</span></span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a>b_list <span class="op">=</span> <span class="bu">list</span>(tup)          <span class="co"># 将元组转换为列表</span></span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(b_list)               <span class="co"># 输出: ['foo', 'bar', 'baz']</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>['foo', 'bar', 'baz']</code></pre>
</div>
</div>
<p>修改元素：</p>
<div id="88ff3cf8" class="cell" data-execution_count="16">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a>b_list[<span class="dv">1</span>] <span class="op">=</span> <span class="st">'peekaboo'</span> <span class="co"># 将列表的第二个元素修改为 'peekaboo'</span></span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(b_list)          <span class="co"># 输出: ['foo', 'peekaboo', 'baz']</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>['foo', 'peekaboo', 'baz']</code></pre>
</div>
</div>
</section>
<section id="列表实体化迭代器" class="level2">
<h2 class="anchored" data-anchor-id="列表实体化迭代器">列表：实体化迭代器</h2>
<p><code>list()</code> 实体化迭代器/生成器：</p>
<div id="1f826961" class="cell" data-execution_count="17">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a>gen <span class="op">=</span> <span class="bu">range</span>(<span class="dv">10</span>)     <span class="co"># 创建一个 range 对象（迭代器）</span></span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(gen)          <span class="co"># 输出: range(0, 10)</span></span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a>my_list <span class="op">=</span> <span class="bu">list</span>(gen) <span class="co"># 将 range 对象转换为列表</span></span>
<span id="cb33-4"><a href="#cb33-4" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(my_list)      <span class="co"># 输出: [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>range(0, 10)
[0, 1, 2, 3, 4, 5, 6, 7, 8, 9]</code></pre>
</div>
</div>
</section>
<section id="列表添加元素" class="level2">
<h2 class="anchored" data-anchor-id="列表添加元素">列表：添加元素</h2>
<ul>
<li><code>append()</code>: 添加到<em>末尾</em>。</li>
</ul>
<div id="e8429c0b" class="cell" data-execution_count="18">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a>b_list.append(<span class="st">'dwarf'</span>) <span class="co"># 在列表末尾添加 'dwarf'</span></span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(b_list)         <span class="co"># 输出: ['foo', 'peekaboo', 'baz', 'dwarf']</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>['foo', 'peekaboo', 'baz', 'dwarf']</code></pre>
</div>
</div>
<ul>
<li><code>insert()</code>: 在<em>特定位置</em>插入。</li>
</ul>
<div id="5f09e1c8" class="cell" data-execution_count="19">
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a>b_list.insert(<span class="dv">1</span>, <span class="st">'red'</span>) <span class="co"># 在索引 1 处插入 'red'</span></span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(b_list)           <span class="co"># 输出: ['foo', 'red', 'peekaboo', 'baz', 'dwarf']</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>['foo', 'red', 'peekaboo', 'baz', 'dwarf']</code></pre>
</div>
</div>
<div class="callout callout-style-default callout-caution callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Caution
</div>
</div>
<div class="callout-body-container callout-body">
<p><code>insert</code> 比 <code>append</code> 开销更大（它会移动元素）。</p>
</div>
</div>
</section>
<section id="列表删除元素-pop-和-remove" class="level2">
<h2 class="anchored" data-anchor-id="列表删除元素-pop-和-remove">列表：删除元素 (pop 和 remove)</h2>
<ul>
<li><code>pop()</code>: 删除并<em>返回</em>指定索引处的元素。</li>
</ul>
<div id="de7bc98b" class="cell" data-execution_count="20">
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a>removed_element <span class="op">=</span> b_list.pop(<span class="dv">2</span>) <span class="co"># 删除索引 2 处的元素，并将其赋值给 removed_element</span></span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(removed_element)         <span class="co"># 输出: peekaboo</span></span>
<span id="cb39-3"><a href="#cb39-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(b_list)                   <span class="co"># 输出: ['foo', 'red', 'baz', 'dwarf']</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>peekaboo
['foo', 'red', 'baz', 'dwarf']</code></pre>
</div>
</div>
<ul>
<li><code>remove()</code>: 删除<em>第一个</em>出现的指定值。</li>
</ul>
<div id="2fcf4b50" class="cell" data-execution_count="21">
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a>b_list.append(<span class="st">'foo'</span>)         <span class="co"># 再次在列表末尾添加 'foo'</span></span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a>b_list.remove(<span class="st">'foo'</span>)        <span class="co"># 删除第一个出现的 'foo'</span></span>
<span id="cb41-3"><a href="#cb41-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(b_list)               <span class="co"># 输出: ['red', 'baz', 'dwarf', 'foo']</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>['red', 'baz', 'dwarf', 'foo']</code></pre>
</div>
</div>
</section>
<section id="列表检查成员资格-in-和-not-in" class="level2">
<h2 class="anchored" data-anchor-id="列表检查成员资格-in-和-not-in">列表：检查成员资格 (in 和 not in)</h2>
<div id="445d7aea" class="cell" data-execution_count="22">
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'dwarf'</span> <span class="kw">in</span> b_list)     <span class="co"># 检查 'dwarf' 是否在列表中，输出: True</span></span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'dwarf'</span> <span class="kw">not</span> <span class="kw">in</span> b_list) <span class="co"># 检查 'dwarf' 是否不在列表中，输出: False</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>True
False</code></pre>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>对于列表，<code>in</code> / <code>not in</code> 速度很<em>慢</em>（线性扫描）。字典和集合快得多（哈希表，常数时间）。</p>
</div>
</div>
</section>
<section id="列表连接和合并" class="level2">
<h2 class="anchored" data-anchor-id="列表连接和合并">列表：连接和合并</h2>
<p>使用 <code>+</code> 连接：</p>
<div id="27442698" class="cell" data-execution_count="23">
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a>list1 <span class="op">=</span> [<span class="dv">4</span>, <span class="va">None</span>, <span class="st">'foo'</span>]      <span class="co"># 创建列表 list1</span></span>
<span id="cb45-2"><a href="#cb45-2" aria-hidden="true" tabindex="-1"></a>list2 <span class="op">=</span> [<span class="dv">7</span>, <span class="dv">8</span>, (<span class="dv">2</span>, <span class="dv">3</span>)]      <span class="co"># 创建列表 list2</span></span>
<span id="cb45-3"><a href="#cb45-3" aria-hidden="true" tabindex="-1"></a>combined_list <span class="op">=</span> list1 <span class="op">+</span> list2 <span class="co"># 连接两个列表</span></span>
<span id="cb45-4"><a href="#cb45-4" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(combined_list)         <span class="co"># 输出: [4, None, 'foo', 7, 8, (2, 3)]</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[4, None, 'foo', 7, 8, (2, 3)]</code></pre>
</div>
</div>
<p><code>extend()</code> 追加多个元素：</p>
<div id="204b28f8" class="cell" data-execution_count="24">
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a>x <span class="op">=</span> [<span class="dv">4</span>, <span class="va">None</span>, <span class="st">'foo'</span>]       <span class="co"># 创建列表 x</span></span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a>x.extend([<span class="dv">7</span>, <span class="dv">8</span>, (<span class="dv">2</span>, <span class="dv">3</span>)]) <span class="co"># 使用 extend 方法追加多个元素</span></span>
<span id="cb47-3"><a href="#cb47-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(x)                   <span class="co"># 输出: [4, None, 'foo', 7, 8, (2, 3)]</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[4, None, 'foo', 7, 8, (2, 3)]</code></pre>
</div>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Tip
</div>
</div>
<div class="callout-body-container callout-body">
<p><code>extend()</code> 通常比 <code>+</code> 快（不创建新列表）。</p>
</div>
</div>
</section>
<section id="列表排序-sort-和-sorted" class="level2">
<h2 class="anchored" data-anchor-id="列表排序-sort-和-sorted">列表：排序 (sort 和 sorted)</h2>
<ul>
<li><code>sort()</code>: <em>就地</em>排序。</li>
</ul>
<div id="00d6f292" class="cell" data-execution_count="25">
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a>a <span class="op">=</span> [<span class="dv">7</span>, <span class="dv">2</span>, <span class="dv">5</span>, <span class="dv">1</span>, <span class="dv">3</span>] <span class="co"># 创建一个列表</span></span>
<span id="cb49-2"><a href="#cb49-2" aria-hidden="true" tabindex="-1"></a>a.sort()            <span class="co"># 对列表进行就地排序</span></span>
<span id="cb49-3"><a href="#cb49-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(a)            <span class="co"># 输出: [1, 2, 3, 5, 7]</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1, 2, 3, 5, 7]</code></pre>
</div>
</div>
<ul>
<li><code>key</code> 参数: 提供自定义排序方法。</li>
</ul>
<div id="3a65c87e" class="cell" data-execution_count="26">
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a>b <span class="op">=</span> [<span class="st">'saw'</span>, <span class="st">'small'</span>, <span class="st">'He'</span>, <span class="st">'foxes'</span>, <span class="st">'six'</span>] <span class="co"># 创建一个字符串列表</span></span>
<span id="cb51-2"><a href="#cb51-2" aria-hidden="true" tabindex="-1"></a>b.sort(key<span class="op">=</span><span class="bu">len</span>)   <span class="co"># 按照字符串长度对列表进行排序</span></span>
<span id="cb51-3"><a href="#cb51-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(b)            <span class="co"># 输出: ['He', 'saw', 'six', 'small', 'foxes']</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>['He', 'saw', 'six', 'small', 'foxes']</code></pre>
</div>
</div>
</section>
<section id="列表切片" class="level2">
<h2 class="anchored" data-anchor-id="列表切片">列表：切片</h2>
<p>使用 <code>start:stop</code> 选择部分：</p>
<div id="81b9b099" class="cell" data-execution_count="27">
<div class="sourceCode cell-code" id="cb53"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a>seq <span class="op">=</span> [<span class="dv">7</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">7</span>, <span class="dv">5</span>, <span class="dv">6</span>, <span class="dv">0</span>, <span class="dv">1</span>] <span class="co"># 创建一个列表</span></span>
<span id="cb53-2"><a href="#cb53-2" aria-hidden="true" tabindex="-1"></a>sub_list <span class="op">=</span> seq[<span class="dv">1</span>:<span class="dv">5</span>]          <span class="co"># 从索引 1（包含）到 5（不包含）进行切片</span></span>
<span id="cb53-3"><a href="#cb53-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(sub_list)              <span class="co"># 输出: [2, 3, 7, 5]</span></span>
<span id="cb53-4"><a href="#cb53-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-5"><a href="#cb53-5" aria-hidden="true" tabindex="-1"></a>seq[<span class="dv">3</span>:<span class="dv">5</span>] <span class="op">=</span> [<span class="dv">6</span>,<span class="dv">3</span>] <span class="co"># 使用切片替换元素</span></span>
<span id="cb53-6"><a href="#cb53-6" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(seq) <span class="co"># 输出: [7, 2, 3, 6, 3, 6, 0, 1]</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[2, 3, 7, 5]
[7, 2, 3, 6, 3, 6, 0, 1]</code></pre>
</div>
</div>
</section>
<section id="列表切片省略-startstop-和负索引" class="level2">
<h2 class="anchored" data-anchor-id="列表切片省略-startstop-和负索引">列表：切片（省略 start/stop 和负索引）</h2>
<ul>
<li>省略 <code>start</code>: 默认为开头。</li>
<li>省略 <code>stop</code>: 默认为结尾。</li>
<li>负索引：从末尾开始计数。</li>
</ul>
<div id="eebaa025" class="cell" data-execution_count="28">
<div class="sourceCode cell-code" id="cb55"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(seq[:<span class="dv">5</span>])    <span class="co"># 获取前 5 个元素，输出: [7, 2, 3, 6, 3]</span></span>
<span id="cb55-2"><a href="#cb55-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(seq[<span class="dv">3</span>:])    <span class="co"># 从索引 3 开始到结尾，输出: [6, 3, 6, 0, 1]</span></span>
<span id="cb55-3"><a href="#cb55-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(seq[<span class="op">-</span><span class="dv">4</span>:])   <span class="co"># 获取最后 4 个元素，输出: [3, 6, 0, 1]</span></span>
<span id="cb55-4"><a href="#cb55-4" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(seq[<span class="op">-</span><span class="dv">6</span>:<span class="op">-</span><span class="dv">2</span>]) <span class="co"># 获取倒数第 6 个到倒数第 2 个元素（不包含），输出: [3, 6, 3, 6]</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[7, 2, 3, 6, 3]
[6, 3, 6, 0, 1]
[3, 6, 0, 1]
[3, 6, 3, 6]</code></pre>
</div>
</div>
</section>
<section id="列表切片步长" class="level2">
<h2 class="anchored" data-anchor-id="列表切片步长">列表：切片（步长）</h2>
<p>使用<em>步长</em>选择每 n 个元素：</p>
<div id="5ce1982d" class="cell" data-execution_count="29">
<div class="sourceCode cell-code" id="cb57"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(seq[::<span class="dv">2</span>])   <span class="co"># 每隔一个元素取一个，输出: [7, 3, 3, 0]</span></span>
<span id="cb57-2"><a href="#cb57-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(seq[::<span class="op">-</span><span class="dv">1</span>])  <span class="co"># 反转列表，输出: [1, 0, 6, 3, 6, 3, 2, 7]</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[7, 3, 3, 0]
[1, 0, 6, 3, 6, 3, 2, 7]</code></pre>
</div>
</div>
</section>
<section id="列表切片图示" class="level2">
<h2 class="anchored" data-anchor-id="列表切片图示">列表切片图示</h2>
<center>
<table class="caption-top table">
<thead>
<tr class="header">
<th style="text-align: left;">0</th>
<th style="text-align: left;">1</th>
<th style="text-align: left;">2</th>
<th style="text-align: left;">3</th>
<th style="text-align: left;">4</th>
<th style="text-align: left;">5</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">H</td>
<td style="text-align: left;">E</td>
<td style="text-align: left;">L</td>
<td style="text-align: left;">L</td>
<td style="text-align: left;">O</td>
<td style="text-align: left;">!</td>
</tr>
<tr class="even">
<td style="text-align: left;">0</td>
<td style="text-align: left;">1</td>
<td style="text-align: left;">2</td>
<td style="text-align: left;">3</td>
<td style="text-align: left;">4</td>
<td style="text-align: left;">5</td>
</tr>
<tr class="odd">
<td style="text-align: left;">-6</td>
<td style="text-align: left;">-5</td>
<td style="text-align: left;">-4</td>
<td style="text-align: left;">-3</td>
<td style="text-align: left;">-2</td>
<td style="text-align: left;">-1</td>
</tr>
</tbody>
</table>
</center>
<div id="e494a6f9" class="cell" data-execution_count="30">
<div class="sourceCode cell-code" id="cb59"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a>string <span class="op">=</span> <span class="st">"HELLO!"</span></span>
<span id="cb59-2"><a href="#cb59-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(string[<span class="dv">2</span>:<span class="dv">4</span>]) <span class="co"># 使用正索引进行切片，输出: LL</span></span>
<span id="cb59-3"><a href="#cb59-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(string[<span class="op">-</span><span class="dv">5</span>:<span class="op">-</span><span class="dv">2</span>]) <span class="co"># 使用负索引进行切片, 输出: ELL</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>LL
ELL</code></pre>
</div>
</div>
<p>此图说明了在字符串“HELLO!”上的切片。索引显示在“格子边缘”，以帮助显示使用正索引或负索引时切片选择的开始和停止位置。</p>
</section>
<section id="字典-dict定义" class="level2">
<h2 class="anchored" data-anchor-id="字典-dict定义">字典 (dict)：定义</h2>
<p>字典（或 <code>dict</code>）至关重要。它们存储<em>键值对</em>（类似于哈希映射）。</p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
键值对
</div>
</div>
<div class="callout-body-container callout-body">
<p>每个<em>键</em>都与一个<em>值</em>相关联。键是<em>唯一</em>且<em>不可变</em>的（字符串、数字、元组）。值可以是任何东西。</p>
</div>
</div>
</section>
<section id="字典创建" class="level2">
<h2 class="anchored" data-anchor-id="字典创建">字典：创建</h2>
<p>使用 <code>{}</code> 和 <code>:</code>：</p>
<div id="e186f9f7" class="cell" data-execution_count="31">
<div class="sourceCode cell-code" id="cb61"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a>empty_dict <span class="op">=</span> {} <span class="co"># 创建一个空字典</span></span>
<span id="cb61-2"><a href="#cb61-2" aria-hidden="true" tabindex="-1"></a>d1 <span class="op">=</span> {<span class="st">'a'</span>: <span class="st">'some value'</span>, <span class="st">'b'</span>: [<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>]} <span class="co"># 创建一个字典</span></span>
<span id="cb61-3"><a href="#cb61-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(d1) <span class="co"># 输出: {'a': 'some value', 'b': [1, 2, 3, 4]}</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>{'a': 'some value', 'b': [1, 2, 3, 4]}</code></pre>
</div>
</div>
</section>
<section id="字典访问插入设置" class="level2">
<h2 class="anchored" data-anchor-id="字典访问插入设置">字典：访问、插入、设置</h2>
<div id="6d7102ba" class="cell" data-execution_count="32">
<div class="sourceCode cell-code" id="cb63"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb63-1"><a href="#cb63-1" aria-hidden="true" tabindex="-1"></a>d1[<span class="dv">7</span>] <span class="op">=</span> <span class="st">'an integer'</span>  <span class="co"># 添加键值对 7: 'an integer'</span></span>
<span id="cb63-2"><a href="#cb63-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(d1)            <span class="co"># 输出: {'a': 'some value', 'b': [1, 2, 3, 4], 7: 'an integer'}</span></span>
<span id="cb63-3"><a href="#cb63-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(d1[<span class="st">'b'</span>])       <span class="co"># 访问键 'b' 对应的值，输出: [1, 2, 3, 4]</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>{'a': 'some value', 'b': [1, 2, 3, 4], 7: 'an integer'}
[1, 2, 3, 4]</code></pre>
</div>
</div>
</section>
<section id="字典检查键-in" class="level2">
<h2 class="anchored" data-anchor-id="字典检查键-in">字典：检查键 (in)</h2>
<div id="56524120" class="cell" data-execution_count="33">
<div class="sourceCode cell-code" id="cb65"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb65-1"><a href="#cb65-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'b'</span> <span class="kw">in</span> d1)  <span class="co"># 检查键 'b' 是否存在于字典中，输出: True</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>True</code></pre>
</div>
</div>
</section>
<section id="字典删除-del-和-pop" class="level2">
<h2 class="anchored" data-anchor-id="字典删除-del-和-pop">字典：删除 (del 和 pop)</h2>
<ul>
<li><code>del</code>:</li>
</ul>
<div id="34e99183" class="cell" data-execution_count="34">
<div class="sourceCode cell-code" id="cb67"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb67-1"><a href="#cb67-1" aria-hidden="true" tabindex="-1"></a>d1[<span class="dv">5</span>] <span class="op">=</span> <span class="st">'some value'</span>      <span class="co"># 添加键值对 5: 'some value'</span></span>
<span id="cb67-2"><a href="#cb67-2" aria-hidden="true" tabindex="-1"></a>d1[<span class="st">'dummy'</span>] <span class="op">=</span> <span class="st">'another value'</span> <span class="co"># 添加键值对 'dummy': 'another value'</span></span>
<span id="cb67-3"><a href="#cb67-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(d1)                   <span class="co"># 输出: {'a': 'some value', 'b': [1, 2, 3, 4], 7: 'an integer', 5: 'some value', 'dummy': 'another value'}</span></span>
<span id="cb67-4"><a href="#cb67-4" aria-hidden="true" tabindex="-1"></a><span class="kw">del</span> d1[<span class="dv">5</span>]                 <span class="co"># 删除键 5 及其对应的值</span></span>
<span id="cb67-5"><a href="#cb67-5" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(d1)                   <span class="co"># 输出: {'a': 'some value', 'b': [1, 2, 3, 4], 7: 'an integer', 'dummy': 'another value'}</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>{'a': 'some value', 'b': [1, 2, 3, 4], 7: 'an integer', 5: 'some value', 'dummy': 'another value'}
{'a': 'some value', 'b': [1, 2, 3, 4], 7: 'an integer', 'dummy': 'another value'}</code></pre>
</div>
</div>
<ul>
<li><code>pop()</code>: 删除并<em>返回</em>。</li>
</ul>
<div id="6b962730" class="cell" data-execution_count="35">
<div class="sourceCode cell-code" id="cb69"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb69-1"><a href="#cb69-1" aria-hidden="true" tabindex="-1"></a>ret <span class="op">=</span> d1.pop(<span class="st">'dummy'</span>) <span class="co"># 删除键 'dummy' 及其对应的值，并将值赋给 ret</span></span>
<span id="cb69-2"><a href="#cb69-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(ret)            <span class="co"># 输出: another value</span></span>
<span id="cb69-3"><a href="#cb69-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(d1)            <span class="co"># 输出: {'a': 'some value', 'b': [1, 2, 3, 4], 7: 'an integer'}</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>another value
{'a': 'some value', 'b': [1, 2, 3, 4], 7: 'an integer'}</code></pre>
</div>
</div>
</section>
<section id="字典keys-values-和-items-方法" class="level2">
<h2 class="anchored" data-anchor-id="字典keys-values-和-items-方法">字典：keys(), values() 和 items() 方法</h2>
<ul>
<li><code>keys()</code>: 键的迭代器。</li>
<li><code>values()</code>: 值的迭代器。</li>
<li><code>items()</code>: 键值对的迭代器。</li>
</ul>
<div id="8e53192e" class="cell" data-execution_count="36">
<div class="sourceCode cell-code" id="cb71"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb71-1"><a href="#cb71-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="bu">list</span>(d1.keys()))   <span class="co"># 获取字典中所有键的列表，输出: ['a', 'b', 7]</span></span>
<span id="cb71-2"><a href="#cb71-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="bu">list</span>(d1.values())) <span class="co"># 获取字典中所有值的列表，输出: ['some value', [1, 2, 3, 4], 'an integer']</span></span>
<span id="cb71-3"><a href="#cb71-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="bu">list</span>(d1.items()))  <span class="co"># 获取字典中所有键值对的列表，输出: [('a', 'some value'), ('b', [1, 2, 3, 4]), (7, 'an integer')]</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>['a', 'b', 7]
['some value', [1, 2, 3, 4], 'an integer']
[('a', 'some value'), ('b', [1, 2, 3, 4]), (7, 'an integer')]</code></pre>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>键的顺序取决于插入顺序。<code>keys</code> 和 <code>values</code> 以<em>相同</em>的顺序返回迭代器。</p>
</div>
</div>
</section>
<section id="字典使用-update-合并" class="level2">
<h2 class="anchored" data-anchor-id="字典使用-update-合并">字典：使用 update() 合并</h2>
<p><code>update()</code> 合并字典：</p>
<div id="9a299e62" class="cell" data-execution_count="37">
<div class="sourceCode cell-code" id="cb73"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb73-1"><a href="#cb73-1" aria-hidden="true" tabindex="-1"></a>d1.update({<span class="st">'b'</span>: <span class="st">'foo'</span>, <span class="st">'c'</span>: <span class="dv">12</span>})  <span class="co"># 更新键 'b' 的值，并添加键值对 'c': 12</span></span>
<span id="cb73-2"><a href="#cb73-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(d1)                       <span class="co"># 输出: {'a': 'some value', 'b': 'foo', 7: 'an integer', 'c': 12}</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>{'a': 'some value', 'b': 'foo', 7: 'an integer', 'c': 12}</code></pre>
</div>
</div>
<div class="callout callout-style-default callout-caution callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Caution
</div>
</div>
<div class="callout-body-container callout-body">
<p><code>update()</code> 是<em>就地</em>操作。现有键的值会被丢弃。</p>
</div>
</div>
</section>
<section id="字典从序列创建" class="level2">
<h2 class="anchored" data-anchor-id="字典从序列创建">字典：从序列创建</h2>
<div id="57343a0d" class="cell" data-execution_count="38">
<div class="sourceCode cell-code" id="cb75"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb75-1"><a href="#cb75-1" aria-hidden="true" tabindex="-1"></a>key_list <span class="op">=</span> [<span class="st">'a'</span>, <span class="st">'b'</span>, <span class="st">'c'</span>]             <span class="co"># 创建一个键列表</span></span>
<span id="cb75-2"><a href="#cb75-2" aria-hidden="true" tabindex="-1"></a>value_list <span class="op">=</span> [<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>]               <span class="co"># 创建一个值列表</span></span>
<span id="cb75-3"><a href="#cb75-3" aria-hidden="true" tabindex="-1"></a>mapping <span class="op">=</span> {}                          <span class="co"># 创建一个空字典</span></span>
<span id="cb75-4"><a href="#cb75-4" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> key, value <span class="kw">in</span> <span class="bu">zip</span>(key_list, value_list): <span class="co"># 使用 zip 将键列表和值列表配对</span></span>
<span id="cb75-5"><a href="#cb75-5" aria-hidden="true" tabindex="-1"></a>    mapping[key] <span class="op">=</span> value            <span class="co"># 将键值对添加到字典中</span></span>
<span id="cb75-6"><a href="#cb75-6" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(mapping)                      <span class="co"># 输出: {'a': 1, 'b': 2, 'c': 3}</span></span>
<span id="cb75-7"><a href="#cb75-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb75-8"><a href="#cb75-8" aria-hidden="true" tabindex="-1"></a><span class="co"># 简洁写法：dict() 和 zip()</span></span>
<span id="cb75-9"><a href="#cb75-9" aria-hidden="true" tabindex="-1"></a>mapping <span class="op">=</span> <span class="bu">dict</span>(<span class="bu">zip</span>(<span class="bu">range</span>(<span class="dv">5</span>), <span class="bu">reversed</span>(<span class="bu">range</span>(<span class="dv">5</span>)))) <span class="co"># 使用 zip 和 reversed 创建字典</span></span>
<span id="cb75-10"><a href="#cb75-10" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(mapping)                                  <span class="co"># 输出: {0: 4, 1: 3, 2: 2, 3: 1, 4: 0}</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>{'a': 1, 'b': 2, 'c': 3}
{0: 4, 1: 3, 2: 2, 3: 1, 4: 0}</code></pre>
</div>
</div>
<p><code>zip</code> 函数可以将多个序列的元素配对。<code>dict</code> 接受一个由 2 元组组成的列表。</p>
</section>
<section id="字典默认值-get-和-setdefault" class="level2">
<h2 class="anchored" data-anchor-id="字典默认值-get-和-setdefault">字典：默认值 (get 和 setdefault)</h2>
<div id="6b4da08d" class="cell" data-execution_count="39">
<div class="sourceCode cell-code" id="cb77"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb77-1"><a href="#cb77-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 冗长写法：</span></span>
<span id="cb77-2"><a href="#cb77-2" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> <span class="st">'some_key'</span> <span class="kw">in</span> some_dict:   <span class="co"># 检查键是否存在</span></span>
<span id="cb77-3"><a href="#cb77-3" aria-hidden="true" tabindex="-1"></a>    value <span class="op">=</span> some_dict[<span class="st">'some_key'</span>] <span class="co"># 如果存在，获取值</span></span>
<span id="cb77-4"><a href="#cb77-4" aria-hidden="true" tabindex="-1"></a><span class="cf">else</span>:</span>
<span id="cb77-5"><a href="#cb77-5" aria-hidden="true" tabindex="-1"></a>    value <span class="op">=</span> default_value     <span class="co"># 如果不存在，使用默认值</span></span>
<span id="cb77-6"><a href="#cb77-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-7"><a href="#cb77-7" aria-hidden="true" tabindex="-1"></a><span class="co"># 简洁写法：get()</span></span>
<span id="cb77-8"><a href="#cb77-8" aria-hidden="true" tabindex="-1"></a>value <span class="op">=</span> some_dict.get(<span class="st">'some_key'</span>, default_value) <span class="co"># 如果键存在，返回值；否则返回默认值</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>如果键不存在，<code>get</code> 返回 <code>None</code>（或指定的默认值），而 <code>pop</code> 会引发异常。</p>
<div id="bb9ce285" class="cell" data-execution_count="40">
<div class="sourceCode cell-code" id="cb78"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb78-1"><a href="#cb78-1" aria-hidden="true" tabindex="-1"></a>words <span class="op">=</span> [<span class="st">'apple'</span>, <span class="st">'bat'</span>, <span class="st">'bar'</span>, <span class="st">'atom'</span>, <span class="st">'book'</span>] <span class="co"># 创建一个字符串列表</span></span>
<span id="cb78-2"><a href="#cb78-2" aria-hidden="true" tabindex="-1"></a>by_letter <span class="op">=</span> {}                                  <span class="co"># 创建一个空字典</span></span>
<span id="cb78-3"><a href="#cb78-3" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> word <span class="kw">in</span> words:                             <span class="co"># 遍历列表中的每个单词</span></span>
<span id="cb78-4"><a href="#cb78-4" aria-hidden="true" tabindex="-1"></a>    letter <span class="op">=</span> word[<span class="dv">0</span>]                          <span class="co"># 获取单词的首字母</span></span>
<span id="cb78-5"><a href="#cb78-5" aria-hidden="true" tabindex="-1"></a>    by_letter.setdefault(letter, []).append(word) <span class="co"># 使用 setdefault 设置默认值，并追加单词</span></span>
<span id="cb78-6"><a href="#cb78-6" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(by_letter)                                <span class="co"># 输出: {'a': ['apple', 'atom'], 'b': ['bat', 'bar', 'book']}</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>{'a': ['apple', 'atom'], 'b': ['bat', 'bar', 'book']}</code></pre>
</div>
</div>
<p><code>setdefault(key, default)</code>: 如果 <code>key</code> 存在，则返回其值。如果不存在，则插入 <code>key</code> 并设置值为 <code>default</code>，然后返回 <code>default</code>。</p>
</section>
<section id="字典defaultdict" class="level2">
<h2 class="anchored" data-anchor-id="字典defaultdict">字典：defaultdict</h2>
<p><code>collections.defaultdict</code> 简化了初始化：</p>
<div id="da6425da" class="cell" data-execution_count="41">
<div class="sourceCode cell-code" id="cb80"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb80-1"><a href="#cb80-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> collections <span class="im">import</span> defaultdict <span class="co"># 导入 defaultdict</span></span>
<span id="cb80-2"><a href="#cb80-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb80-3"><a href="#cb80-3" aria-hidden="true" tabindex="-1"></a>by_letter <span class="op">=</span> defaultdict(<span class="bu">list</span>)      <span class="co"># 创建一个 defaultdict，默认值为列表</span></span>
<span id="cb80-4"><a href="#cb80-4" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> word <span class="kw">in</span> words:                <span class="co"># 遍历列表中的每个单词</span></span>
<span id="cb80-5"><a href="#cb80-5" aria-hidden="true" tabindex="-1"></a>    by_letter[word[<span class="dv">0</span>]].append(word) <span class="co"># 自动创建列表并追加单词</span></span>
<span id="cb80-6"><a href="#cb80-6" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(by_letter)                   <span class="co"># 输出: defaultdict(&lt;class 'list'&gt;, {'a': ['apple', 'atom'], 'b': ['bat', 'bar', 'book']})</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>defaultdict(&lt;class 'list'&gt;, {'a': ['apple', 'atom'], 'b': ['bat', 'bar', 'book']})</code></pre>
</div>
</div>
</section>
<section id="字典有效的键类型哈希性" class="level2">
<h2 class="anchored" data-anchor-id="字典有效的键类型哈希性">字典：有效的键类型（哈希性）</h2>
<ul>
<li>键必须是<em>不可变</em>的。</li>
<li>使用 <code>hash()</code> 检查：</li>
</ul>
<div id="6314281f" class="cell" data-execution_count="42">
<div class="sourceCode cell-code" id="cb82"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb82-1"><a href="#cb82-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="bu">hash</span>(<span class="st">'string'</span>))        <span class="co"># 字符串可以哈希，输出一个哈希值</span></span>
<span id="cb82-2"><a href="#cb82-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="bu">hash</span>((<span class="dv">1</span>, <span class="dv">2</span>, (<span class="dv">2</span>, <span class="dv">3</span>)))) <span class="co"># 元组可以哈希，输出一个哈希值</span></span>
<span id="cb82-3"><a href="#cb82-3" aria-hidden="true" tabindex="-1"></a><span class="co"># print(hash((1, 2, [2, 3])))  # 这行代码会引发 TypeError: unhashable type: 'list'，因为列表不可哈希</span></span>
<span id="cb82-4"><a href="#cb82-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb82-5"><a href="#cb82-5" aria-hidden="true" tabindex="-1"></a><span class="co"># 列表作为键？转换为元组：</span></span>
<span id="cb82-6"><a href="#cb82-6" aria-hidden="true" tabindex="-1"></a>d <span class="op">=</span> {}                      <span class="co"># 创建一个空字典</span></span>
<span id="cb82-7"><a href="#cb82-7" aria-hidden="true" tabindex="-1"></a>d[<span class="bu">tuple</span>([<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>])] <span class="op">=</span> <span class="dv">5</span>    <span class="co"># 将列表转换为元组作为键</span></span>
<span id="cb82-8"><a href="#cb82-8" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(d)                    <span class="co"># 输出: {(1, 2, 3): 5}</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>3435266725997992489
-9209053662355515447
{(1, 2, 3): 5}</code></pre>
</div>
</div>
</section>
<section id="集合定义和唯一性" class="level2">
<h2 class="anchored" data-anchor-id="集合定义和唯一性">集合：定义和唯一性</h2>
<p>集合是<em>无序</em>的<em>唯一</em>元素集合（类似于只有键的字典）。</p>
</section>
<section id="集合创建" class="level2">
<h2 class="anchored" data-anchor-id="集合创建">集合：创建</h2>
<div id="7a0fadbf" class="cell" data-execution_count="43">
<div class="sourceCode cell-code" id="cb84"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb84-1"><a href="#cb84-1" aria-hidden="true" tabindex="-1"></a>set1 <span class="op">=</span> {<span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">1</span>, <span class="dv">3</span>, <span class="dv">3</span>}  <span class="co"># 使用 {} 创建集合</span></span>
<span id="cb84-2"><a href="#cb84-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(set1)               <span class="co"># 输出: {1, 2, 3} （自动去重）</span></span>
<span id="cb84-3"><a href="#cb84-3" aria-hidden="true" tabindex="-1"></a>set2 <span class="op">=</span> <span class="bu">set</span>([<span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">1</span>, <span class="dv">3</span>, <span class="dv">3</span>])  <span class="co"># 使用 set() 创建集合</span></span>
<span id="cb84-4"><a href="#cb84-4" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(set2)                      <span class="co"># 输出: {1, 2, 3}</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>{1, 2, 3}
{1, 2, 3}</code></pre>
</div>
</div>
</section>
<section id="集合运算并集交集等" class="level2">
<h2 class="anchored" data-anchor-id="集合运算并集交集等">集合：运算（并集、交集等）</h2>
<div id="4eee3697" class="cell" data-execution_count="44">
<div class="sourceCode cell-code" id="cb86"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb86-1"><a href="#cb86-1" aria-hidden="true" tabindex="-1"></a>a <span class="op">=</span> {<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>} <span class="co"># 创建集合 a</span></span>
<span id="cb86-2"><a href="#cb86-2" aria-hidden="true" tabindex="-1"></a>b <span class="op">=</span> {<span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>, <span class="dv">6</span>, <span class="dv">7</span>, <span class="dv">8</span>} <span class="co"># 创建集合 b</span></span>
<span id="cb86-3"><a href="#cb86-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb86-4"><a href="#cb86-4" aria-hidden="true" tabindex="-1"></a><span class="co"># 并集 (| 或 union())</span></span>
<span id="cb86-5"><a href="#cb86-5" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(a.union(b))     <span class="co"># 输出: {1, 2, 3, 4, 5, 6, 7, 8}</span></span>
<span id="cb86-6"><a href="#cb86-6" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(a <span class="op">|</span> b)          <span class="co"># 输出: {1, 2, 3, 4, 5, 6, 7, 8}</span></span>
<span id="cb86-7"><a href="#cb86-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb86-8"><a href="#cb86-8" aria-hidden="true" tabindex="-1"></a><span class="co"># 交集 (&amp; 或 intersection())</span></span>
<span id="cb86-9"><a href="#cb86-9" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(a.intersection(b)) <span class="co"># 输出: {3, 4, 5}</span></span>
<span id="cb86-10"><a href="#cb86-10" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(a <span class="op">&amp;</span> b)          <span class="co"># 输出: {3, 4, 5}</span></span>
<span id="cb86-11"><a href="#cb86-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb86-12"><a href="#cb86-12" aria-hidden="true" tabindex="-1"></a><span class="co"># 差集 (- 或 difference())</span></span>
<span id="cb86-13"><a href="#cb86-13" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(a.difference(b)) <span class="co"># 输出: {1, 2}</span></span>
<span id="cb86-14"><a href="#cb86-14" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(a <span class="op">-</span> b) <span class="co">#输出： {1, 2}</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>{1, 2, 3, 4, 5, 6, 7, 8}
{1, 2, 3, 4, 5, 6, 7, 8}
{3, 4, 5}
{3, 4, 5}
{1, 2}
{1, 2}</code></pre>
</div>
</div>
</section>
<section id="集合运算" class="level2">
<h2 class="anchored" data-anchor-id="集合运算">集合运算</h2>
<table class="caption-top table">
<colgroup>
<col style="width: 27%">
<col style="width: 10%">
<col style="width: 61%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">函数</th>
<th style="text-align: left;">替代语法</th>
<th style="text-align: left;">描述</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><code>a.add(x)</code></td>
<td style="text-align: left;">N/A</td>
<td style="text-align: left;">将元素 x 添加到集合 a</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>a.clear()</code></td>
<td style="text-align: left;">N/A</td>
<td style="text-align: left;">将集合 a 重置为空集，丢弃所有元素</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>a.remove(x)</code></td>
<td style="text-align: left;">N/A</td>
<td style="text-align: left;">从集合 a 中移除元素 x</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>a.pop()</code></td>
<td style="text-align: left;">N/A</td>
<td style="text-align: left;">从集合 a 中移除并返回一个任意元素，如果集合为空则引发 KeyError</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>a.union(b)</code></td>
<td style="text-align: left;"><code>a \| b</code></td>
<td style="text-align: left;">a 和 b 中的所有唯一元素</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>a.update(b)</code></td>
<td style="text-align: left;"><code>a \|= b</code></td>
<td style="text-align: left;">将 a 的内容设置为 a 和 b 中元素的并集</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>a.intersection(b)</code></td>
<td style="text-align: left;"><code>a &amp; b</code></td>
<td style="text-align: left;">a 和 b 中的所有元素</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>a.intersection_update(b)</code></td>
<td style="text-align: left;"><code>a &amp;= b</code></td>
<td style="text-align: left;">将 a 的内容设置为 a 和 b 中元素的交集</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>a.difference(b)</code></td>
<td style="text-align: left;"><code>a - b</code></td>
<td style="text-align: left;">a 中不在 b 中的元素</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>a.difference_update(b)</code></td>
<td style="text-align: left;"><code>a -= b</code></td>
<td style="text-align: left;">将 a 设置为 a 中不在 b 中的元素</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>a.symmetric_difference(b)</code></td>
<td style="text-align: left;"><code>a ^ b</code></td>
<td style="text-align: left;">a 或 b 中的所有元素，但不同时在两者中</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>a.symmetric_difference_update(b)</code></td>
<td style="text-align: left;"><code>a ^= b</code></td>
<td style="text-align: left;">将 a 设置为包含 a 或 b 中的元素，但不同时在两者中</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>a.issubset(b)</code></td>
<td style="text-align: left;"><code>&lt;=</code></td>
<td style="text-align: left;">如果 a 的所有元素都包含在 b 中，则为 True</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>a.issuperset(b)</code></td>
<td style="text-align: left;"><code>&gt;=</code></td>
<td style="text-align: left;">如果 b 的所有元素都包含在 a 中，则为 True</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>a.isdisjoint(b)</code></td>
<td style="text-align: left;">N/A</td>
<td style="text-align: left;">如果 a 和 b 没有共同元素，则为 True</td>
</tr>
</tbody>
</table>
</section>
<section id="集合就地运算" class="level2">
<h2 class="anchored" data-anchor-id="集合就地运算">集合：就地运算</h2>
<p>存在就地版本（例如，<code>a |= b</code>）：</p>
<div id="038baab4" class="cell" data-execution_count="45">
<div class="sourceCode cell-code" id="cb88"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb88-1"><a href="#cb88-1" aria-hidden="true" tabindex="-1"></a>c <span class="op">=</span> a.copy() <span class="co"># 创建 a 的副本</span></span>
<span id="cb88-2"><a href="#cb88-2" aria-hidden="true" tabindex="-1"></a>c <span class="op">|=</span> b       <span class="co"># 就地并集</span></span>
<span id="cb88-3"><a href="#cb88-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(c)     <span class="co"># 输出: {1, 2, 3, 4, 5, 6, 7, 8}</span></span>
<span id="cb88-4"><a href="#cb88-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb88-5"><a href="#cb88-5" aria-hidden="true" tabindex="-1"></a>d <span class="op">=</span> a.copy()  <span class="co"># 创建 a 的副本</span></span>
<span id="cb88-6"><a href="#cb88-6" aria-hidden="true" tabindex="-1"></a>d <span class="op">&amp;=</span> b        <span class="co"># 就地交集</span></span>
<span id="cb88-7"><a href="#cb88-7" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(d)      <span class="co"># 输出: {3, 4, 5}</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>{1, 2, 3, 4, 5, 6, 7, 8}
{3, 4, 5}</code></pre>
</div>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Tip
</div>
</div>
<div class="callout-body-container callout-body">
<p>对于大型集合，就地运算更有效。</p>
</div>
</div>
</section>
<section id="集合元素哈希性" class="level2">
<h2 class="anchored" data-anchor-id="集合元素哈希性">集合：元素哈希性</h2>
<p>与字典键一样，集合元素必须是<em>不可变</em>且<em>可哈希</em>的。</p>
<div id="8243b433" class="cell" data-execution_count="46">
<div class="sourceCode cell-code" id="cb90"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb90-1"><a href="#cb90-1" aria-hidden="true" tabindex="-1"></a>my_data <span class="op">=</span> [<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>]   <span class="co"># 创建一个列表</span></span>
<span id="cb90-2"><a href="#cb90-2" aria-hidden="true" tabindex="-1"></a><span class="co"># my_set = {my_data}  # 这行代码会引发 TypeError，因为列表不可哈希</span></span>
<span id="cb90-3"><a href="#cb90-3" aria-hidden="true" tabindex="-1"></a>my_set <span class="op">=</span> {<span class="bu">tuple</span>(my_data)} <span class="co"># 将列表转换为元组</span></span>
<span id="cb90-4"><a href="#cb90-4" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(my_set)            <span class="co"># 输出: {(1, 2, 3, 4)}</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>{(1, 2, 3, 4)}</code></pre>
</div>
</div>
</section>
<section id="集合子集和超集" class="level2">
<h2 class="anchored" data-anchor-id="集合子集和超集">集合：子集和超集</h2>
<div id="41c63967" class="cell" data-execution_count="47">
<div class="sourceCode cell-code" id="cb92"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb92-1"><a href="#cb92-1" aria-hidden="true" tabindex="-1"></a>a_set <span class="op">=</span> {<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>} <span class="co"># 创建一个集合</span></span>
<span id="cb92-2"><a href="#cb92-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>({<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>}.issubset(a_set))   <span class="co"># 检查 {1, 2, 3} 是否是 a_set 的子集，输出: True</span></span>
<span id="cb92-3"><a href="#cb92-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(a_set.issuperset({<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>})) <span class="co"># 检查 a_set 是否是 {1, 2, 3} 的超集，输出: True</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>True
True</code></pre>
</div>
</div>
</section>
<section id="集合相等性" class="level2">
<h2 class="anchored" data-anchor-id="集合相等性">集合：相等性</h2>
<p>如果内容相等，则集合相等：</p>
<div id="f5abf505" class="cell" data-execution_count="48">
<div class="sourceCode cell-code" id="cb94"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb94-1"><a href="#cb94-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>({<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>} <span class="op">==</span> {<span class="dv">3</span>, <span class="dv">2</span>, <span class="dv">1</span>}) <span class="co"># 输出: True</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>True</code></pre>
</div>
</div>
</section>
<section id="内置序列函数enumerate" class="level2">
<h2 class="anchored" data-anchor-id="内置序列函数enumerate">内置序列函数：enumerate</h2>
<p><code>enumerate</code> 在迭代期间跟踪索引：</p>
<div id="7c8d904e" class="cell" data-execution_count="49">
<div class="sourceCode cell-code" id="cb96"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb96-1"><a href="#cb96-1" aria-hidden="true" tabindex="-1"></a>collection <span class="op">=</span> [<span class="st">'foo'</span>, <span class="st">'bar'</span>, <span class="st">'baz'</span>] <span class="co"># 创建一个列表</span></span>
<span id="cb96-2"><a href="#cb96-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-3"><a href="#cb96-3" aria-hidden="true" tabindex="-1"></a><span class="co"># 不使用 enumerate 的写法：</span></span>
<span id="cb96-4"><a href="#cb96-4" aria-hidden="true" tabindex="-1"></a>i <span class="op">=</span> <span class="dv">0</span>                             <span class="co"># 初始化索引</span></span>
<span id="cb96-5"><a href="#cb96-5" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> value <span class="kw">in</span> collection:         <span class="co"># 遍历列表</span></span>
<span id="cb96-6"><a href="#cb96-6" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f"Index: </span><span class="sc">{</span>i<span class="sc">}</span><span class="ss">, Value: </span><span class="sc">{</span>value<span class="sc">}</span><span class="ss">"</span>) <span class="co"># 打印索引和值</span></span>
<span id="cb96-7"><a href="#cb96-7" aria-hidden="true" tabindex="-1"></a>    i <span class="op">+=</span> <span class="dv">1</span>                        <span class="co"># 索引递增</span></span>
<span id="cb96-8"><a href="#cb96-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-9"><a href="#cb96-9" aria-hidden="true" tabindex="-1"></a><span class="co"># 使用 enumerate：</span></span>
<span id="cb96-10"><a href="#cb96-10" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i, value <span class="kw">in</span> <span class="bu">enumerate</span>(collection): <span class="co"># 同时获取索引和值</span></span>
<span id="cb96-11"><a href="#cb96-11" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f"Index: </span><span class="sc">{</span>i<span class="sc">}</span><span class="ss">, Value: </span><span class="sc">{</span>value<span class="sc">}</span><span class="ss">"</span>) <span class="co"># 打印索引和值</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Index: 0, Value: foo
Index: 1, Value: bar
Index: 2, Value: baz
Index: 0, Value: foo
Index: 1, Value: bar
Index: 2, Value: baz</code></pre>
</div>
</div>
<p><code>enumerate</code> 返回 <code>(index, value)</code> 元组。</p>
</section>
<section id="内置序列函数sorted" class="level2">
<h2 class="anchored" data-anchor-id="内置序列函数sorted">内置序列函数：sorted</h2>
<p><code>sorted</code> 返回一个<em>新的</em>排序列表：</p>
<div id="345dbaca" class="cell" data-execution_count="50">
<div class="sourceCode cell-code" id="cb98"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb98-1"><a href="#cb98-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="bu">sorted</span>([<span class="dv">7</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">6</span>, <span class="dv">0</span>, <span class="dv">3</span>, <span class="dv">2</span>]))  <span class="co"># 对列表进行排序，输出: [0, 1, 2, 2, 3, 6, 7]</span></span>
<span id="cb98-2"><a href="#cb98-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="bu">sorted</span>(<span class="st">'horse race'</span>))          <span class="co"># 对字符串进行排序，输出: [' ', 'a', 'c', 'e', 'e', 'h', 'o', 'r', 'r', 's']</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[0, 1, 2, 2, 3, 6, 7]
[' ', 'a', 'c', 'e', 'e', 'h', 'o', 'r', 'r', 's']</code></pre>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p><code>sorted()</code> 返回一个<em>新</em>列表。<code>list.sort()</code> <em>就地</em>排序。</p>
</div>
</div>
</section>
<section id="内置序列函数zip" class="level2">
<h2 class="anchored" data-anchor-id="内置序列函数zip">内置序列函数：zip</h2>
<p><code>zip</code> 将元素“配对”：</p>
<div id="6262d06e" class="cell" data-execution_count="51">
<div class="sourceCode cell-code" id="cb100"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb100-1"><a href="#cb100-1" aria-hidden="true" tabindex="-1"></a>seq1 <span class="op">=</span> [<span class="st">'foo'</span>, <span class="st">'bar'</span>, <span class="st">'baz'</span>]   <span class="co"># 创建列表 seq1</span></span>
<span id="cb100-2"><a href="#cb100-2" aria-hidden="true" tabindex="-1"></a>seq2 <span class="op">=</span> [<span class="st">'one'</span>, <span class="st">'two'</span>, <span class="st">'three'</span>] <span class="co"># 创建列表 seq2</span></span>
<span id="cb100-3"><a href="#cb100-3" aria-hidden="true" tabindex="-1"></a>zipped <span class="op">=</span> <span class="bu">zip</span>(seq1, seq2)       <span class="co"># 将 seq1 和 seq2 配对</span></span>
<span id="cb100-4"><a href="#cb100-4" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="bu">list</span>(zipped))           <span class="co"># 输出: [('foo', 'one'), ('bar', 'two'), ('baz', 'three')]</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[('foo', 'one'), ('bar', 'two'), ('baz', 'three')]</code></pre>
</div>
</div>
<p><code>zip</code> 可以接受任意数量的序列。输出长度由<em>最短</em>的序列决定：</p>
<div id="e64c30fa" class="cell" data-execution_count="52">
<div class="sourceCode cell-code" id="cb102"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb102-1"><a href="#cb102-1" aria-hidden="true" tabindex="-1"></a>seq3 <span class="op">=</span> [<span class="va">False</span>, <span class="va">True</span>]           <span class="co"># 创建列表 seq3</span></span>
<span id="cb102-2"><a href="#cb102-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="bu">list</span>(<span class="bu">zip</span>(seq1, seq2, seq3))) <span class="co"># 输出: [('foo', 'one', False), ('bar', 'two', True)]</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[('foo', 'one', False), ('bar', 'two', True)]</code></pre>
</div>
</div>
</section>
<section id="内置序列函数zip-与-enumerate-结合" class="level2">
<h2 class="anchored" data-anchor-id="内置序列函数zip-与-enumerate-结合">内置序列函数：zip (与 enumerate 结合)</h2>
<p>使用 <code>enumerate</code> 迭代多个序列：</p>
<div id="f20cf0aa" class="cell" data-execution_count="53">
<div class="sourceCode cell-code" id="cb104"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb104-1"><a href="#cb104-1" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i, (a, b) <span class="kw">in</span> <span class="bu">enumerate</span>(<span class="bu">zip</span>(seq1, seq2)): <span class="co"># 同时迭代多个序列，并获取索引</span></span>
<span id="cb104-2"><a href="#cb104-2" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f'</span><span class="sc">{</span>i<span class="sc">}</span><span class="ss">: </span><span class="sc">{</span>a<span class="sc">}</span><span class="ss">, </span><span class="sc">{</span>b<span class="sc">}</span><span class="ss">'</span>)                  <span class="co"># 输出: 0: foo, one \n 1: bar, two \n 2: baz, three</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>0: foo, one
1: bar, two
2: baz, three</code></pre>
</div>
</div>
</section>
<section id="内置序列函数reversed" class="level2">
<h2 class="anchored" data-anchor-id="内置序列函数reversed">内置序列函数：reversed</h2>
<p><code>reversed</code> 以<em>相反</em>的顺序迭代：</p>
<div id="a69dde4c" class="cell" data-execution_count="54">
<div class="sourceCode cell-code" id="cb106"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb106-1"><a href="#cb106-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="bu">list</span>(<span class="bu">reversed</span>(<span class="bu">range</span>(<span class="dv">10</span>))))  <span class="co"># 反向迭代 range(10)，输出: [9, 8, 7, 6, 5, 4, 3, 2, 1, 0]</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[9, 8, 7, 6, 5, 4, 3, 2, 1, 0]</code></pre>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p><code>reversed</code> 是一个生成器（在实体化之前不会创建反向序列）。</p>
</div>
</div>
</section>
<section id="列表集合和字典推导式" class="level2">
<h2 class="anchored" data-anchor-id="列表集合和字典推导式">列表、集合和字典推导式</h2>
<p>推导式可以简洁地创建新集合。</p>
</section>
<section id="列表推导式基本形式" class="level2">
<h2 class="anchored" data-anchor-id="列表推导式基本形式">列表推导式：基本形式</h2>
<div id="5c4bc0bb" class="cell" data-execution_count="55">
<div class="sourceCode cell-code" id="cb108"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb108-1"><a href="#cb108-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 通用形式：[expr for val in collection if condition]</span></span>
<span id="cb108-2"><a href="#cb108-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb108-3"><a href="#cb108-3" aria-hidden="true" tabindex="-1"></a><span class="co"># 等效的 for 循环：</span></span>
<span id="cb108-4"><a href="#cb108-4" aria-hidden="true" tabindex="-1"></a>result <span class="op">=</span> []                <span class="co"># 创建一个空列表</span></span>
<span id="cb108-5"><a href="#cb108-5" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> val <span class="kw">in</span> collection:     <span class="co"># 遍历集合中的每个元素</span></span>
<span id="cb108-6"><a href="#cb108-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> condition:          <span class="co"># 如果条件为真</span></span>
<span id="cb108-7"><a href="#cb108-7" aria-hidden="true" tabindex="-1"></a>        result.append(expr) <span class="co"># 将表达式的结果添加到列表中</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>示例：</p>
<div id="b54292bd" class="cell" data-execution_count="56">
<div class="sourceCode cell-code" id="cb109"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb109-1"><a href="#cb109-1" aria-hidden="true" tabindex="-1"></a>strings <span class="op">=</span> [<span class="st">'a'</span>, <span class="st">'as'</span>, <span class="st">'bat'</span>, <span class="st">'car'</span>, <span class="st">'dove'</span>, <span class="st">'python'</span>] <span class="co"># 创建一个字符串列表</span></span>
<span id="cb109-2"><a href="#cb109-2" aria-hidden="true" tabindex="-1"></a><span class="co"># 使用列表推导式将长度大于 2 的字符串转换为大写</span></span>
<span id="cb109-3"><a href="#cb109-3" aria-hidden="true" tabindex="-1"></a>upper_case_long_strings <span class="op">=</span> [x.upper() <span class="cf">for</span> x <span class="kw">in</span> strings <span class="cf">if</span> <span class="bu">len</span>(x) <span class="op">&gt;</span> <span class="dv">2</span>]</span>
<span id="cb109-4"><a href="#cb109-4" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(upper_case_long_strings)  <span class="co"># 输出: ['BAT', 'CAR', 'DOVE', 'PYTHON']</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>['BAT', 'CAR', 'DOVE', 'PYTHON']</code></pre>
</div>
</div>
</section>
<section id="集合推导式" class="level2">
<h2 class="anchored" data-anchor-id="集合推导式">集合推导式</h2>
<div id="e98a78d1" class="cell" data-execution_count="57">
<div class="sourceCode cell-code" id="cb111"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb111-1"><a href="#cb111-1" aria-hidden="true" tabindex="-1"></a><span class="co"># {expr for val in collection if condition}</span></span>
<span id="cb111-2"><a href="#cb111-2" aria-hidden="true" tabindex="-1"></a>strings <span class="op">=</span> [<span class="st">'a'</span>, <span class="st">'as'</span>, <span class="st">'bat'</span>, <span class="st">'car'</span>, <span class="st">'dove'</span>, <span class="st">'python'</span>] <span class="co"># 创建一个字符串列表</span></span>
<span id="cb111-3"><a href="#cb111-3" aria-hidden="true" tabindex="-1"></a>unique_lengths <span class="op">=</span> {<span class="bu">len</span>(x) <span class="cf">for</span> x <span class="kw">in</span> strings}   <span class="co"># 使用集合推导式获取列表中字符串的唯一长度</span></span>
<span id="cb111-4"><a href="#cb111-4" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(unique_lengths)                       <span class="co"># 输出: {1, 2, 3, 4, 6}</span></span>
<span id="cb111-5"><a href="#cb111-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb111-6"><a href="#cb111-6" aria-hidden="true" tabindex="-1"></a><span class="co"># 使用 map 函数</span></span>
<span id="cb111-7"><a href="#cb111-7" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="bu">set</span>(<span class="bu">map</span>(<span class="bu">len</span>, strings))) <span class="co"># 使用map函数和set达到同样效果</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>{1, 2, 3, 4, 6}
{1, 2, 3, 4, 6}</code></pre>
</div>
</div>
<p>类似于列表推导式，但使用 <code>{}</code>（创建一个集合）。</p>
</section>
<section id="字典推导式" class="level2">
<h2 class="anchored" data-anchor-id="字典推导式">字典推导式</h2>
<div id="3905637c" class="cell" data-execution_count="58">
<div class="sourceCode cell-code" id="cb113"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb113-1"><a href="#cb113-1" aria-hidden="true" tabindex="-1"></a><span class="co"># {key_expr: value_expr for val in collection if condition}</span></span>
<span id="cb113-2"><a href="#cb113-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-3"><a href="#cb113-3" aria-hidden="true" tabindex="-1"></a>strings <span class="op">=</span> [<span class="st">'a'</span>, <span class="st">'as'</span>, <span class="st">'bat'</span>, <span class="st">'car'</span>, <span class="st">'dove'</span>, <span class="st">'python'</span>]   <span class="co"># 创建一个字符串列表</span></span>
<span id="cb113-4"><a href="#cb113-4" aria-hidden="true" tabindex="-1"></a><span class="co"># 使用字典推导式创建一个字典，其中键是字符串，值是字符串在列表中的索引</span></span>
<span id="cb113-5"><a href="#cb113-5" aria-hidden="true" tabindex="-1"></a>loc_mapping <span class="op">=</span> {val: index <span class="cf">for</span> index, val <span class="kw">in</span> <span class="bu">enumerate</span>(strings)}</span>
<span id="cb113-6"><a href="#cb113-6" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(loc_mapping) <span class="co"># 输出: {'a': 0, 'as': 1, 'bat': 2, 'car': 3, 'dove': 4, 'python': 5}</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>{'a': 0, 'as': 1, 'bat': 2, 'car': 3, 'dove': 4, 'python': 5}</code></pre>
</div>
</div>
</section>
<section id="嵌套列表推导式" class="level2">
<h2 class="anchored" data-anchor-id="嵌套列表推导式">嵌套列表推导式</h2>
<div id="236721e7" class="cell" data-execution_count="59">
<div class="sourceCode cell-code" id="cb115"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb115-1"><a href="#cb115-1" aria-hidden="true" tabindex="-1"></a>all_data <span class="op">=</span> [[<span class="st">'John'</span>, <span class="st">'Emily'</span>, <span class="st">'Michael'</span>, <span class="st">'Mary'</span>, <span class="st">'Steven'</span>],</span>
<span id="cb115-2"><a href="#cb115-2" aria-hidden="true" tabindex="-1"></a>            [<span class="st">'Maria'</span>, <span class="st">'Juan'</span>, <span class="st">'Javier'</span>, <span class="st">'Natalia'</span>, <span class="st">'Pilar'</span>]]</span>
<span id="cb115-3"><a href="#cb115-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-4"><a href="#cb115-4" aria-hidden="true" tabindex="-1"></a><span class="co"># 使用嵌套列表推导式找出名字中包含2个以上a的名字。</span></span>
<span id="cb115-5"><a href="#cb115-5" aria-hidden="true" tabindex="-1"></a>names_of_interest <span class="op">=</span> [name <span class="cf">for</span> names <span class="kw">in</span> all_data <span class="cf">for</span> name <span class="kw">in</span> names</span>
<span id="cb115-6"><a href="#cb115-6" aria-hidden="true" tabindex="-1"></a>                     <span class="cf">if</span> name.count(<span class="st">'a'</span>) <span class="op">&gt;=</span> <span class="dv">2</span>]</span>
<span id="cb115-7"><a href="#cb115-7" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(names_of_interest) <span class="co"># 输出: ['Maria', 'Natalia']</span></span>
<span id="cb115-8"><a href="#cb115-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-9"><a href="#cb115-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-10"><a href="#cb115-10" aria-hidden="true" tabindex="-1"></a>some_tuples <span class="op">=</span> [(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>), (<span class="dv">4</span>, <span class="dv">5</span>, <span class="dv">6</span>), (<span class="dv">7</span>, <span class="dv">8</span>, <span class="dv">9</span>)] <span class="co"># 创建一个元组列表</span></span>
<span id="cb115-11"><a href="#cb115-11" aria-hidden="true" tabindex="-1"></a>flattened <span class="op">=</span> [x <span class="cf">for</span> tup <span class="kw">in</span> some_tuples <span class="cf">for</span> x <span class="kw">in</span> tup] <span class="co"># 使用嵌套列表推导式展开元组</span></span>
<span id="cb115-12"><a href="#cb115-12" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(flattened) <span class="co"># 输出: [1, 2, 3, 4, 5, 6, 7, 8, 9]</span></span>
<span id="cb115-13"><a href="#cb115-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-14"><a href="#cb115-14" aria-hidden="true" tabindex="-1"></a><span class="co"># 列表推导式中的列表推导式</span></span>
<span id="cb115-15"><a href="#cb115-15" aria-hidden="true" tabindex="-1"></a>flattened <span class="op">=</span> [[x <span class="cf">for</span> x <span class="kw">in</span> tup] <span class="cf">for</span> tup <span class="kw">in</span> some_tuples]  <span class="co"># 两层列表推导</span></span>
<span id="cb115-16"><a href="#cb115-16" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(flattened) <span class="co"># 输出： [[1, 2, 3], [4, 5, 6], [7, 8, 9]]</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>['Maria', 'Natalia']
[1, 2, 3, 4, 5, 6, 7, 8, 9]
[[1, 2, 3], [4, 5, 6], [7, 8, 9]]</code></pre>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p><code>for</code> 的顺序与嵌套 <code>for</code> 循环中的顺序相同。</p>
</div>
</div>
</section>
<section id="函数" class="level2">
<h2 class="anchored" data-anchor-id="函数">3.2 函数</h2>
<p>函数组织和重用代码。</p>
</section>
<section id="函数声明-def" class="level2">
<h2 class="anchored" data-anchor-id="函数声明-def">函数声明 (def)</h2>
<div id="96f88510" class="cell" data-execution_count="60">
<div class="sourceCode cell-code" id="cb117"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb117-1"><a href="#cb117-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> my_function(x, y):                      <span class="co"># 定义一个函数，名为 my_function，接受两个参数 x 和 y</span></span>
<span id="cb117-2"><a href="#cb117-2" aria-hidden="true" tabindex="-1"></a>    <span class="co">"""Docstring: 解释函数的功能。"""</span>   <span class="co"># 函数的文档字符串</span></span>
<span id="cb117-3"><a href="#cb117-3" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> x <span class="op">+</span> y                            <span class="co"># 返回 x 和 y 的和</span></span>
<span id="cb117-4"><a href="#cb117-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-5"><a href="#cb117-5" aria-hidden="true" tabindex="-1"></a>result <span class="op">=</span> my_function(<span class="dv">1</span>, <span class="dv">2</span>)                  <span class="co"># 调用函数，并将返回值赋给 result</span></span>
<span id="cb117-6"><a href="#cb117-6" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(result)                              <span class="co"># 输出: 3</span></span>
<span id="cb117-7"><a href="#cb117-7" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(my_function.__doc__) <span class="co"># 访问文档字符串, 输出: Docstring: 解释函数的功能。</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>3
Docstring: 解释函数的功能。</code></pre>
</div>
</div>
<ul>
<li><code>return</code> 返回一个值。</li>
<li>如果没有 <code>return</code> 语句，则隐式返回 <code>None</code>。</li>
</ul>
</section>
<section id="函数参数位置参数和关键字参数" class="level2">
<h2 class="anchored" data-anchor-id="函数参数位置参数和关键字参数">函数参数（位置参数和关键字参数）</h2>
<div id="5fef25fe" class="cell" data-execution_count="61">
<div class="sourceCode cell-code" id="cb119"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb119-1"><a href="#cb119-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> my_function2(x, y, z<span class="op">=</span><span class="fl">1.5</span>):  <span class="co"># 定义函数，z 是关键字参数，默认值为 1.5</span></span>
<span id="cb119-2"><a href="#cb119-2" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> z <span class="op">&gt;</span> <span class="dv">1</span>:                   <span class="co"># 如果 z 大于 1</span></span>
<span id="cb119-3"><a href="#cb119-3" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> z <span class="op">*</span> (x <span class="op">+</span> y)      <span class="co"># 返回 z 乘以 x 和 y 的和</span></span>
<span id="cb119-4"><a href="#cb119-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span>:                       <span class="co"># 否则</span></span>
<span id="cb119-5"><a href="#cb119-5" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> z <span class="op">/</span> (x <span class="op">+</span> y)      <span class="co"># 返回 z 除以 x 和 y 的和</span></span>
<span id="cb119-6"><a href="#cb119-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb119-7"><a href="#cb119-7" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(my_function2(<span class="dv">5</span>, <span class="dv">6</span>, z<span class="op">=</span><span class="fl">0.7</span>))  <span class="co"># 使用关键字参数调用函数，输出: 0.06363636363636363</span></span>
<span id="cb119-8"><a href="#cb119-8" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(my_function2(<span class="fl">3.14</span>, <span class="dv">7</span>, <span class="fl">3.5</span>)) <span class="co"># 使用位置参数调用函数，输出: 35.49</span></span>
<span id="cb119-9"><a href="#cb119-9" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(my_function2(<span class="dv">10</span>, <span class="dv">20</span>))       <span class="co"># 使用默认参数调用函数，输出: 45.0</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>0.06363636363636363
35.49
45.0</code></pre>
</div>
</div>
<ul>
<li><em>位置参数</em>：按正确的顺序传递。</li>
<li><em>关键字参数</em>：可以按任意顺序传递，通常带有默认值。</li>
<li>关键字参数必须<em>跟在</em>位置参数之后。</li>
</ul>
</section>
<section id="命名空间作用域和局部函数" class="level2">
<h2 class="anchored" data-anchor-id="命名空间作用域和局部函数">命名空间、作用域和局部函数</h2>
<ul>
<li>函数内的变量位于<em>局部命名空间</em>中（默认）。</li>
<li>局部命名空间：在函数调用时创建，在函数结束时销毁。</li>
</ul>
<div id="aabbaf5a" class="cell" data-execution_count="62">
<div class="sourceCode cell-code" id="cb121"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb121-1"><a href="#cb121-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> func():        <span class="co"># 定义一个函数</span></span>
<span id="cb121-2"><a href="#cb121-2" aria-hidden="true" tabindex="-1"></a>    a <span class="op">=</span> []          <span class="co"># 'a' 是局部变量</span></span>
<span id="cb121-3"><a href="#cb121-3" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">5</span>): <span class="co"># 循环 5 次</span></span>
<span id="cb121-4"><a href="#cb121-4" aria-hidden="true" tabindex="-1"></a>        a.append(i) <span class="co"># 将 i 追加到列表 a 中</span></span>
<span id="cb121-5"><a href="#cb121-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb121-6"><a href="#cb121-6" aria-hidden="true" tabindex="-1"></a>func()             <span class="co"># 调用函数</span></span>
<span id="cb121-7"><a href="#cb121-7" aria-hidden="true" tabindex="-1"></a><span class="co"># print(a)  # 这行代码会引发 NameError: name 'a' is not defined，因为 'a' 在函数外部不可见</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li>可以访问封闭作用域，但要<em>修改</em>它们，请使用 <code>global</code> 或 <code>nonlocal</code>。</li>
</ul>
<div id="55e0fdc0" class="cell" data-execution_count="63">
<div class="sourceCode cell-code" id="cb122"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb122-1"><a href="#cb122-1" aria-hidden="true" tabindex="-1"></a>a <span class="op">=</span> []  <span class="co"># 全局变量</span></span>
<span id="cb122-2"><a href="#cb122-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb122-3"><a href="#cb122-3" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> func2():          <span class="co"># 定义一个函数</span></span>
<span id="cb122-4"><a href="#cb122-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">5</span>): <span class="co"># 循环 5 次</span></span>
<span id="cb122-5"><a href="#cb122-5" aria-hidden="true" tabindex="-1"></a>        a.append(i)  <span class="co"># 修改全局变量 'a'</span></span>
<span id="cb122-6"><a href="#cb122-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb122-7"><a href="#cb122-7" aria-hidden="true" tabindex="-1"></a>func2()            <span class="co"># 调用函数</span></span>
<span id="cb122-8"><a href="#cb122-8" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(a)            <span class="co"># 输出: [0, 1, 2, 3, 4]</span></span>
<span id="cb122-9"><a href="#cb122-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb122-10"><a href="#cb122-10" aria-hidden="true" tabindex="-1"></a>b <span class="op">=</span> <span class="va">None</span> <span class="co"># 全局变量</span></span>
<span id="cb122-11"><a href="#cb122-11" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> bind_b_variable():  <span class="co"># 定义一个函数</span></span>
<span id="cb122-12"><a href="#cb122-12" aria-hidden="true" tabindex="-1"></a>    <span class="kw">global</span> b          <span class="co"># 声明 'b' 为全局变量</span></span>
<span id="cb122-13"><a href="#cb122-13" aria-hidden="true" tabindex="-1"></a>    b <span class="op">=</span> []           <span class="co"># 将空列表赋值给全局变量 'b'</span></span>
<span id="cb122-14"><a href="#cb122-14" aria-hidden="true" tabindex="-1"></a>bind_b_variable()     <span class="co"># 调用函数</span></span>
<span id="cb122-15"><a href="#cb122-15" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(b)            <span class="co"># 输出: []</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[0, 1, 2, 3, 4]
[]</code></pre>
</div>
</div>
<div class="callout callout-style-default callout-caution callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Caution
</div>
</div>
<div class="callout-body-container callout-body">
<p>尽量减少 <code>global</code> 的使用。更好的设计可以减少对全局状态的依赖。</p>
</div>
</div>
</section>
<section id="返回多个值" class="level2">
<h2 class="anchored" data-anchor-id="返回多个值">返回多个值</h2>
<div id="81f1d53e" class="cell" data-execution_count="64">
<div class="sourceCode cell-code" id="cb124"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb124-1"><a href="#cb124-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> f():             <span class="co"># 定义一个函数</span></span>
<span id="cb124-2"><a href="#cb124-2" aria-hidden="true" tabindex="-1"></a>    a <span class="op">=</span> <span class="dv">5</span>            <span class="co"># 局部变量</span></span>
<span id="cb124-3"><a href="#cb124-3" aria-hidden="true" tabindex="-1"></a>    b <span class="op">=</span> <span class="dv">6</span>            <span class="co"># 局部变量</span></span>
<span id="cb124-4"><a href="#cb124-4" aria-hidden="true" tabindex="-1"></a>    c <span class="op">=</span> <span class="dv">7</span>            <span class="co"># 局部变量</span></span>
<span id="cb124-5"><a href="#cb124-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> a, b, c  <span class="co"># 返回一个元组</span></span>
<span id="cb124-6"><a href="#cb124-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb124-7"><a href="#cb124-7" aria-hidden="true" tabindex="-1"></a>x, y, z <span class="op">=</span> f()        <span class="co"># 调用函数，并将返回的元组解包到变量 x, y, z 中</span></span>
<span id="cb124-8"><a href="#cb124-8" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(x, y, z)      <span class="co"># 输出: 5 6 7</span></span>
<span id="cb124-9"><a href="#cb124-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb124-10"><a href="#cb124-10" aria-hidden="true" tabindex="-1"></a><span class="co"># 或者返回一个字典</span></span>
<span id="cb124-11"><a href="#cb124-11" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> f2():</span>
<span id="cb124-12"><a href="#cb124-12" aria-hidden="true" tabindex="-1"></a>  a <span class="op">=</span> <span class="dv">5</span></span>
<span id="cb124-13"><a href="#cb124-13" aria-hidden="true" tabindex="-1"></a>  b <span class="op">=</span> <span class="dv">6</span></span>
<span id="cb124-14"><a href="#cb124-14" aria-hidden="true" tabindex="-1"></a>  c <span class="op">=</span> <span class="dv">7</span></span>
<span id="cb124-15"><a href="#cb124-15" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> {<span class="st">'a'</span> : a, <span class="st">'b'</span> : b, <span class="st">'c'</span> : c} <span class="co"># 返回值改为字典</span></span>
<span id="cb124-16"><a href="#cb124-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb124-17"><a href="#cb124-17" aria-hidden="true" tabindex="-1"></a>result <span class="op">=</span> f2()</span>
<span id="cb124-18"><a href="#cb124-18" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(result) <span class="co"># 输出: {'a': 5, 'b': 6, 'c': 7}</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>5 6 7
{'a': 5, 'b': 6, 'c': 7}</code></pre>
</div>
</div>
</section>
<section id="函数是对象" class="level2">
<h2 class="anchored" data-anchor-id="函数是对象">函数是对象</h2>
<p>函数是一等公民：</p>
<ul>
<li>可以作为参数传递。</li>
<li>可以赋值给变量。</li>
<li>可以从其他函数返回。</li>
</ul>
<div id="ca4da1b9" class="cell" data-execution_count="65">
<div class="sourceCode cell-code" id="cb126"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb126-1"><a href="#cb126-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> re  <span class="co"># 导入正则表达式模块</span></span>
<span id="cb126-2"><a href="#cb126-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb126-3"><a href="#cb126-3" aria-hidden="true" tabindex="-1"></a>states <span class="op">=</span> [<span class="st">'   Alabama '</span>, <span class="st">'Georgia!'</span>, <span class="st">'Georgia'</span>, <span class="st">'georgia'</span>, <span class="st">'FlOrIda'</span>,</span>
<span id="cb126-4"><a href="#cb126-4" aria-hidden="true" tabindex="-1"></a>          <span class="st">'south   carolina##'</span>, <span class="st">'West virginia?'</span>] <span class="co"># 列表</span></span>
<span id="cb126-5"><a href="#cb126-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb126-6"><a href="#cb126-6" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> clean_strings(strings):          <span class="co"># 定义一个函数，用于清理字符串列表</span></span>
<span id="cb126-7"><a href="#cb126-7" aria-hidden="true" tabindex="-1"></a>    result <span class="op">=</span> []                      <span class="co"># 创建一个空列表</span></span>
<span id="cb126-8"><a href="#cb126-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> value <span class="kw">in</span> strings:            <span class="co"># 遍历列表中的每个字符串</span></span>
<span id="cb126-9"><a href="#cb126-9" aria-hidden="true" tabindex="-1"></a>        value <span class="op">=</span> value.strip()         <span class="co"># 去除字符串两端的空格</span></span>
<span id="cb126-10"><a href="#cb126-10" aria-hidden="true" tabindex="-1"></a>        value <span class="op">=</span> re.sub(<span class="st">'[!#?]'</span>, <span class="st">''</span>, value) <span class="co"># 使用正则表达式去除标点符号</span></span>
<span id="cb126-11"><a href="#cb126-11" aria-hidden="true" tabindex="-1"></a>        value <span class="op">=</span> value.title()         <span class="co"># 将字符串转换为标题格式</span></span>
<span id="cb126-12"><a href="#cb126-12" aria-hidden="true" tabindex="-1"></a>        result.append(value)          <span class="co"># 将处理后的字符串添加到列表中</span></span>
<span id="cb126-13"><a href="#cb126-13" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> result                    <span class="co"># 返回处理后的列表</span></span>
<span id="cb126-14"><a href="#cb126-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb126-15"><a href="#cb126-15" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(clean_strings(states)) <span class="co">#输出: ['Alabama', 'Georgia', 'Georgia', 'Georgia', 'Florida', 'South Carolina', 'West Virginia']</span></span>
<span id="cb126-16"><a href="#cb126-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb126-17"><a href="#cb126-17" aria-hidden="true" tabindex="-1"></a><span class="co"># 替代方案：函数列表</span></span>
<span id="cb126-18"><a href="#cb126-18" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> remove_punctuation(value):            <span class="co"># 定义一个函数，用于去除标点符号</span></span>
<span id="cb126-19"><a href="#cb126-19" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> re.sub(<span class="st">'[!#?]'</span>, <span class="st">''</span>, value)  <span class="co"># 使用正则表达式去除标点符号</span></span>
<span id="cb126-20"><a href="#cb126-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb126-21"><a href="#cb126-21" aria-hidden="true" tabindex="-1"></a>clean_ops <span class="op">=</span> [<span class="bu">str</span>.strip, remove_punctuation, <span class="bu">str</span>.title] <span class="co"># 定义一个函数列表</span></span>
<span id="cb126-22"><a href="#cb126-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb126-23"><a href="#cb126-23" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> clean_strings_functional(strings, ops): <span class="co"># 定义一个函数，接受字符串列表和操作列表</span></span>
<span id="cb126-24"><a href="#cb126-24" aria-hidden="true" tabindex="-1"></a>    result <span class="op">=</span> []                         <span class="co"># 创建一个空列表</span></span>
<span id="cb126-25"><a href="#cb126-25" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> value <span class="kw">in</span> strings:               <span class="co"># 遍历字符串列表中的每个字符串</span></span>
<span id="cb126-26"><a href="#cb126-26" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> function <span class="kw">in</span> ops:            <span class="co"># 遍历操作列表中的每个函数</span></span>
<span id="cb126-27"><a href="#cb126-27" aria-hidden="true" tabindex="-1"></a>            value <span class="op">=</span> function(value)     <span class="co"># 对字符串应用函数</span></span>
<span id="cb126-28"><a href="#cb126-28" aria-hidden="true" tabindex="-1"></a>        result.append(value)           <span class="co"># 将处理后的字符串添加到列表中</span></span>
<span id="cb126-29"><a href="#cb126-29" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> result                     <span class="co"># 返回处理后的列表</span></span>
<span id="cb126-30"><a href="#cb126-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb126-31"><a href="#cb126-31" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(clean_strings_functional(states, clean_ops)) <span class="co">#输出: ['Alabama', 'Georgia', 'Georgia', 'Georgia', 'Florida', 'South Carolina', 'West Virginia']</span></span>
<span id="cb126-32"><a href="#cb126-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb126-33"><a href="#cb126-33" aria-hidden="true" tabindex="-1"></a><span class="co"># 将函数与 map 结合使用：</span></span>
<span id="cb126-34"><a href="#cb126-34" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> x <span class="kw">in</span> <span class="bu">map</span>(remove_punctuation, states): <span class="co"># 使用 map 函数对列表中的每个字符串应用 remove_punctuation 函数</span></span>
<span id="cb126-35"><a href="#cb126-35" aria-hidden="true" tabindex="-1"></a>  <span class="bu">print</span>(x)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>['Alabama', 'Georgia', 'Georgia', 'Georgia', 'Florida', 'South   Carolina', 'West Virginia']
['Alabama', 'Georgia', 'Georgia', 'Georgia', 'Florida', 'South   Carolina', 'West Virginia']
   Alabama 
Georgia
Georgia
georgia
FlOrIda
south   carolina
West virginia</code></pre>
</div>
</div>
<p>这种方式很灵活，而且可以重用。</p>
</section>
<section id="匿名-lambda-函数" class="level1">
<h1>匿名 (Lambda) 函数</h1>
<div id="ff26da43" class="cell" data-execution_count="66">
<div class="sourceCode cell-code" id="cb128"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb128-1"><a href="#cb128-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 使用 `lambda` 定义小型匿名函数：</span></span>
<span id="cb128-2"><a href="#cb128-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb128-3"><a href="#cb128-3" aria-hidden="true" tabindex="-1"></a><span class="co"># 等效于：</span></span>
<span id="cb128-4"><a href="#cb128-4" aria-hidden="true" tabindex="-1"></a><span class="co"># def short_function(x):</span></span>
<span id="cb128-5"><a href="#cb128-5" aria-hidden="true" tabindex="-1"></a><span class="co">#     return x * 2</span></span>
<span id="cb128-6"><a href="#cb128-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb128-7"><a href="#cb128-7" aria-hidden="true" tabindex="-1"></a>equiv_anon <span class="op">=</span> <span class="kw">lambda</span> x: x <span class="op">*</span> <span class="dv">2</span>  <span class="co"># 定义一个 lambda 函数，接受一个参数 x，返回 x * 2</span></span>
<span id="cb128-8"><a href="#cb128-8" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(equiv_anon(<span class="dv">4</span>))          <span class="co"># 输出: 8</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>8</code></pre>
</div>
</div>
<p>用于传递短函数很方便：</p>
<div id="9d4447b4" class="cell" data-execution_count="67">
<div class="sourceCode cell-code" id="cb130"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb130-1"><a href="#cb130-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> apply_to_list(some_list, f):      <span class="co"># 定义一个函数，接受一个列表和一个函数作为参数</span></span>
<span id="cb130-2"><a href="#cb130-2" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> [f(x) <span class="cf">for</span> x <span class="kw">in</span> some_list] <span class="co"># 对列表中的每个元素应用函数 f，并返回结果列表</span></span>
<span id="cb130-3"><a href="#cb130-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb130-4"><a href="#cb130-4" aria-hidden="true" tabindex="-1"></a>ints <span class="op">=</span> [<span class="dv">4</span>, <span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">5</span>, <span class="dv">6</span>]            <span class="co"># 创建一个整数列表</span></span>
<span id="cb130-5"><a href="#cb130-5" aria-hidden="true" tabindex="-1"></a>result <span class="op">=</span> apply_to_list(ints, <span class="kw">lambda</span> x: x <span class="op">*</span> <span class="dv">2</span>) <span class="co"># 将 lambda 函数作为参数传递</span></span>
<span id="cb130-6"><a href="#cb130-6" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(result)                     <span class="co"># 输出: [8, 0, 2, 10, 12]</span></span>
<span id="cb130-7"><a href="#cb130-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb130-8"><a href="#cb130-8" aria-hidden="true" tabindex="-1"></a>strings <span class="op">=</span> [<span class="st">'foo'</span>, <span class="st">'card'</span>, <span class="st">'bar'</span>, <span class="st">'aaaa'</span>, <span class="st">'abab'</span>] <span class="co"># 创建一个字符串列表</span></span>
<span id="cb130-9"><a href="#cb130-9" aria-hidden="true" tabindex="-1"></a>strings.sort(key<span class="op">=</span><span class="kw">lambda</span> x: <span class="bu">len</span>(<span class="bu">set</span>(x))) <span class="co"># 使用 lambda 函数作为 key，按照字符串中不同字符的数量排序</span></span>
<span id="cb130-10"><a href="#cb130-10" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(strings)                          <span class="co"># 输出: ['aaaa', 'foo', 'abab', 'bar', 'card']</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[8, 0, 2, 10, 12]
['aaaa', 'foo', 'abab', 'bar', 'card']</code></pre>
</div>
</div>
<section id="生成器" class="level2">
<h2 class="anchored" data-anchor-id="生成器">生成器</h2>
<p>生成器<em>按需</em>生成值（节省内存）。</p>
<div id="4cedba91" class="cell" data-execution_count="68">
<div class="sourceCode cell-code" id="cb132"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb132-1"><a href="#cb132-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> squares(n<span class="op">=</span><span class="dv">10</span>):                         <span class="co"># 定义一个生成器函数，生成 1 到 n^2 的平方数</span></span>
<span id="cb132-2"><a href="#cb132-2" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">'Generating squares from 1 to </span><span class="sc">%d</span><span class="st">'</span> <span class="op">%</span> n <span class="op">**</span> <span class="dv">2</span>) <span class="co"># 打印一条消息</span></span>
<span id="cb132-3"><a href="#cb132-3" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">1</span>, n <span class="op">+</span> <span class="dv">1</span>):             <span class="co"># 循环 1 到 n</span></span>
<span id="cb132-4"><a href="#cb132-4" aria-hidden="true" tabindex="-1"></a>        <span class="cf">yield</span> i <span class="op">**</span> <span class="dv">2</span>                      <span class="co"># 使用 yield 产生 i 的平方</span></span>
<span id="cb132-5"><a href="#cb132-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb132-6"><a href="#cb132-6" aria-hidden="true" tabindex="-1"></a>gen <span class="op">=</span> squares()                          <span class="co"># 创建一个生成器对象</span></span>
<span id="cb132-7"><a href="#cb132-7" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(gen)                             <span class="co"># 输出: &lt;generator object squares at 0x...&gt; （生成器对象）</span></span>
<span id="cb132-8"><a href="#cb132-8" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> x <span class="kw">in</span> gen:                          <span class="co"># 请求值</span></span>
<span id="cb132-9"><a href="#cb132-9" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(x, end<span class="op">=</span><span class="st">' '</span>)                   <span class="co"># 输出: 1 4 9 16 25 36 49 64 81 100</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>&lt;generator object squares at 0x7f12bc4b19a0&gt;
Generating squares from 1 to 100
1 4 9 16 25 36 49 64 81 100 </code></pre>
</div>
</div>
<ul>
<li>使用 <code>yield</code> 而不是 <code>return</code>。</li>
<li>不会立即执行。</li>
</ul>
</section>
<section id="生成器表达式" class="level2">
<h2 class="anchored" data-anchor-id="生成器表达式">生成器表达式</h2>
<p>简洁的生成器（类似于推导式）：</p>
<div id="a87a0ebe" class="cell" data-execution_count="69">
<div class="sourceCode cell-code" id="cb134"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb134-1"><a href="#cb134-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 列表推导式：[x ** 2 for x in range(100)]</span></span>
<span id="cb134-2"><a href="#cb134-2" aria-hidden="true" tabindex="-1"></a>gen <span class="op">=</span> (x <span class="op">**</span> <span class="dv">2</span> <span class="cf">for</span> x <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">100</span>)) <span class="co"># 使用圆括号创建生成器表达式</span></span>
<span id="cb134-3"><a href="#cb134-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(gen)                      <span class="co"># 输出: &lt;generator object &lt;genexpr&gt; at 0x...&gt; （生成器对象）</span></span>
<span id="cb134-4"><a href="#cb134-4" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="bu">sum</span>(gen))                 <span class="co"># 输出: 328350</span></span>
<span id="cb134-5"><a href="#cb134-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb134-6"><a href="#cb134-6" aria-hidden="true" tabindex="-1"></a><span class="co"># 作为函数参数：</span></span>
<span id="cb134-7"><a href="#cb134-7" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="bu">sum</span>(x <span class="op">**</span> <span class="dv">2</span> <span class="cf">for</span> x <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">100</span>)))   <span class="co"># 将生成器表达式作为参数传递给 sum 函数，输出: 328350</span></span>
<span id="cb134-8"><a href="#cb134-8" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="bu">dict</span>((i, i <span class="op">**</span><span class="dv">2</span>) <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">5</span>))) <span class="co"># 将生成器表达式作为参数传递给 dict 函数，输出: {0: 0, 1: 1, 2: 4, 3: 9, 4: 16}</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>&lt;generator object &lt;genexpr&gt; at 0x7f12e87fe9b0&gt;
328350
328350
{0: 0, 1: 1, 2: 4, 3: 9, 4: 16}</code></pre>
</div>
</div>
</section>
<section id="itertools-模块" class="level2">
<h2 class="anchored" data-anchor-id="itertools-模块">itertools 模块</h2>
<p><code>itertools</code> 提供了有用的生成器：</p>
<div id="946b32d1" class="cell" data-execution_count="70">
<div class="sourceCode cell-code" id="cb136"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb136-1"><a href="#cb136-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> itertools <span class="co"># 导入 itertools 模块</span></span>
<span id="cb136-2"><a href="#cb136-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-3"><a href="#cb136-3" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> first_letter(x):   <span class="co"># 定义一个函数，返回字符串的第一个字母</span></span>
<span id="cb136-4"><a href="#cb136-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> x[<span class="dv">0</span>]</span>
<span id="cb136-5"><a href="#cb136-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-6"><a href="#cb136-6" aria-hidden="true" tabindex="-1"></a>names <span class="op">=</span> [<span class="st">'Alan'</span>, <span class="st">'Adam'</span>, <span class="st">'Wes'</span>, <span class="st">'Will'</span>, <span class="st">'Albert'</span>, <span class="st">'Steven'</span>] <span class="co"># 创建一个名字列表</span></span>
<span id="cb136-7"><a href="#cb136-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-8"><a href="#cb136-8" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> letter, names_iter <span class="kw">in</span> itertools.groupby(names, first_letter): <span class="co"># 使用 itertools.groupby 按首字母分组</span></span>
<span id="cb136-9"><a href="#cb136-9" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(letter, <span class="bu">list</span>(names_iter)) <span class="co"># 输出每组的首字母和名字列表</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>A ['Alan', 'Adam']
W ['Wes', 'Will']
A ['Albert']
S ['Steven']</code></pre>
</div>
</div>
<p><code>itertools.groupby</code> 对连续的元素进行分组。</p>
</section>
<section id="有用的-itertools-函数" class="level2">
<h2 class="anchored" data-anchor-id="有用的-itertools-函数">有用的 itertools 函数</h2>
<table class="caption-top table">
<colgroup>
<col style="width: 2%">
<col style="width: 97%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">函数</th>
<th style="text-align: left;">描述</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><code>chain(*iterables)</code></td>
<td style="text-align: left;">链接迭代器。</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>combinations(iterable, k)</code></td>
<td style="text-align: left;">生成长度为 k 的组合，忽略顺序，不放回。</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>permutations(iterable, k)</code></td>
<td style="text-align: left;">生成长度为 k 的排列，考虑顺序。</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>groupby(iterable[, keyfunc])</code></td>
<td style="text-align: left;">为每个唯一键生成 (key, sub-iterator)。</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>product(*iterables, repeat=1)</code></td>
<td style="text-align: left;">生成笛卡尔积（类似于嵌套 for 循环）。</td>
</tr>
</tbody>
</table>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>查看 <code>itertools</code> 文档！这是一个宝库！💎</p>
</div>
</div>
</section>
<section id="错误和异常处理" class="level2">
<h2 class="anchored" data-anchor-id="错误和异常处理">错误和异常处理</h2>
<p>处理错误对于健壮的代码至关重要。</p>
</section>
<section id="try-except-块" class="level2">
<h2 class="anchored" data-anchor-id="try-except-块">try-except 块</h2>
<div id="ae554b70" class="cell" data-execution_count="71">
<div class="sourceCode cell-code" id="cb138"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb138-1"><a href="#cb138-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> attempt_float(x):  <span class="co"># 定义一个函数，尝试将输入转换为浮点数</span></span>
<span id="cb138-2"><a href="#cb138-2" aria-hidden="true" tabindex="-1"></a>    <span class="cf">try</span>:               <span class="co"># 尝试执行以下代码块</span></span>
<span id="cb138-3"><a href="#cb138-3" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="bu">float</span>(x) <span class="co"># 将 x 转换为浮点数并返回</span></span>
<span id="cb138-4"><a href="#cb138-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">except</span>:            <span class="co"># 如果发生任何异常，则执行以下代码块</span></span>
<span id="cb138-5"><a href="#cb138-5" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> x       <span class="co"># 返回原始输入</span></span>
<span id="cb138-6"><a href="#cb138-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb138-7"><a href="#cb138-7" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(attempt_float(<span class="st">'1.2345'</span>))    <span class="co"># 输出: 1.2345</span></span>
<span id="cb138-8"><a href="#cb138-8" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(attempt_float(<span class="st">'something'</span>)) <span class="co"># 输出: something</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>1.2345
something</code></pre>
</div>
</div>
<ul>
<li><code>try</code>: 可能引发异常的代码。</li>
<li><code>except</code>: 如果发生异常，则执行。</li>
</ul>
</section>
<section id="捕获特定异常" class="level2">
<h2 class="anchored" data-anchor-id="捕获特定异常">捕获特定异常</h2>
<div id="1f87cb25" class="cell" data-execution_count="72">
<div class="sourceCode cell-code" id="cb140"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb140-1"><a href="#cb140-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> attempt_float2(x):         <span class="co"># 定义一个函数，尝试将输入转换为浮点数</span></span>
<span id="cb140-2"><a href="#cb140-2" aria-hidden="true" tabindex="-1"></a>    <span class="cf">try</span>:                      <span class="co"># 尝试执行以下代码块</span></span>
<span id="cb140-3"><a href="#cb140-3" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="bu">float</span>(x)        <span class="co"># 将 x 转换为浮点数并返回</span></span>
<span id="cb140-4"><a href="#cb140-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">except</span> <span class="pp">ValueError</span>:       <span class="co"># 如果发生 ValueError 异常，则执行以下代码块</span></span>
<span id="cb140-5"><a href="#cb140-5" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> x              <span class="co"># 返回原始输入</span></span>
<span id="cb140-6"><a href="#cb140-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb140-7"><a href="#cb140-7" aria-hidden="true" tabindex="-1"></a><span class="co"># print(attempt_float2((1, 2)))  # 这行代码会引发 TypeError，因为没有捕获 TypeError 异常</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>指定异常类型（首选）。</p>
</section>
<section id="捕获多个异常类型" class="level2">
<h2 class="anchored" data-anchor-id="捕获多个异常类型">捕获多个异常类型</h2>
<div id="5bcae851" class="cell" data-execution_count="73">
<div class="sourceCode cell-code" id="cb141"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb141-1"><a href="#cb141-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> attempt_float3(x):                 <span class="co"># 定义一个函数，尝试将输入转换为浮点数</span></span>
<span id="cb141-2"><a href="#cb141-2" aria-hidden="true" tabindex="-1"></a>    <span class="cf">try</span>:                              <span class="co"># 尝试执行以下代码块</span></span>
<span id="cb141-3"><a href="#cb141-3" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="bu">float</span>(x)                <span class="co"># 将 x 转换为浮点数并返回</span></span>
<span id="cb141-4"><a href="#cb141-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">except</span> (<span class="pp">TypeError</span>, <span class="pp">ValueError</span>):  <span class="co"># 如果发生 TypeError 或 ValueError 异常，则执行以下代码块</span></span>
<span id="cb141-5"><a href="#cb141-5" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> x                      <span class="co"># 返回原始输入</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>使用元组捕获多种类型的异常。</p>
</section>
<section id="finally-和-else" class="level2">
<h2 class="anchored" data-anchor-id="finally-和-else">finally 和 else</h2>
<ul>
<li><code>finally</code>: <em>始终</em>执行（清理）。</li>
<li><code>else</code>: 如果 <code>try</code> 块<em>没有</em>引发异常，则执行。</li>
</ul>
<div id="6296372c" class="cell" data-execution_count="74">
<div class="sourceCode cell-code" id="cb142"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb142-1"><a href="#cb142-1" aria-hidden="true" tabindex="-1"></a>f <span class="op">=</span> <span class="bu">open</span>(<span class="st">"tempfile.txt"</span>, mode <span class="op">=</span> <span class="st">"w"</span>) <span class="co"># 创建一个临时文件</span></span>
<span id="cb142-2"><a href="#cb142-2" aria-hidden="true" tabindex="-1"></a><span class="cf">try</span>:</span>
<span id="cb142-3"><a href="#cb142-3" aria-hidden="true" tabindex="-1"></a>    <span class="co"># write_to_file(f) # 假设 write_to_file 是一个可能出错的函数</span></span>
<span id="cb142-4"><a href="#cb142-4" aria-hidden="true" tabindex="-1"></a>    f.write(<span class="st">"example text"</span>)  <span class="co"># 写入</span></span>
<span id="cb142-5"><a href="#cb142-5" aria-hidden="true" tabindex="-1"></a><span class="cf">finally</span>:</span>
<span id="cb142-6"><a href="#cb142-6" aria-hidden="true" tabindex="-1"></a>    f.close()  <span class="co"># 无论是否发生异常，都关闭文件</span></span>
<span id="cb142-7"><a href="#cb142-7" aria-hidden="true" tabindex="-1"></a>    <span class="im">import</span> os</span>
<span id="cb142-8"><a href="#cb142-8" aria-hidden="true" tabindex="-1"></a>    os.remove(<span class="st">"tempfile.txt"</span>) <span class="co"># 删除临时文件</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="dba03ae3" class="cell" data-execution_count="75">
<div class="sourceCode cell-code" id="cb143"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb143-1"><a href="#cb143-1" aria-hidden="true" tabindex="-1"></a>f <span class="op">=</span> <span class="bu">open</span>(<span class="st">"tempfile.txt"</span>, mode <span class="op">=</span> <span class="st">"w"</span>) <span class="co"># 创建一个临时文件</span></span>
<span id="cb143-2"><a href="#cb143-2" aria-hidden="true" tabindex="-1"></a><span class="cf">try</span>:</span>
<span id="cb143-3"><a href="#cb143-3" aria-hidden="true" tabindex="-1"></a>    <span class="co">#write_to_file(f) # 假设 write_to_file 是一个可能出错的函数</span></span>
<span id="cb143-4"><a href="#cb143-4" aria-hidden="true" tabindex="-1"></a>    f.write(<span class="st">"example text"</span>) <span class="co">#写入</span></span>
<span id="cb143-5"><a href="#cb143-5" aria-hidden="true" tabindex="-1"></a><span class="cf">except</span>:</span>
<span id="cb143-6"><a href="#cb143-6" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">'Failed'</span>) <span class="co"># 捕获异常时输出</span></span>
<span id="cb143-7"><a href="#cb143-7" aria-hidden="true" tabindex="-1"></a><span class="cf">else</span>:</span>
<span id="cb143-8"><a href="#cb143-8" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">'Succeeded'</span>) <span class="co"># 没有捕获到异常时输出</span></span>
<span id="cb143-9"><a href="#cb143-9" aria-hidden="true" tabindex="-1"></a><span class="cf">finally</span>:</span>
<span id="cb143-10"><a href="#cb143-10" aria-hidden="true" tabindex="-1"></a>    f.close() <span class="co"># 无论是否有异常，都关闭文件</span></span>
<span id="cb143-11"><a href="#cb143-11" aria-hidden="true" tabindex="-1"></a>    <span class="im">import</span> os</span>
<span id="cb143-12"><a href="#cb143-12" aria-hidden="true" tabindex="-1"></a>    os.remove(<span class="st">"tempfile.txt"</span>) <span class="co"># 删除临时文件</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Succeeded</code></pre>
</div>
</div>
</section>
<section id="ipython-中的异常" class="level2">
<h2 class="anchored" data-anchor-id="ipython-中的异常">IPython 中的异常</h2>
<p>IPython 提供了有用的回溯信息。使用 <code>%xmode</code> 控制详细程度（Plain、Context、Verbose）。</p>
</section>
<section id="文件和操作系统" class="level2">
<h2 class="anchored" data-anchor-id="文件和操作系统">3.3 文件和操作系统</h2>
</section>
<section id="打开文件-open" class="level2">
<h2 class="anchored" data-anchor-id="打开文件-open">打开文件 (open)</h2>
<div id="c5b40bb3" class="cell" data-execution_count="76">
<div class="sourceCode cell-code" id="cb145"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb145-1"><a href="#cb145-1" aria-hidden="true" tabindex="-1"></a>path <span class="op">=</span> <span class="st">'examples/segismundo.txt'</span> <span class="co"># 设置文件路径（请确保此文件存在）</span></span>
<span id="cb145-2"><a href="#cb145-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb145-3"><a href="#cb145-3" aria-hidden="true" tabindex="-1"></a><span class="co"># 默认编码因平台而异，最好明确指定。</span></span>
<span id="cb145-4"><a href="#cb145-4" aria-hidden="true" tabindex="-1"></a>f <span class="op">=</span> <span class="bu">open</span>(path, encoding<span class="op">=</span><span class="st">'utf-8'</span>)  <span class="co"># 以读取模式打开文件（'r' 是默认模式），指定编码为 utf-8</span></span>
<span id="cb145-5"><a href="#cb145-5" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> line <span class="kw">in</span> f:                   <span class="co"># 逐行读取文件</span></span>
<span id="cb145-6"><a href="#cb145-6" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(line.rstrip())         <span class="co"># 移除每行末尾的空白字符并打印</span></span>
<span id="cb145-7"><a href="#cb145-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb145-8"><a href="#cb145-8" aria-hidden="true" tabindex="-1"></a>f.close()                        <span class="co"># 关闭文件</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Sueña el rico en su riqueza,
que más cuidados le ofrece;

sueña el pobre que padece
su miseria y su pobreza;

sueña el que a medrar empieza,
sueña el que afana y pretende,
sueña el que agravia y ofende,

y en el mundo, en conclusión,
todos sueñan lo que son,
aunque ninguno lo entiende.
</code></pre>
</div>
</div>
<ul>
<li><code>open(path, mode='r', encoding=None)</code>
<ul>
<li><code>path</code>: 文件路径。</li>
<li><code>mode</code>: ‘r’ (读取), ‘w’ (写入), ‘a’ (追加), ‘x’ (创建), ‘rb’, ‘wb’ 等。</li>
<li><code>encoding</code>: 文件编码 (例如, ‘utf-8’)。</li>
</ul></li>
<li><em>关闭</em>文件：<code>f.close()</code>。</li>
</ul>
</section>
<section id="从文件中读取" class="level2">
<h2 class="anchored" data-anchor-id="从文件中读取">从文件中读取</h2>
<div id="0f10af63" class="cell" data-execution_count="77">
<div class="sourceCode cell-code" id="cb147"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb147-1"><a href="#cb147-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 读取所有行</span></span>
<span id="cb147-2"><a href="#cb147-2" aria-hidden="true" tabindex="-1"></a>f <span class="op">=</span> <span class="bu">open</span>(path, encoding<span class="op">=</span><span class="st">"utf-8"</span>)      <span class="co"># 以读取模式打开文件，指定编码为 utf-8</span></span>
<span id="cb147-3"><a href="#cb147-3" aria-hidden="true" tabindex="-1"></a>lines <span class="op">=</span> [x.rstrip() <span class="cf">for</span> x <span class="kw">in</span> f]      <span class="co"># 读取所有行，移除每行末尾的空白字符，并存储在列表中</span></span>
<span id="cb147-4"><a href="#cb147-4" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(lines)                           <span class="co"># 打印所有行</span></span>
<span id="cb147-5"><a href="#cb147-5" aria-hidden="true" tabindex="-1"></a>f.close()                            <span class="co"># 关闭文件</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>['Sueña el rico en su riqueza,', 'que más cuidados le ofrece;', '', 'sueña el pobre que padece', 'su miseria y su pobreza;', '', 'sueña el que a medrar empieza,', 'sueña el que afana y pretende,', 'sueña el que agravia y ofende,', '', 'y en el mundo, en conclusión,', 'todos sueñan lo que son,', 'aunque ninguno lo entiende.', '']</code></pre>
</div>
</div>
</section>
<section id="使用-with-语句自动关闭文件" class="level2">
<h2 class="anchored" data-anchor-id="使用-with-语句自动关闭文件">使用 with 语句自动关闭文件</h2>
<p><code>with</code> 语句会自动关闭文件：</p>
<div id="37724cb2" class="cell" data-execution_count="78">
<div class="sourceCode cell-code" id="cb149"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb149-1"><a href="#cb149-1" aria-hidden="true" tabindex="-1"></a><span class="cf">with</span> <span class="bu">open</span>(path, encoding<span class="op">=</span><span class="st">"utf-8"</span>) <span class="im">as</span> f: <span class="co"># 使用 with 语句打开文件，指定编码为 utf-8</span></span>
<span id="cb149-2"><a href="#cb149-2" aria-hidden="true" tabindex="-1"></a>    lines <span class="op">=</span> [x.rstrip() <span class="cf">for</span> x <span class="kw">in</span> f]  <span class="co"># 读取所有行，移除每行末尾的空白字符，并存储在列表中</span></span>
<span id="cb149-3"><a href="#cb149-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(lines)                         <span class="co"># 打印所有行</span></span>
<span id="cb149-4"><a href="#cb149-4" aria-hidden="true" tabindex="-1"></a><span class="co"># 'f' 在这里自动关闭</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>['Sueña el rico en su riqueza,', 'que más cuidados le ofrece;', '', 'sueña el pobre que padece', 'su miseria y su pobreza;', '', 'sueña el que a medrar empieza,', 'sueña el que afana y pretende,', 'sueña el que agravia y ofende,', '', 'y en el mundo, en conclusión,', 'todos sueñan lo que son,', 'aunque ninguno lo entiende.', '']</code></pre>
</div>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Tip
</div>
</div>
<div class="callout-body-container callout-body">
<p>使用 <code>with</code>！即使出现错误，它也能确保清理。</p>
</div>
</div>
</section>
<section id="文件模式" class="level2">
<h2 class="anchored" data-anchor-id="文件模式">文件模式</h2>
<table class="caption-top table">
<colgroup>
<col style="width: 4%">
<col style="width: 95%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">模式</th>
<th style="text-align: left;">描述</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">r</td>
<td style="text-align: left;">只读</td>
</tr>
<tr class="even">
<td style="text-align: left;">w</td>
<td style="text-align: left;">只写；创建新文件（擦除现有文件）</td>
</tr>
<tr class="odd">
<td style="text-align: left;">x</td>
<td style="text-align: left;">只写；创建新文件</td>
</tr>
<tr class="even">
<td style="text-align: left;">a</td>
<td style="text-align: left;">追加到现有文件（如果需要，创建新文件）</td>
</tr>
<tr class="odd">
<td style="text-align: left;">r+</td>
<td style="text-align: left;">读写</td>
</tr>
<tr class="even">
<td style="text-align: left;">b</td>
<td style="text-align: left;">二进制模式（添加到模式：‘rb’, ‘wb’）</td>
</tr>
<tr class="odd">
<td style="text-align: left;">t</td>
<td style="text-align: left;">文本模式（解码字节）；默认</td>
</tr>
</tbody>
</table>
</section>
<section id="read-seek-和-tell" class="level2">
<h2 class="anchored" data-anchor-id="read-seek-和-tell">read, seek 和 tell</h2>
<div id="266bcd90" class="cell" data-execution_count="79">
<div class="sourceCode cell-code" id="cb151"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb151-1"><a href="#cb151-1" aria-hidden="true" tabindex="-1"></a>f1 <span class="op">=</span> <span class="bu">open</span>(path, encoding <span class="op">=</span> <span class="st">"utf-8"</span>)  <span class="co"># 以文本模式打开文件，指定编码为 utf-8</span></span>
<span id="cb151-2"><a href="#cb151-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(f1.read(<span class="dv">10</span>))                <span class="co"># 读取 10 个*字符*</span></span>
<span id="cb151-3"><a href="#cb151-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb151-4"><a href="#cb151-4" aria-hidden="true" tabindex="-1"></a>f2 <span class="op">=</span> <span class="bu">open</span>(path, mode<span class="op">=</span><span class="st">'rb'</span>)        <span class="co"># 以二进制模式打开文件</span></span>
<span id="cb151-5"><a href="#cb151-5" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(f2.read(<span class="dv">10</span>))                <span class="co"># 读取 10 个*字节*</span></span>
<span id="cb151-6"><a href="#cb151-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb151-7"><a href="#cb151-7" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(f1.tell())                  <span class="co"># 获取当前位置（字符）</span></span>
<span id="cb151-8"><a href="#cb151-8" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(f2.tell())                  <span class="co"># 获取当前位置（字节）</span></span>
<span id="cb151-9"><a href="#cb151-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb151-10"><a href="#cb151-10" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> sys</span>
<span id="cb151-11"><a href="#cb151-11" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(sys.getdefaultencoding())    <span class="co"># 获取默认编码</span></span>
<span id="cb151-12"><a href="#cb151-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb151-13"><a href="#cb151-13" aria-hidden="true" tabindex="-1"></a>f1.seek(<span class="dv">3</span>)                        <span class="co"># 移动到第 3 个字节/字符</span></span>
<span id="cb151-14"><a href="#cb151-14" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(f1.read(<span class="dv">1</span>))                 <span class="co"># 读取 1 个字符</span></span>
<span id="cb151-15"><a href="#cb151-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb151-16"><a href="#cb151-16" aria-hidden="true" tabindex="-1"></a>f1.close()                        <span class="co"># 关闭文件</span></span>
<span id="cb151-17"><a href="#cb151-17" aria-hidden="true" tabindex="-1"></a>f2.close()                        <span class="co"># 关闭文件</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Sueña el r
b'Sue\xc3\xb1a el '
11
10
utf-8
ñ</code></pre>
</div>
</div>
<ul>
<li><code>read(n)</code>: 读取 <code>n</code> 个字符/字节。</li>
<li><code>tell()</code>: 当前位置。</li>
<li><code>seek(position)</code>: 移动指针。</li>
<li>注意 <code>seek</code> 和 UTF-8（多字节字符）。</li>
</ul>
</section>
<section id="写入文件" class="level2">
<h2 class="anchored" data-anchor-id="写入文件">写入文件</h2>
<div id="eccc1055" class="cell" data-execution_count="80">
<div class="sourceCode cell-code" id="cb153"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb153-1"><a href="#cb153-1" aria-hidden="true" tabindex="-1"></a><span class="cf">with</span> <span class="bu">open</span>(<span class="st">'tmp.txt'</span>, <span class="st">'w'</span>, encoding <span class="op">=</span> <span class="st">"utf-8"</span>) <span class="im">as</span> handle:    <span class="co"># 以写入模式打开一个临时文件，指定编码为 utf-8</span></span>
<span id="cb153-2"><a href="#cb153-2" aria-hidden="true" tabindex="-1"></a>     <span class="co"># 将 segismundo.txt 文件中长度大于 1 的行写入 tmp.txt</span></span>
<span id="cb153-3"><a href="#cb153-3" aria-hidden="true" tabindex="-1"></a>    handle.writelines(x <span class="cf">for</span> x <span class="kw">in</span> <span class="bu">open</span>(path, encoding <span class="op">=</span> <span class="st">"utf-8"</span>) <span class="cf">if</span> <span class="bu">len</span>(x) <span class="op">&gt;</span> <span class="dv">1</span>)</span>
<span id="cb153-4"><a href="#cb153-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb153-5"><a href="#cb153-5" aria-hidden="true" tabindex="-1"></a><span class="cf">with</span> <span class="bu">open</span>(<span class="st">'tmp.txt'</span>, encoding <span class="op">=</span> <span class="st">"utf-8"</span>) <span class="im">as</span> f:            <span class="co"># 以读取模式打开临时文件，指定编码为 utf-8</span></span>
<span id="cb153-6"><a href="#cb153-6" aria-hidden="true" tabindex="-1"></a>    lines <span class="op">=</span> f.readlines()                               <span class="co"># 读取所有行</span></span>
<span id="cb153-7"><a href="#cb153-7" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(lines)                                             <span class="co"># 打印所有行</span></span>
<span id="cb153-8"><a href="#cb153-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb153-9"><a href="#cb153-9" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> os</span>
<span id="cb153-10"><a href="#cb153-10" aria-hidden="true" tabindex="-1"></a>os.remove(<span class="st">"tmp.txt"</span>)                                       <span class="co"># 删除临时文件</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>['Sueña el rico en su riqueza,\n', 'que más cuidados le ofrece;\n', 'sueña el pobre que padece\n', 'su miseria y su pobreza;\n', 'sueña el que a medrar empieza,\n', 'sueña el que afana y pretende,\n', 'sueña el que agravia y ofende,\n', 'y en el mundo, en conclusión,\n', 'todos sueñan lo que son,\n', 'aunque ninguno lo entiende.\n']</code></pre>
</div>
</div>
<ul>
<li><code>write(string)</code>: 写入字符串。</li>
<li><code>writelines(list_of_strings)</code>: 写入字符串列表。</li>
</ul>
<p>##重要的文件方法/属性</p>
<table class="caption-top table">
<colgroup>
<col style="width: 5%">
<col style="width: 94%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">方法/属性</th>
<th style="text-align: left;">描述</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><code>read([size])</code></td>
<td style="text-align: left;">返回数据（字节/字符串）。</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>readable()</code></td>
<td style="text-align: left;">如果可读，则返回 <code>True</code>。</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>readlines([size])</code></td>
<td style="text-align: left;">返回行的列表。</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>write(string)</code></td>
<td style="text-align: left;">写入字符串。</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>writable()</code></td>
<td style="text-align: left;">如果可写，则返回 <code>True</code>。</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>writelines(strings)</code></td>
<td style="text-align: left;">写入字符串序列。</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>close()</code></td>
<td style="text-align: left;">关闭文件。</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>flush()</code></td>
<td style="text-align: left;">将缓冲区刷新到磁盘。</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>seek(pos)</code></td>
<td style="text-align: left;">移动到指定位置。</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>seekable()</code></td>
<td style="text-align: left;">如果可寻址，则返回 <code>True</code>。</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>tell()</code></td>
<td style="text-align: left;">返回当前位置。</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>closed</code></td>
<td style="text-align: left;">如果已关闭，则返回 <code>True</code>。</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>encoding</code></td>
<td style="text-align: left;">返回文件编码 (例如, UTF-8)。</td>
</tr>
</tbody>
</table>
</section>
<section id="字节和-unicode-与文件" class="level2">
<h2 class="anchored" data-anchor-id="字节和-unicode-与文件">字节和 Unicode 与文件</h2>
<ul>
<li>默认：<em>文本模式</em>（字符串/Unicode）。</li>
<li><code>mode='rb'</code>/<code>'wb'</code>: <em>二进制模式</em>（字节）。</li>
</ul>
<div id="db791856" class="cell" data-execution_count="81">
<div class="sourceCode cell-code" id="cb155"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb155-1"><a href="#cb155-1" aria-hidden="true" tabindex="-1"></a><span class="cf">with</span> <span class="bu">open</span>(path, encoding <span class="op">=</span> <span class="st">"utf-8"</span>) <span class="im">as</span> f: <span class="co"># 以文本模式打开文件</span></span>
<span id="cb155-2"><a href="#cb155-2" aria-hidden="true" tabindex="-1"></a>    chars <span class="op">=</span> f.read(<span class="dv">10</span>) <span class="co"># 读取前10个字符</span></span>
<span id="cb155-3"><a href="#cb155-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="bu">len</span>(chars)) <span class="co">#输出字符数</span></span>
<span id="cb155-4"><a href="#cb155-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb155-5"><a href="#cb155-5" aria-hidden="true" tabindex="-1"></a><span class="cf">with</span> <span class="bu">open</span>(path, <span class="st">'rb'</span>) <span class="im">as</span> f: <span class="co"># 以二进制模式打开文件</span></span>
<span id="cb155-6"><a href="#cb155-6" aria-hidden="true" tabindex="-1"></a>    data <span class="op">=</span> f.read(<span class="dv">10</span>) <span class="co"># 读取前10个字节</span></span>
<span id="cb155-7"><a href="#cb155-7" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(data)</span>
<span id="cb155-8"><a href="#cb155-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb155-9"><a href="#cb155-9" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(data.decode(<span class="st">'utf-8'</span>))  <span class="co"># 将字节解码为字符串</span></span>
<span id="cb155-10"><a href="#cb155-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb155-11"><a href="#cb155-11" aria-hidden="true" tabindex="-1"></a><span class="co"># print(data[:4].decode('utf-8')) # 这行代码可能会引发 UnicodeDecodeError（不完整的多字节字符）</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>10
b'Sue\xc3\xb1a el '
Sueña el </code></pre>
</div>
</div>
<ul>
<li>UTF-8：可变长度编码。<code>read(n)</code> 个字符 ≠ <code>read(n)</code> 个字节。</li>
<li>二进制：<code>read</code> 返回确切的字节。</li>
<li>解码完整的字符。</li>
</ul>
<div id="d381b9c7" class="cell" data-execution_count="82">
<div class="sourceCode cell-code" id="cb157"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb157-1"><a href="#cb157-1" aria-hidden="true" tabindex="-1"></a>sink_path <span class="op">=</span> <span class="st">'sink.txt'</span> <span class="co"># 设置一个用于演示的文件名</span></span>
<span id="cb157-2"><a href="#cb157-2" aria-hidden="true" tabindex="-1"></a><span class="cf">with</span> <span class="bu">open</span>(path, encoding <span class="op">=</span> <span class="st">"utf-8"</span>) <span class="im">as</span> source: <span class="co"># 以utf-8编码读取</span></span>
<span id="cb157-3"><a href="#cb157-3" aria-hidden="true" tabindex="-1"></a>    <span class="cf">with</span> <span class="bu">open</span>(sink_path, <span class="st">'x'</span>, encoding<span class="op">=</span><span class="st">'iso-8859-1'</span>) <span class="im">as</span> sink: <span class="co"># 以iso-8859-1编码写入</span></span>
<span id="cb157-4"><a href="#cb157-4" aria-hidden="true" tabindex="-1"></a>        sink.write(source.read())</span>
<span id="cb157-5"><a href="#cb157-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb157-6"><a href="#cb157-6" aria-hidden="true" tabindex="-1"></a><span class="cf">with</span> <span class="bu">open</span>(sink_path, encoding<span class="op">=</span><span class="st">'iso-8859-1'</span>) <span class="im">as</span> f: <span class="co"># 以iso-8859-1编码读取</span></span>
<span id="cb157-7"><a href="#cb157-7" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(f.read(<span class="dv">10</span>))</span>
<span id="cb157-8"><a href="#cb157-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb157-9"><a href="#cb157-9" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> os</span>
<span id="cb157-10"><a href="#cb157-10" aria-hidden="true" tabindex="-1"></a>os.remove(sink_path) <span class="co"># 删除临时文件</span></span>
<span id="cb157-11"><a href="#cb157-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb157-12"><a href="#cb157-12" aria-hidden="true" tabindex="-1"></a><span class="co"># 注意：</span></span>
<span id="cb157-13"><a href="#cb157-13" aria-hidden="true" tabindex="-1"></a>f <span class="op">=</span> <span class="bu">open</span>(path, encoding <span class="op">=</span> <span class="st">"utf-8"</span>) <span class="co"># 以utf-8编码读取</span></span>
<span id="cb157-14"><a href="#cb157-14" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(f.read(<span class="dv">5</span>))</span>
<span id="cb157-15"><a href="#cb157-15" aria-hidden="true" tabindex="-1"></a>f.seek(<span class="dv">4</span>)  <span class="co"># 移动到第4个字节位置</span></span>
<span id="cb157-16"><a href="#cb157-16" aria-hidden="true" tabindex="-1"></a><span class="co"># print(f.read(1)) # 这行代码可能会引发 UnicodeDecodeError，因为可能在多字节字符的中间</span></span>
<span id="cb157-17"><a href="#cb157-17" aria-hidden="true" tabindex="-1"></a>f.close()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Sueña el r
Sueña</code></pre>
</div>
</div>
<div class="callout callout-style-default callout-caution callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Caution
</div>
</div>
<div class="callout-body-container callout-body">
<p>在非二进制模式下使用 <code>seek</code> 时要<em>非常</em>小心。</p>
</div>
</div>
</section>
<section id="总结" class="level2">
<h2 class="anchored" data-anchor-id="总结">总结</h2>
<p>本章涵盖了：</p>
<ul>
<li><strong>数据结构</strong>：元组、列表、字典、集合。</li>
<li><strong>内置函数</strong>：<code>enumerate</code>、<code>sorted</code>、<code>zip</code>、<code>reversed</code>。</li>
<li><strong>推导式</strong>：简洁的集合创建。</li>
<li><strong>函数</strong>：定义、参数、命名空间、返回值、lambda 函数。</li>
<li><strong>生成器</strong>：节省内存的迭代。</li>
<li><strong><code>itertools</code></strong>：有用的迭代器工具。</li>
<li><strong>错误处理</strong>：<code>try</code>、<code>except</code>、<code>finally</code>、<code>else</code>。</li>
<li><strong>文件处理</strong>：打开、读取、写入、模式、编码。</li>
</ul>
<p>这些是 Python 数据分析的基础！🧱</p>
</section>
<section id="思考和讨论" class="level2">
<h2 class="anchored" data-anchor-id="思考和讨论">思考和讨论 🤔</h2>
<ol type="1">
<li><strong>大型 CSV 文件：</strong> 你有一个大于 RAM 的 CSV 文件。你将如何使用生成器和文件处理来有效地处理它？</li>
<li><strong>列表与元组：</strong> 权衡？何时选择？示例？</li>
<li><strong>列表推导式与生成器表达式：</strong> 区别？何时更喜欢生成器表达式？</li>
<li><strong>异常处理：</strong> 为什么重要？在数据分析上下文中的示例？</li>
<li><strong><code>with</code> 语句：</strong> 文件处理的优势？</li>
<li><strong>文本模式与二进制模式：</strong> 区别？编码的重要性？</li>
<li><strong>字典 vs 集合:</strong> 如何决定使用哪个？</li>
</ol>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleGiscusIfUsed = (isAlternate, darkModeDefault) => {
    const baseTheme = document.querySelector('#giscus-base-theme')?.value ?? 'light';
    const alternateTheme = document.querySelector('#giscus-alt-theme')?.value ?? 'dark';
    let newTheme = '';
    if(darkModeDefault) {
      newTheme = isAlternate ? baseTheme : alternateTheme;
    } else {
      newTheme = isAlternate ? alternateTheme : baseTheme;
    }
    const changeGiscusTheme = () => {
      // From: https://github.com/giscus/giscus/issues/336
      const sendMessage = (message) => {
        const iframe = document.querySelector('iframe.giscus-frame');
        if (!iframe) return;
        iframe.contentWindow.postMessage({ giscus: message }, 'https://giscus.app');
      }
      sendMessage({
        setConfig: {
          theme: newTheme
        }
      });
    }
    const isGiscussLoaded = window.document.querySelector('iframe.giscus-frame') !== null;
    if (isGiscussLoaded) {
      changeGiscusTheme();
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  const darkModeDefault = false;
  let localAlternateSentinel = darkModeDefault ? 'alternate' : 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
    toggleGiscusIfUsed(toAlternate, darkModeDefault);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp("https:\/\/qiufei\.github\.io\/web-slide-pandas3ed");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
<p>🔋<a href="https://posit.co"><img src="https://posit.co/wp-content/themes/Posit/assets/images/posit-logo-2024.svg" class="img-fluid" alt="Posit" width="65"></a></p>
</div>   
    <div class="nav-footer-center">
      <ul class="footer-items list-unstyled">
    <li class="nav-item">
 邱飞 © 2025
  </li>  
    <li class="nav-item">
    <a class="nav-link" href="https://beian.miit.gov.cn">
<p>浙ICP备 2024072710号-1</p>
</a>
  </li>  
    <li class="nav-item">
    <a class="nav-link" href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=33021202002511">
<p>浙公网安备 33021202002511号</p>
</a>
  </li>  
</ul>
    </div>
    <div class="nav-footer-right">
      <ul class="footer-items list-unstyled">
    <li class="nav-item compact">
    <a class="nav-link" href="mailto:hfutqiufei@163.com">
      <i class="bi bi-envelope-at-fill" role="img">
</i> 
    </a>
  </li>  
</ul>
    </div>
  </div>
</footer>




</body></html>