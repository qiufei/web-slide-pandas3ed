<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.42">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>pandas入门</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==" crossorigin="anonymous"></script><script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<link href="../https://assets.qiufei.site/personal/profile.jpg" rel="icon" type="image/jpeg">
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-2f5df379a58b258e96c21c0638c20c03.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-dark-b53751a350365c71b6c909e95f209ed1.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap-681fbf911679f9b3dbf9743eb275ba49.min.css" rel="stylesheet" append-hash="true" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="../site_libs/bootstrap/bootstrap-dark-7e49aeac8059a213a463aa1a739e8272.min.css" rel="prefetch" append-hash="true" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<script id="quarto-search-options" type="application/json">{
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" integrity="sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg==" crossorigin="anonymous"></script>

<script type="application/javascript">define('jquery', [],function() {return window.jQuery;})</script>


<link rel="stylesheet" href="https://assets.qiufei.site/setup/styles.css">
</head>

<body class="nav-fixed fullcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="https://qiufei.github.io"> 
<span class="menu-text">首页</span></a>
  </li>  
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="https://qiufei.github.io/web-slide"> 
<span class="menu-text">课件</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../about.html"> 
<span class="menu-text">简介</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">pandas入门</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<section id="pandas简介" class="level2">
<h2 class="anchored" data-anchor-id="pandas简介">pandas简介 🐼</h2>
<ul>
<li>pandas 是一个强大的 Python 库，用于数据分析和处理。</li>
<li>它类似于电子表格程序，但功能更强大、更灵活。</li>
<li>它建立在 NumPy 之上，NumPy 是 Python 中另一个重要的数值计算库。</li>
</ul>
</section>
<section id="pandas-标志" class="level2">
<h2 class="anchored" data-anchor-id="pandas-标志">pandas 标志</h2>
<p><img src="https://pandas.pydata.org/static/img/pandas.svg" class="img-fluid"></p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>可以把 pandas 看作是打了兴奋剂的 Excel！💪</p>
</div>
</div>
</section>
<section id="为什么选择-pandas" class="level2">
<h2 class="anchored" data-anchor-id="为什么选择-pandas">为什么选择 pandas？🤔</h2>
<ul>
<li><strong>数据结构：</strong> 提供直观的数据结构，如 Series（一维）和 DataFrame（二维），以高效处理数据。</li>
</ul>
</section>
<section id="为什么选择-pandas-续" class="level2">
<h2 class="anchored" data-anchor-id="为什么选择-pandas-续">为什么选择 pandas？🤔 (续)</h2>
<ul>
<li><strong>数据清洗：</strong> 提供处理缺失数据、过滤和转换数据的工具。</li>
</ul>
</section>
<section id="为什么选择-pandas-续-1" class="level2">
<h2 class="anchored" data-anchor-id="为什么选择-pandas-续-1">为什么选择 pandas？🤔 (续)</h2>
<ul>
<li><strong>数据分析：</strong> 强大的分组、聚合和统计分析功能。</li>
</ul>
</section>
<section id="为什么选择-pandas-续-2" class="level2">
<h2 class="anchored" data-anchor-id="为什么选择-pandas-续-2">为什么选择 pandas？🤔 (续)</h2>
<ul>
<li><strong>集成：</strong> 与 NumPy、SciPy、scikit-learn 和 matplotlib 等其他 Python 库无缝协作。</li>
</ul>
</section>
<section id="核心概念数据分析" class="level2">
<h2 class="anchored" data-anchor-id="核心概念数据分析">核心概念：数据分析 🔎</h2>
<p>数据分析是对数据进行检查、清理、转换和建模的过程，目的是发现有用信息、得出结论并支持决策。它涉及几个关键步骤：</p>
</section>
<section id="核心概念数据分析-续" class="level2">
<h2 class="anchored" data-anchor-id="核心概念数据分析-续">核心概念：数据分析 🔎 (续)</h2>
<ol type="1">
<li><strong>数据收集：</strong> 从各种来源收集数据。</li>
<li><strong>数据清理：</strong> 处理缺失值、纠正错误并确保数据一致性。</li>
<li><strong>数据转换：</strong> 将数据转换为适合分析的格式（例如，缩放、规范化）。</li>
</ol>
</section>
<section id="核心概念数据分析-续-1" class="level2">
<h2 class="anchored" data-anchor-id="核心概念数据分析-续-1">核心概念：数据分析 🔎 (续)</h2>
<ol start="4" type="1">
<li><strong>数据探索：</strong> 使用描述性统计和可视化来了解数据的模式和特征。</li>
<li><strong>数据建模：</strong> 应用统计或机器学习技术来提取见解或进行预测。</li>
<li><strong>解释和报告：</strong> 以清晰简洁的方式传达结果。</li>
</ol>
</section>
<section id="核心概念机器学习" class="level2">
<h2 class="anchored" data-anchor-id="核心概念机器学习">核心概念：机器学习 🤖</h2>
<p>机器学习是人工智能 (AI) 的一个子领域，专注于使计算机能够从数据中学习，而无需显式编程。关键概念包括：</p>
</section>
<section id="核心概念机器学习-续" class="level2">
<h2 class="anchored" data-anchor-id="核心概念机器学习-续">核心概念：机器学习 🤖 (续)</h2>
<ul>
<li><strong>训练数据：</strong> 用于训练机器学习模型的数据集。</li>
<li><strong>特征：</strong> 数据的各个可测量属性或特征（例如，表中的列）。</li>
<li><strong>模型：</strong> 从训练数据中学习模式的数学表示。</li>
</ul>
</section>
<section id="核心概念机器学习-续-1" class="level2">
<h2 class="anchored" data-anchor-id="核心概念机器学习-续-1">核心概念：机器学习 🤖 (续)</h2>
<ul>
<li><strong>预测：</strong> 使用训练好的模型对新的、未见过的数据进行预测。</li>
<li><strong>监督学习：</strong> 从标记数据（已知正确输出）中学习。示例：分类、回归。</li>
<li><strong>无监督学习：</strong> 从未标记数据（未知正确输出）中学习。示例：聚类、降维。</li>
</ul>
</section>
<section id="核心概念python" class="level2">
<h2 class="anchored" data-anchor-id="核心概念python">核心概念：Python 🐍</h2>
<p>Python 是一种通用的高级编程语言，以其可读性和广泛的库而闻名。数据分析的关键特性：</p>
<ul>
<li><strong>易于学习：</strong> 清晰的语法使其对初学者友好。</li>
</ul>
</section>
<section id="核心概念python-续" class="level2">
<h2 class="anchored" data-anchor-id="核心概念python-续">核心概念：Python 🐍 (续)</h2>
<ul>
<li><strong>庞大的社区：</strong> 广泛的在线资源和支持。</li>
<li><strong>丰富的库生态系统：</strong> NumPy（数值计算）、pandas（数据处理）、scikit-learn（机器学习）、matplotlib/seaborn（可视化）。</li>
</ul>
</section>
<section id="核心概念python-续-1" class="level2">
<h2 class="anchored" data-anchor-id="核心概念python-续-1">核心概念：Python 🐍 (续)</h2>
<ul>
<li><strong>解释型语言：</strong> 代码逐行执行，便于测试和调试。</li>
<li><strong>动态类型：</strong> 无需显式声明变量类型。</li>
</ul>
</section>
<section id="导入-pandas" class="level2">
<h2 class="anchored" data-anchor-id="导入-pandas">导入 pandas</h2>
<div id="e054dd01" class="cell" data-execution_count="1">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd  <span class="co"># 导入 pandas，并将其别名为 'pd'</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np   <span class="co"># 导入 NumPy，并将其别名为 'np'</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li>我们使用别名 <code>pd</code> 导入 pandas（标准惯例）。</li>
<li>我们也导入 NumPy，别名为 <code>np</code>。 pandas 构建在 NumPy 之上。</li>
</ul>
</section>
<section id="pandas-数据结构series" class="level2">
<h2 class="anchored" data-anchor-id="pandas-数据结构series">pandas 数据结构：Series</h2>
<ul>
<li>Series 是一个一维带标签的数组。它类似于电子表格中的一列。</li>
<li>它可以保存任何类型的数据（整数、浮点数、字符串等）。</li>
<li>它有一个 <em>索引</em>，用于标记每个元素。</li>
</ul>
<div id="01159353" class="cell" data-execution_count="2">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>obj <span class="op">=</span> pd.Series([<span class="dv">4</span>, <span class="dv">7</span>, <span class="op">-</span><span class="dv">5</span>, <span class="dv">3</span>]) <span class="co"># 从列表创建一个 Series</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>obj</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="2">
<pre><code>0    4
1    7
2   -5
3    3
dtype: int64</code></pre>
</div>
</div>
</section>
<section id="series索引和值" class="level2">
<h2 class="anchored" data-anchor-id="series索引和值">Series：索引和值</h2>
<div id="35d1f37c" class="cell" data-execution_count="3">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(obj.array)  <span class="co"># 访问底层数据 (PandasArray)</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(obj.index)  <span class="co"># 访问索引（默认为：0, 1, 2, ...）</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>&lt;NumpyExtensionArray&gt;
[np.int64(4), np.int64(7), np.int64(-5), np.int64(3)]
Length: 4, dtype: int64
RangeIndex(start=0, stop=4, step=1)</code></pre>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p><code>obj.array</code> 返回数据。 <code>obj.index</code> 返回索引。</p>
</div>
</div>
</section>
<section id="带有自定义索引的-series" class="level2">
<h2 class="anchored" data-anchor-id="带有自定义索引的-series">带有自定义索引的 Series</h2>
<div id="5383945c" class="cell" data-execution_count="4">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>obj2 <span class="op">=</span> pd.Series([<span class="dv">4</span>, <span class="dv">7</span>, <span class="op">-</span><span class="dv">5</span>, <span class="dv">3</span>], index<span class="op">=</span>[<span class="st">'d'</span>, <span class="st">'b'</span>, <span class="st">'a'</span>, <span class="st">'c'</span>]) <span class="co"># 创建一个带有自定义索引的 Series</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>obj2</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="4">
<pre><code>d    4
b    7
a   -5
c    3
dtype: int64</code></pre>
</div>
</div>
</section>
<section id="series自定义索引-续" class="level2">
<h2 class="anchored" data-anchor-id="series自定义索引-续">Series：自定义索引 (续)</h2>
<div id="d7c8eddd" class="cell" data-execution_count="5">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>obj2.index <span class="co"># 访问自定义索引</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="5">
<pre><code>Index(['d', 'b', 'a', 'c'], dtype='object')</code></pre>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>现在索引是 [‘d’, ‘b’, ‘a’, ‘c’]。我们可以使用这些索引来访问数据。</p>
</div>
</div>
</section>
<section id="访问-series-元素" class="level2">
<h2 class="anchored" data-anchor-id="访问-series-元素">访问 Series 元素</h2>
<div id="0c956089" class="cell" data-execution_count="6">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>obj2[<span class="st">'a'</span>]  <span class="co"># 通过索引标签 'a' 访问元素</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="6">
<pre><code>np.int64(-5)</code></pre>
</div>
</div>
</section>
<section id="访问-series-元素-续" class="level2">
<h2 class="anchored" data-anchor-id="访问-series-元素-续">访问 Series 元素 (续)</h2>
<div id="4f154ba7" class="cell" data-execution_count="7">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>obj2[<span class="st">'d'</span>] <span class="op">=</span> <span class="dv">6</span>  <span class="co"># 修改索引标签 'd' 处的元素</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="访问-series-元素-续-1" class="level2">
<h2 class="anchored" data-anchor-id="访问-series-元素-续-1">访问 Series 元素 (续)</h2>
<div id="daa52541" class="cell" data-execution_count="8">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>obj2[[<span class="st">'c'</span>, <span class="st">'a'</span>, <span class="st">'d'</span>]]  <span class="co"># 使用标签列表访问多个元素</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="8">
<pre><code>c    3
a   -5
d    6
dtype: int64</code></pre>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>我们可以使用索引标签列表来选择子集。</p>
</div>
</div>
</section>
<section id="过滤-series" class="level2">
<h2 class="anchored" data-anchor-id="过滤-series">过滤 Series</h2>
<div id="48877521" class="cell" data-execution_count="9">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>obj2[obj2 <span class="op">&gt;</span> <span class="dv">0</span>]  <span class="co"># 选择大于 0 的元素（布尔索引）</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="9">
<pre><code>d    6
b    7
c    3
dtype: int64</code></pre>
</div>
</div>
</section>
<section id="过滤-series-续" class="level2">
<h2 class="anchored" data-anchor-id="过滤-series-续">过滤 Series (续)</h2>
<div id="0217ce09" class="cell" data-execution_count="10">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>obj2 <span class="op">*</span> <span class="dv">2</span> <span class="co"># 将每个元素乘以 2</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="10">
<pre><code>d    12
b    14
a   -10
c     6
dtype: int64</code></pre>
</div>
</div>
</section>
<section id="过滤-series-续-1" class="level2">
<h2 class="anchored" data-anchor-id="过滤-series-续-1">过滤 Series (续)</h2>
<div id="14df9e97" class="cell" data-execution_count="11">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>np.exp(obj2) <span class="co"># 逐元素应用指数函数（来自 NumPy）</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="11">
<pre><code>d     403.428793
b    1096.633158
a       0.006738
c      20.085537
dtype: float64</code></pre>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>在这些操作期间，索引-值的链接关系会保留。</p>
</div>
</div>
</section>
<section id="series-作为固定长度的有序字典" class="level2">
<h2 class="anchored" data-anchor-id="series-作为固定长度的有序字典">Series 作为固定长度的有序字典</h2>
<div id="020b97d4" class="cell" data-execution_count="12">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="co">'b'</span> <span class="kw">in</span> obj2  <span class="co"># 检查 'b' 是否在索引中（类似于检查字典中的键）</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="12">
<pre><code>True</code></pre>
</div>
</div>
</section>
<section id="series-作为固定长度的有序字典-续" class="level2">
<h2 class="anchored" data-anchor-id="series-作为固定长度的有序字典-续">Series 作为固定长度的有序字典 (续)</h2>
<div id="8e3b9462" class="cell" data-execution_count="13">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="co">'e'</span> <span class="kw">in</span> obj2  <span class="co"># 检查 'e' 是否在索引中</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="13">
<pre><code>False</code></pre>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>Series 类似于字典：键是索引标签，值是数据。</p>
</div>
</div>
</section>
<section id="从字典创建-series" class="level2">
<h2 class="anchored" data-anchor-id="从字典创建-series">从字典创建 Series</h2>
<div id="dc277c62" class="cell" data-execution_count="14">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>sdata <span class="op">=</span> {<span class="st">'Ohio'</span>: <span class="dv">35000</span>, <span class="st">'Texas'</span>: <span class="dv">71000</span>, <span class="st">'Oregon'</span>: <span class="dv">16000</span>, <span class="st">'Utah'</span>: <span class="dv">5000</span>}</span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>obj3 <span class="op">=</span> pd.Series(sdata) <span class="co"># 从字典创建一个 Series</span></span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a>obj3</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="14">
<pre><code>Ohio      35000
Texas     71000
Oregon    16000
Utah       5000
dtype: int64</code></pre>
</div>
</div>
</section>
<section id="从字典创建-series-续" class="level2">
<h2 class="anchored" data-anchor-id="从字典创建-series-续">从字典创建 Series (续)</h2>
<div id="0297301f" class="cell" data-execution_count="15">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a>obj3.to_dict() <span class="co">#转换回字典</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="15">
<pre><code>{'Ohio': 35000, 'Texas': 71000, 'Oregon': 16000, 'Utah': 5000}</code></pre>
</div>
</div>
</section>
<section id="series处理缺失数据" class="level2">
<h2 class="anchored" data-anchor-id="series处理缺失数据">Series：处理缺失数据</h2>
<div id="e8d1c35c" class="cell" data-execution_count="16">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a>states <span class="op">=</span> [<span class="st">'California'</span>, <span class="st">'Ohio'</span>, <span class="st">'Oregon'</span>, <span class="st">'Texas'</span>]</span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a>obj4 <span class="op">=</span> pd.Series(sdata, index<span class="op">=</span>states)  <span class="co"># 使用指定的索引创建一个 Series</span></span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a>obj4</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="16">
<pre><code>California        NaN
Ohio          35000.0
Oregon        16000.0
Texas         71000.0
dtype: float64</code></pre>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>‘California’ 是 NaN（Not a Number）- 它在索引中，但不在 <code>sdata</code> 中。‘Utah’ 被排除 - 它在 <code>sdata</code> 中，但不在索引中。</p>
</div>
</div>
</section>
<section id="检测缺失数据" class="level2">
<h2 class="anchored" data-anchor-id="检测缺失数据">检测缺失数据</h2>
<div id="11026247" class="cell" data-execution_count="17">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a>pd.isna(obj4)  <span class="co"># 检查缺失值 (NaN) - 返回一个布尔 Series</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="17">
<pre><code>California     True
Ohio          False
Oregon        False
Texas         False
dtype: bool</code></pre>
</div>
</div>
</section>
<section id="检测缺失数据-续" class="level2">
<h2 class="anchored" data-anchor-id="检测缺失数据-续">检测缺失数据 (续)</h2>
<div id="306b0c16" class="cell" data-execution_count="18">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a>pd.notna(obj4) <span class="co"># 检查非缺失值 - 返回一个布尔 Series</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="18">
<pre><code>California    False
Ohio           True
Oregon         True
Texas          True
dtype: bool</code></pre>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p><code>isna()</code> 和 <code>notna()</code> 检测缺失值。</p>
</div>
</div>
</section>
<section id="series自动对齐" class="level2">
<h2 class="anchored" data-anchor-id="series自动对齐">Series：自动对齐</h2>
<div id="a6269946" class="cell" data-execution_count="19">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a>obj3</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="19">
<pre><code>Ohio      35000
Texas     71000
Oregon    16000
Utah       5000
dtype: int64</code></pre>
</div>
</div>
</section>
<section id="series自动对齐-续" class="level2">
<h2 class="anchored" data-anchor-id="series自动对齐-续">Series：自动对齐 (续)</h2>
<div id="06cd8d7c" class="cell" data-execution_count="20">
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a>obj4</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="20">
<pre><code>California        NaN
Ohio          35000.0
Oregon        16000.0
Texas         71000.0
dtype: float64</code></pre>
</div>
</div>
</section>
<section id="series自动对齐-续-1" class="level2">
<h2 class="anchored" data-anchor-id="series自动对齐-续-1">Series：自动对齐 (续)</h2>
<div id="81490ec2" class="cell" data-execution_count="21">
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a>obj3 <span class="op">+</span> obj4  <span class="co"># 将两个 Series 相加；值按索引标签对齐</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="21">
<pre><code>California         NaN
Ohio           70000.0
Oregon         32000.0
Texas         142000.0
Utah               NaN
dtype: float64</code></pre>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>数据对齐是自动的。在标签不匹配的地方引入 NaN。</p>
</div>
</div>
</section>
<section id="seriesname-属性" class="level2">
<h2 class="anchored" data-anchor-id="seriesname-属性">Series：<code>name</code> 属性</h2>
<div id="0144b57e" class="cell" data-execution_count="22">
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a>obj4.name <span class="op">=</span> <span class="st">'population'</span>  <span class="co"># 设置 Series 的名称</span></span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a>obj4.index.name <span class="op">=</span> <span class="st">'state'</span>  <span class="co"># 设置索引的名称</span></span>
<span id="cb41-3"><a href="#cb41-3" aria-hidden="true" tabindex="-1"></a>obj4</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="22">
<pre><code>state
California        NaN
Ohio          35000.0
Oregon        16000.0
Texas         71000.0
Name: population, dtype: float64</code></pre>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>Series 及其索引可以有名称。</p>
</div>
</div>
</section>
<section id="就地更改-series-索引" class="level2">
<h2 class="anchored" data-anchor-id="就地更改-series-索引">就地更改 Series 索引</h2>
<div id="54097418" class="cell" data-execution_count="23">
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a>obj</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="23">
<pre><code>0    4
1    7
2   -5
3    3
dtype: int64</code></pre>
</div>
</div>
</section>
<section id="就地更改-series-索引-续" class="level2">
<h2 class="anchored" data-anchor-id="就地更改-series-索引-续">就地更改 Series 索引 (续)</h2>
<div id="6d2dc9bc" class="cell" data-execution_count="24">
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a>obj.index <span class="op">=</span> [<span class="st">'Bob'</span>, <span class="st">'Steve'</span>, <span class="st">'Jeff'</span>, <span class="st">'Ryan'</span>]  <span class="co"># 就地修改索引</span></span>
<span id="cb45-2"><a href="#cb45-2" aria-hidden="true" tabindex="-1"></a>obj</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="24">
<pre><code>Bob      4
Steve    7
Jeff    -5
Ryan     3
dtype: int64</code></pre>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>可以通过赋值更改索引。</p>
</div>
</div>
</section>
<section id="pandas-数据结构dataframe" class="level2">
<h2 class="anchored" data-anchor-id="pandas-数据结构dataframe">pandas 数据结构：DataFrame</h2>
<ul>
<li>DataFrame 是一个二维带标签的数据结构。类似于电子表格。</li>
<li>有行和列。</li>
<li>每列可以有不同的类型。</li>
<li>有行索引和列索引。</li>
</ul>
</section>
<section id="创建-dataframe" class="level2">
<h2 class="anchored" data-anchor-id="创建-dataframe">创建 DataFrame</h2>
<div id="78c01c7b" class="cell" data-execution_count="25">
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a>data <span class="op">=</span> {<span class="st">'state'</span>: [<span class="st">'Ohio'</span>, <span class="st">'Ohio'</span>, <span class="st">'Ohio'</span>, <span class="st">'Nevada'</span>, <span class="st">'Nevada'</span>, <span class="st">'Nevada'</span>],</span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a>        <span class="st">'year'</span>: [<span class="dv">2000</span>, <span class="dv">2001</span>, <span class="dv">2002</span>, <span class="dv">2001</span>, <span class="dv">2002</span>, <span class="dv">2003</span>],</span>
<span id="cb47-3"><a href="#cb47-3" aria-hidden="true" tabindex="-1"></a>        <span class="st">'pop'</span>: [<span class="fl">1.5</span>, <span class="fl">1.7</span>, <span class="fl">3.6</span>, <span class="fl">2.4</span>, <span class="fl">2.9</span>, <span class="fl">3.2</span>]}</span>
<span id="cb47-4"><a href="#cb47-4" aria-hidden="true" tabindex="-1"></a>frame <span class="op">=</span> pd.DataFrame(data) <span class="co"># 从字典（值为列表）创建一个 DataFrame</span></span>
<span id="cb47-5"><a href="#cb47-5" aria-hidden="true" tabindex="-1"></a>frame</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="25">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">state</th>
<th data-quarto-table-cell-role="th">year</th>
<th data-quarto-table-cell-role="th">pop</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>Ohio</td>
<td>2000</td>
<td>1.5</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>Ohio</td>
<td>2001</td>
<td>1.7</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>Ohio</td>
<td>2002</td>
<td>3.6</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>Nevada</td>
<td>2001</td>
<td>2.4</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>Nevada</td>
<td>2002</td>
<td>2.9</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">5</td>
<td>Nevada</td>
<td>2003</td>
<td>3.2</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>创建 DataFrame 的常用方法：字典，其值为列表。</p>
</div>
</div>
</section>
<section id="dataframehead-和-tail" class="level2">
<h2 class="anchored" data-anchor-id="dataframehead-和-tail">DataFrame：<code>head()</code> 和 <code>tail()</code></h2>
<div id="17ce3af1" class="cell" data-execution_count="26">
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a>frame.head()  <span class="co"># 显示前 5 行</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="26">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">state</th>
<th data-quarto-table-cell-role="th">year</th>
<th data-quarto-table-cell-role="th">pop</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>Ohio</td>
<td>2000</td>
<td>1.5</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>Ohio</td>
<td>2001</td>
<td>1.7</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>Ohio</td>
<td>2002</td>
<td>3.6</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>Nevada</td>
<td>2001</td>
<td>2.4</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>Nevada</td>
<td>2002</td>
<td>2.9</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</section>
<section id="dataframehead-和-tail-续" class="level2">
<h2 class="anchored" data-anchor-id="dataframehead-和-tail-续">DataFrame：<code>head()</code> 和 <code>tail()</code> (续)</h2>
<div id="b3160af2" class="cell" data-execution_count="27">
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a>frame.tail() <span class="co"># 显示最后 5 行</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="27">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">state</th>
<th data-quarto-table-cell-role="th">year</th>
<th data-quarto-table-cell-role="th">pop</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">1</td>
<td>Ohio</td>
<td>2001</td>
<td>1.7</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">2</td>
<td>Ohio</td>
<td>2002</td>
<td>3.6</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">3</td>
<td>Nevada</td>
<td>2001</td>
<td>2.4</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">4</td>
<td>Nevada</td>
<td>2002</td>
<td>2.9</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">5</td>
<td>Nevada</td>
<td>2003</td>
<td>3.2</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</section>
<section id="dataframe指定列顺序" class="level2">
<h2 class="anchored" data-anchor-id="dataframe指定列顺序">DataFrame：指定列顺序</h2>
<div id="e7f92644" class="cell" data-execution_count="28">
<div class="sourceCode cell-code" id="cb50"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a>pd.DataFrame(data, columns<span class="op">=</span>[<span class="st">'year'</span>, <span class="st">'state'</span>, <span class="st">'pop'</span>]) <span class="co"># 指定列顺序</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="28">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">year</th>
<th data-quarto-table-cell-role="th">state</th>
<th data-quarto-table-cell-role="th">pop</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>2000</td>
<td>Ohio</td>
<td>1.5</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>2001</td>
<td>Ohio</td>
<td>1.7</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>2002</td>
<td>Ohio</td>
<td>3.6</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>2001</td>
<td>Nevada</td>
<td>2.4</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>2002</td>
<td>Nevada</td>
<td>2.9</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">5</td>
<td>2003</td>
<td>Nevada</td>
<td>3.2</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>可以指定列的顺序。</p>
</div>
</div>
</section>
<section id="dataframe缺失数据" class="level2">
<h2 class="anchored" data-anchor-id="dataframe缺失数据">DataFrame：缺失数据</h2>
<div id="fd00c47d" class="cell" data-execution_count="29">
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a>frame2 <span class="op">=</span> pd.DataFrame(data, columns<span class="op">=</span>[<span class="st">'year'</span>, <span class="st">'state'</span>, <span class="st">'pop'</span>, <span class="st">'debt'</span>]) <span class="co"># 'debt' 是一个新列</span></span>
<span id="cb51-2"><a href="#cb51-2" aria-hidden="true" tabindex="-1"></a>frame2</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="29">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">year</th>
<th data-quarto-table-cell-role="th">state</th>
<th data-quarto-table-cell-role="th">pop</th>
<th data-quarto-table-cell-role="th">debt</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>2000</td>
<td>Ohio</td>
<td>1.5</td>
<td>NaN</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>2001</td>
<td>Ohio</td>
<td>1.7</td>
<td>NaN</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>2002</td>
<td>Ohio</td>
<td>3.6</td>
<td>NaN</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>2001</td>
<td>Nevada</td>
<td>2.4</td>
<td>NaN</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>2002</td>
<td>Nevada</td>
<td>2.9</td>
<td>NaN</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">5</td>
<td>2003</td>
<td>Nevada</td>
<td>3.2</td>
<td>NaN</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</section>
<section id="dataframe缺失数据-续" class="level2">
<h2 class="anchored" data-anchor-id="dataframe缺失数据-续">DataFrame：缺失数据 (续)</h2>
<div id="9ce627ca" class="cell" data-execution_count="30">
<div class="sourceCode cell-code" id="cb52"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a>frame2.columns  <span class="co"># 显示列名</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="30">
<pre><code>Index(['year', 'state', 'pop', 'debt'], dtype='object')</code></pre>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>‘debt’ 列有缺失值 (NaN)，因为它不在原始数据中。</p>
</div>
</div>
</section>
<section id="检索列" class="level2">
<h2 class="anchored" data-anchor-id="检索列">检索列</h2>
<div id="8f5b1781" class="cell" data-execution_count="31">
<div class="sourceCode cell-code" id="cb54"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a>frame2[<span class="st">'state'</span>]  <span class="co"># 检索 'state' 列（类似字典的表示法）</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="31">
<pre><code>0      Ohio
1      Ohio
2      Ohio
3    Nevada
4    Nevada
5    Nevada
Name: state, dtype: object</code></pre>
</div>
</div>
</section>
<section id="检索列-续" class="level2">
<h2 class="anchored" data-anchor-id="检索列-续">检索列 (续)</h2>
<div id="09876bce" class="cell" data-execution_count="32">
<div class="sourceCode cell-code" id="cb56"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a>frame2.year  <span class="co"># 检索 'year' 列（类似属性的访问）</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="32">
<pre><code>0    2000
1    2001
2    2002
3    2001
4    2002
5    2003
Name: year, dtype: int64</code></pre>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>两种方法都返回一个 Series。属性访问仅适用于有效的 Python 变量名（无空格等）。</p>
</div>
</div>
</section>
<section id="检索行" class="level2">
<h2 class="anchored" data-anchor-id="检索行">检索行</h2>
<div id="26d637bd" class="cell" data-execution_count="33">
<div class="sourceCode cell-code" id="cb58"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a>frame2.loc[<span class="dv">1</span>]  <span class="co"># 按标签访问行（索引 '1'）</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="33">
<pre><code>year     2001
state    Ohio
pop       1.7
debt      NaN
Name: 1, dtype: object</code></pre>
</div>
</div>
</section>
<section id="检索行-续" class="level2">
<h2 class="anchored" data-anchor-id="检索行-续">检索行 (续)</h2>
<div id="83811661" class="cell" data-execution_count="34">
<div class="sourceCode cell-code" id="cb60"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a>frame2.iloc[<span class="dv">2</span>]  <span class="co"># 按整数位置访问行（索引 2）</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="34">
<pre><code>year     2002
state    Ohio
pop       3.6
debt      NaN
Name: 2, dtype: object</code></pre>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p><code>loc</code> 基于标签。<code>iloc</code> 基于整数位置。这是至关重要的区别。</p>
</div>
</div>
</section>
<section id="修改列" class="level2">
<h2 class="anchored" data-anchor-id="修改列">修改列</h2>
<div id="2c16925b" class="cell" data-execution_count="35">
<div class="sourceCode cell-code" id="cb62"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb62-1"><a href="#cb62-1" aria-hidden="true" tabindex="-1"></a>frame2[<span class="st">'debt'</span>] <span class="op">=</span> <span class="fl">16.5</span>  <span class="co"># 将标量值赋给 'debt' 列</span></span>
<span id="cb62-2"><a href="#cb62-2" aria-hidden="true" tabindex="-1"></a>frame2</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="35">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">year</th>
<th data-quarto-table-cell-role="th">state</th>
<th data-quarto-table-cell-role="th">pop</th>
<th data-quarto-table-cell-role="th">debt</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>2000</td>
<td>Ohio</td>
<td>1.5</td>
<td>16.5</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>2001</td>
<td>Ohio</td>
<td>1.7</td>
<td>16.5</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>2002</td>
<td>Ohio</td>
<td>3.6</td>
<td>16.5</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>2001</td>
<td>Nevada</td>
<td>2.4</td>
<td>16.5</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>2002</td>
<td>Nevada</td>
<td>2.9</td>
<td>16.5</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">5</td>
<td>2003</td>
<td>Nevada</td>
<td>3.2</td>
<td>16.5</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</section>
<section id="修改列-续" class="level2">
<h2 class="anchored" data-anchor-id="修改列-续">修改列 (续)</h2>
<div id="8218f9c4" class="cell" data-execution_count="36">
<div class="sourceCode cell-code" id="cb63"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb63-1"><a href="#cb63-1" aria-hidden="true" tabindex="-1"></a>frame2[<span class="st">'debt'</span>] <span class="op">=</span> np.arange(<span class="fl">6.</span>)  <span class="co"># 将 NumPy 数组赋给 'debt' 列</span></span>
<span id="cb63-2"><a href="#cb63-2" aria-hidden="true" tabindex="-1"></a>frame2</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="36">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">year</th>
<th data-quarto-table-cell-role="th">state</th>
<th data-quarto-table-cell-role="th">pop</th>
<th data-quarto-table-cell-role="th">debt</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>2000</td>
<td>Ohio</td>
<td>1.5</td>
<td>0.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>2001</td>
<td>Ohio</td>
<td>1.7</td>
<td>1.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>2002</td>
<td>Ohio</td>
<td>3.6</td>
<td>2.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>2001</td>
<td>Nevada</td>
<td>2.4</td>
<td>3.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>2002</td>
<td>Nevada</td>
<td>2.9</td>
<td>4.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">5</td>
<td>2003</td>
<td>Nevada</td>
<td>3.2</td>
<td>5.0</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</section>
<section id="赋值-series" class="level2">
<h2 class="anchored" data-anchor-id="赋值-series">赋值 Series</h2>
<div id="524a27bd" class="cell" data-execution_count="37">
<div class="sourceCode cell-code" id="cb64"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb64-1"><a href="#cb64-1" aria-hidden="true" tabindex="-1"></a>val <span class="op">=</span> pd.Series([<span class="op">-</span><span class="fl">1.2</span>, <span class="op">-</span><span class="fl">1.5</span>, <span class="op">-</span><span class="fl">1.7</span>], index<span class="op">=</span>[<span class="dv">2</span>, <span class="dv">4</span>, <span class="dv">5</span>])  <span class="co"># 创建带有自定义索引的 Series</span></span>
<span id="cb64-2"><a href="#cb64-2" aria-hidden="true" tabindex="-1"></a>frame2[<span class="st">'debt'</span>] <span class="op">=</span> val  <span class="co"># 将 Series 赋给 'debt' 列</span></span>
<span id="cb64-3"><a href="#cb64-3" aria-hidden="true" tabindex="-1"></a>frame2</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="37">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">year</th>
<th data-quarto-table-cell-role="th">state</th>
<th data-quarto-table-cell-role="th">pop</th>
<th data-quarto-table-cell-role="th">debt</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>2000</td>
<td>Ohio</td>
<td>1.5</td>
<td>NaN</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>2001</td>
<td>Ohio</td>
<td>1.7</td>
<td>NaN</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>2002</td>
<td>Ohio</td>
<td>3.6</td>
<td>-1.2</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>2001</td>
<td>Nevada</td>
<td>2.4</td>
<td>NaN</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>2002</td>
<td>Nevada</td>
<td>2.9</td>
<td>-1.5</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">5</td>
<td>2003</td>
<td>Nevada</td>
<td>3.2</td>
<td>-1.7</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>标签已对齐！<code>val</code> 中的值被分配给 <code>frame2</code> 中相应的索引。在索引不匹配的地方填充缺失值 (NaN)。</p>
</div>
</div>
</section>
<section id="创建新列" class="level2">
<h2 class="anchored" data-anchor-id="创建新列">创建新列</h2>
<div id="a9b2de18" class="cell" data-execution_count="38">
<div class="sourceCode cell-code" id="cb65"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb65-1"><a href="#cb65-1" aria-hidden="true" tabindex="-1"></a>frame2[<span class="st">'eastern'</span>] <span class="op">=</span> frame2[<span class="st">'state'</span>] <span class="op">==</span> <span class="st">'Ohio'</span>  <span class="co"># 创建一个新列 'eastern'</span></span>
<span id="cb65-2"><a href="#cb65-2" aria-hidden="true" tabindex="-1"></a>frame2</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="38">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">year</th>
<th data-quarto-table-cell-role="th">state</th>
<th data-quarto-table-cell-role="th">pop</th>
<th data-quarto-table-cell-role="th">debt</th>
<th data-quarto-table-cell-role="th">eastern</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>2000</td>
<td>Ohio</td>
<td>1.5</td>
<td>NaN</td>
<td>True</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>2001</td>
<td>Ohio</td>
<td>1.7</td>
<td>NaN</td>
<td>True</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>2002</td>
<td>Ohio</td>
<td>3.6</td>
<td>-1.2</td>
<td>True</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>2001</td>
<td>Nevada</td>
<td>2.4</td>
<td>NaN</td>
<td>False</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>2002</td>
<td>Nevada</td>
<td>2.9</td>
<td>-1.5</td>
<td>False</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">5</td>
<td>2003</td>
<td>Nevada</td>
<td>3.2</td>
<td>-1.7</td>
<td>False</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>赋值给<em>不存在</em>的列会创建一个新列。</p>
</div>
</div>
</section>
<section id="删除列" class="level2">
<h2 class="anchored" data-anchor-id="删除列">删除列</h2>
<div id="cbcac107" class="cell" data-execution_count="39">
<div class="sourceCode cell-code" id="cb66"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb66-1"><a href="#cb66-1" aria-hidden="true" tabindex="-1"></a><span class="kw">del</span> frame2[<span class="st">'eastern'</span>]  <span class="co"># 删除 'eastern' 列</span></span>
<span id="cb66-2"><a href="#cb66-2" aria-hidden="true" tabindex="-1"></a>frame2.columns</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="39">
<pre><code>Index(['year', 'state', 'pop', 'debt'], dtype='object')</code></pre>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p><code>del</code> 关键字删除列。</p>
</div>
</div>
</section>
<section id="从嵌套字典创建-dataframe" class="level2">
<h2 class="anchored" data-anchor-id="从嵌套字典创建-dataframe">从嵌套字典创建 DataFrame</h2>
<div id="b81af887" class="cell" data-execution_count="40">
<div class="sourceCode cell-code" id="cb68"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb68-1"><a href="#cb68-1" aria-hidden="true" tabindex="-1"></a>populations <span class="op">=</span> {<span class="st">'Ohio'</span>: {<span class="dv">2000</span>: <span class="fl">1.5</span>, <span class="dv">2001</span>: <span class="fl">1.7</span>, <span class="dv">2002</span>: <span class="fl">3.6</span>},</span>
<span id="cb68-2"><a href="#cb68-2" aria-hidden="true" tabindex="-1"></a>               <span class="st">'Nevada'</span>: {<span class="dv">2001</span>: <span class="fl">2.4</span>, <span class="dv">2002</span>: <span class="fl">2.9</span>}}</span>
<span id="cb68-3"><a href="#cb68-3" aria-hidden="true" tabindex="-1"></a>frame3 <span class="op">=</span> pd.DataFrame(populations) <span class="co"># 从嵌套字典创建 DataFrame</span></span>
<span id="cb68-4"><a href="#cb68-4" aria-hidden="true" tabindex="-1"></a>frame3</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="40">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Ohio</th>
<th data-quarto-table-cell-role="th">Nevada</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">2000</td>
<td>1.5</td>
<td>NaN</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">2001</td>
<td>1.7</td>
<td>2.4</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2002</td>
<td>3.6</td>
<td>2.9</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>外层键成为列，内层键成为行索引。</p>
</div>
</div>
</section>
<section id="转置-dataframe" class="level2">
<h2 class="anchored" data-anchor-id="转置-dataframe">转置 DataFrame</h2>
<div id="5ca76e59" class="cell" data-execution_count="41">
<div class="sourceCode cell-code" id="cb69"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb69-1"><a href="#cb69-1" aria-hidden="true" tabindex="-1"></a>frame3.T  <span class="co"># 转置 DataFrame（交换行和列）</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="41">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">2000</th>
<th data-quarto-table-cell-role="th">2001</th>
<th data-quarto-table-cell-role="th">2002</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">Ohio</td>
<td>1.5</td>
<td>1.7</td>
<td>3.6</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Nevada</td>
<td>NaN</td>
<td>2.4</td>
<td>2.9</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>交换行和列。</p>
</div>
</div>
</section>
<section id="dataframeindex.name-和-columns.name" class="level2">
<h2 class="anchored" data-anchor-id="dataframeindex.name-和-columns.name">DataFrame：<code>index.name</code> 和 <code>columns.name</code></h2>
<div id="3a1bbac2" class="cell" data-execution_count="42">
<div class="sourceCode cell-code" id="cb70"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb70-1"><a href="#cb70-1" aria-hidden="true" tabindex="-1"></a>frame3.index.name <span class="op">=</span> <span class="st">'year'</span>    <span class="co"># 设置行索引的名称</span></span>
<span id="cb70-2"><a href="#cb70-2" aria-hidden="true" tabindex="-1"></a>frame3.columns.name <span class="op">=</span> <span class="st">'state'</span> <span class="co"># 设置列索引的名称</span></span>
<span id="cb70-3"><a href="#cb70-3" aria-hidden="true" tabindex="-1"></a>frame3</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="42">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th">state</th>
<th data-quarto-table-cell-role="th">Ohio</th>
<th data-quarto-table-cell-role="th">Nevada</th>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">year</th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">2000</td>
<td>1.5</td>
<td>NaN</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">2001</td>
<td>1.7</td>
<td>2.4</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2002</td>
<td>3.6</td>
<td>2.9</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</section>
<section id="dataframeto_numpy" class="level2">
<h2 class="anchored" data-anchor-id="dataframeto_numpy">DataFrame：<code>to_numpy()</code></h2>
<div id="f24545cc" class="cell" data-execution_count="43">
<div class="sourceCode cell-code" id="cb71"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb71-1"><a href="#cb71-1" aria-hidden="true" tabindex="-1"></a>frame3.to_numpy()  <span class="co"># 将 DataFrame 转换为 NumPy 数组</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="43">
<pre><code>array([[1.5, nan],
       [1.7, 2.4],
       [3.6, 2.9]])</code></pre>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>将数据作为二维 NumPy 数组返回。如果存在混合类型，<code>dtype</code> 将适应所有列，通常为 <code>object</code>。</p>
</div>
</div>
</section>
<section id="索引对象" class="level2">
<h2 class="anchored" data-anchor-id="索引对象">索引对象</h2>
<div id="39e7809d" class="cell" data-execution_count="44">
<div class="sourceCode cell-code" id="cb73"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb73-1"><a href="#cb73-1" aria-hidden="true" tabindex="-1"></a>obj <span class="op">=</span> pd.Series(np.arange(<span class="dv">3</span>), index<span class="op">=</span>[<span class="st">'a'</span>, <span class="st">'b'</span>, <span class="st">'c'</span>])</span>
<span id="cb73-2"><a href="#cb73-2" aria-hidden="true" tabindex="-1"></a>index <span class="op">=</span> obj.index  <span class="co"># 获取 Index 对象</span></span>
<span id="cb73-3"><a href="#cb73-3" aria-hidden="true" tabindex="-1"></a>index</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="44">
<pre><code>Index(['a', 'b', 'c'], dtype='object')</code></pre>
</div>
</div>
</section>
<section id="索引对象-续" class="level2">
<h2 class="anchored" data-anchor-id="索引对象-续">索引对象 (续)</h2>
<div id="50caf5f5" class="cell" data-execution_count="45">
<div class="sourceCode cell-code" id="cb75"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb75-1"><a href="#cb75-1" aria-hidden="true" tabindex="-1"></a>index[<span class="dv">1</span>:]  <span class="co"># 对 Index 对象进行切片（类似于列表）</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="45">
<pre><code>Index(['b', 'c'], dtype='object')</code></pre>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>索引对象存储轴标签和元数据。它们是不可变的。</p>
</div>
</div>
</section>
<section id="索引的不可变性" class="level2">
<h2 class="anchored" data-anchor-id="索引的不可变性">索引的不可变性</h2>
<div id="a6fd6762" class="cell" data-execution_count="46">
<div class="sourceCode cell-code" id="cb77"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb77-1"><a href="#cb77-1" aria-hidden="true" tabindex="-1"></a>index[<span class="dv">1</span>] <span class="op">=</span> <span class="st">'d'</span>  <span class="co"># TypeError: Index does not support mutable operations</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>索引对象在创建后<em>不能</em>更改。</p>
</div>
</div>
</section>
<section id="索引作为固定大小的集合" class="level2">
<h2 class="anchored" data-anchor-id="索引作为固定大小的集合">索引作为固定大小的集合</h2>
<div id="1a3a4c62" class="cell" data-execution_count="47">
<div class="sourceCode cell-code" id="cb78"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb78-1"><a href="#cb78-1" aria-hidden="true" tabindex="-1"></a>frame3</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="46">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th">state</th>
<th data-quarto-table-cell-role="th">Ohio</th>
<th data-quarto-table-cell-role="th">Nevada</th>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">year</th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">2000</td>
<td>1.5</td>
<td>NaN</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">2001</td>
<td>1.7</td>
<td>2.4</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2002</td>
<td>3.6</td>
<td>2.9</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</section>
<section id="索引作为固定大小的集合-续" class="level2">
<h2 class="anchored" data-anchor-id="索引作为固定大小的集合-续">索引作为固定大小的集合 (续)</h2>
<div id="73922abd" class="cell" data-execution_count="48">
<div class="sourceCode cell-code" id="cb79"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb79-1"><a href="#cb79-1" aria-hidden="true" tabindex="-1"></a><span class="co">'Ohio'</span> <span class="kw">in</span> frame3.columns  <span class="co"># 检查列成员资格</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="47">
<pre><code>True</code></pre>
</div>
</div>
</section>
<section id="索引作为固定大小的集合-续-1" class="level2">
<h2 class="anchored" data-anchor-id="索引作为固定大小的集合-续-1">索引作为固定大小的集合 (续)</h2>
<div id="ccf4141d" class="cell" data-execution_count="49">
<div class="sourceCode cell-code" id="cb81"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb81-1"><a href="#cb81-1" aria-hidden="true" tabindex="-1"></a><span class="dv">2003</span> <span class="kw">in</span> frame3.index  <span class="co"># 检查行索引成员资格</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="48">
<pre><code>False</code></pre>
</div>
</div>
</section>
<section id="重新索引" class="level2">
<h2 class="anchored" data-anchor-id="重新索引">重新索引</h2>
<ul>
<li><code>reindex</code> 创建一个<em>新</em>对象；数据会根据新索引进行调整。</li>
</ul>
<div id="851d3c98" class="cell" data-execution_count="50">
<div class="sourceCode cell-code" id="cb83"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb83-1"><a href="#cb83-1" aria-hidden="true" tabindex="-1"></a>obj <span class="op">=</span> pd.Series([<span class="fl">4.5</span>, <span class="fl">7.2</span>, <span class="op">-</span><span class="fl">5.3</span>, <span class="fl">3.6</span>], index<span class="op">=</span>[<span class="st">'d'</span>, <span class="st">'b'</span>, <span class="st">'a'</span>, <span class="st">'c'</span>])</span>
<span id="cb83-2"><a href="#cb83-2" aria-hidden="true" tabindex="-1"></a>obj</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="49">
<pre><code>d    4.5
b    7.2
a   -5.3
c    3.6
dtype: float64</code></pre>
</div>
</div>
</section>
<section id="重新索引-续" class="level2">
<h2 class="anchored" data-anchor-id="重新索引-续">重新索引 (续)</h2>
<div id="707097ba" class="cell" data-execution_count="51">
<div class="sourceCode cell-code" id="cb85"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb85-1"><a href="#cb85-1" aria-hidden="true" tabindex="-1"></a>obj2 <span class="op">=</span> obj.reindex([<span class="st">'a'</span>, <span class="st">'b'</span>, <span class="st">'c'</span>, <span class="st">'d'</span>, <span class="st">'e'</span>])  <span class="co"># 重新索引 Series</span></span>
<span id="cb85-2"><a href="#cb85-2" aria-hidden="true" tabindex="-1"></a>obj2</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="50">
<pre><code>a   -5.3
b    7.2
c    3.6
d    4.5
e    NaN
dtype: float64</code></pre>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p><code>reindex</code> <em>创建新的 Series</em>。为缺失的索引引入 NaN。</p>
</div>
</div>
</section>
<section id="重新索引插值的-method" class="level2">
<h2 class="anchored" data-anchor-id="重新索引插值的-method">重新索引：插值的 <code>method</code></h2>
<div id="20aaf39f" class="cell" data-execution_count="52">
<div class="sourceCode cell-code" id="cb87"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb87-1"><a href="#cb87-1" aria-hidden="true" tabindex="-1"></a>obj3 <span class="op">=</span> pd.Series([<span class="st">'blue'</span>, <span class="st">'purple'</span>, <span class="st">'yellow'</span>], index<span class="op">=</span>[<span class="dv">0</span>, <span class="dv">2</span>, <span class="dv">4</span>])</span>
<span id="cb87-2"><a href="#cb87-2" aria-hidden="true" tabindex="-1"></a>obj3</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="51">
<pre><code>0      blue
2    purple
4    yellow
dtype: object</code></pre>
</div>
</div>
</section>
<section id="重新索引插值的-method-续" class="level2">
<h2 class="anchored" data-anchor-id="重新索引插值的-method-续">重新索引：插值的 <code>method</code> (续)</h2>
<div id="3906740c" class="cell" data-execution_count="53">
<div class="sourceCode cell-code" id="cb89"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb89-1"><a href="#cb89-1" aria-hidden="true" tabindex="-1"></a>obj3.reindex(np.arange(<span class="dv">6</span>), method<span class="op">=</span><span class="st">'ffill'</span>)  <span class="co"># 前向填充缺失值</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="52">
<pre><code>0      blue
1      blue
2    purple
3    purple
4    yellow
5    yellow
dtype: object</code></pre>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p><code>ffill</code>（前向填充）将最后一个有效值向前传播。</p>
</div>
</div>
</section>
<section id="使用-dataframe-重新索引" class="level2">
<h2 class="anchored" data-anchor-id="使用-dataframe-重新索引">使用 DataFrame 重新索引</h2>
<div id="409fc840" class="cell" data-execution_count="54">
<div class="sourceCode cell-code" id="cb91"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb91-1"><a href="#cb91-1" aria-hidden="true" tabindex="-1"></a>frame <span class="op">=</span> pd.DataFrame(np.arange(<span class="dv">9</span>).reshape((<span class="dv">3</span>, <span class="dv">3</span>)),</span>
<span id="cb91-2"><a href="#cb91-2" aria-hidden="true" tabindex="-1"></a>                     index<span class="op">=</span>[<span class="st">'a'</span>, <span class="st">'c'</span>, <span class="st">'d'</span>],</span>
<span id="cb91-3"><a href="#cb91-3" aria-hidden="true" tabindex="-1"></a>                     columns<span class="op">=</span>[<span class="st">'Ohio'</span>, <span class="st">'Texas'</span>, <span class="st">'California'</span>])</span>
<span id="cb91-4"><a href="#cb91-4" aria-hidden="true" tabindex="-1"></a>frame</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="53">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Ohio</th>
<th data-quarto-table-cell-role="th">Texas</th>
<th data-quarto-table-cell-role="th">California</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">a</td>
<td>0</td>
<td>1</td>
<td>2</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">c</td>
<td>3</td>
<td>4</td>
<td>5</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">d</td>
<td>6</td>
<td>7</td>
<td>8</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</section>
<section id="使用-dataframe-重新索引-续" class="level2">
<h2 class="anchored" data-anchor-id="使用-dataframe-重新索引-续">使用 DataFrame 重新索引 (续)</h2>
<div id="d4a6d451" class="cell" data-execution_count="55">
<div class="sourceCode cell-code" id="cb92"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb92-1"><a href="#cb92-1" aria-hidden="true" tabindex="-1"></a>frame2 <span class="op">=</span> frame.reindex(index<span class="op">=</span>[<span class="st">'a'</span>, <span class="st">'b'</span>, <span class="st">'c'</span>, <span class="st">'d'</span>]) <span class="co"># 重新索引行</span></span>
<span id="cb92-2"><a href="#cb92-2" aria-hidden="true" tabindex="-1"></a>frame2</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="54">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Ohio</th>
<th data-quarto-table-cell-role="th">Texas</th>
<th data-quarto-table-cell-role="th">California</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">a</td>
<td>0.0</td>
<td>1.0</td>
<td>2.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">b</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">c</td>
<td>3.0</td>
<td>4.0</td>
<td>5.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">d</td>
<td>6.0</td>
<td>7.0</td>
<td>8.0</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>DataFrame 上的 <code>reindex</code> 可以更改行索引、列或两者。</p>
</div>
</div>
</section>
<section id="重新索引列" class="level2">
<h2 class="anchored" data-anchor-id="重新索引列">重新索引列</h2>
<div id="c3e1cbf8" class="cell" data-execution_count="56">
<div class="sourceCode cell-code" id="cb93"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb93-1"><a href="#cb93-1" aria-hidden="true" tabindex="-1"></a>states <span class="op">=</span> [<span class="st">'Texas'</span>, <span class="st">'Utah'</span>, <span class="st">'California'</span>]</span>
<span id="cb93-2"><a href="#cb93-2" aria-hidden="true" tabindex="-1"></a>frame.reindex(columns<span class="op">=</span>states)  <span class="co"># 重新索引列</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="55">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Texas</th>
<th data-quarto-table-cell-role="th">Utah</th>
<th data-quarto-table-cell-role="th">California</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">a</td>
<td>1</td>
<td>NaN</td>
<td>2</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">c</td>
<td>4</td>
<td>NaN</td>
<td>5</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">d</td>
<td>7</td>
<td>NaN</td>
<td>8</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</section>
<section id="删除条目" class="level2">
<h2 class="anchored" data-anchor-id="删除条目">删除条目</h2>
<div id="e2bc3fe8" class="cell" data-execution_count="57">
<div class="sourceCode cell-code" id="cb94"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb94-1"><a href="#cb94-1" aria-hidden="true" tabindex="-1"></a>obj <span class="op">=</span> pd.Series(np.arange(<span class="fl">5.</span>), index<span class="op">=</span>[<span class="st">'a'</span>, <span class="st">'b'</span>, <span class="st">'c'</span>, <span class="st">'d'</span>, <span class="st">'e'</span>])</span>
<span id="cb94-2"><a href="#cb94-2" aria-hidden="true" tabindex="-1"></a>obj</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="56">
<pre><code>a    0.0
b    1.0
c    2.0
d    3.0
e    4.0
dtype: float64</code></pre>
</div>
</div>
</section>
<section id="删除条目-续" class="level2">
<h2 class="anchored" data-anchor-id="删除条目-续">删除条目 (续)</h2>
<div id="ef4d42b5" class="cell" data-execution_count="58">
<div class="sourceCode cell-code" id="cb96"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb96-1"><a href="#cb96-1" aria-hidden="true" tabindex="-1"></a>new_obj <span class="op">=</span> obj.drop(<span class="st">'c'</span>)  <span class="co"># 删除条目 'c'（创建一个新的 Series）</span></span>
<span id="cb96-2"><a href="#cb96-2" aria-hidden="true" tabindex="-1"></a>new_obj</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="57">
<pre><code>a    0.0
b    1.0
d    3.0
e    4.0
dtype: float64</code></pre>
</div>
</div>
</section>
<section id="删除条目-续-1" class="level2">
<h2 class="anchored" data-anchor-id="删除条目-续-1">删除条目 (续)</h2>
<div id="a2569ed8" class="cell" data-execution_count="59">
<div class="sourceCode cell-code" id="cb98"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb98-1"><a href="#cb98-1" aria-hidden="true" tabindex="-1"></a>obj.drop([<span class="st">'d'</span>, <span class="st">'c'</span>])  <span class="co"># 删除多个条目</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="58">
<pre><code>a    0.0
b    1.0
e    4.0
dtype: float64</code></pre>
</div>
</div>
</section>
<section id="从-dataframe-中删除" class="level2">
<h2 class="anchored" data-anchor-id="从-dataframe-中删除">从 DataFrame 中删除</h2>
<div id="04346e79" class="cell" data-execution_count="60">
<div class="sourceCode cell-code" id="cb100"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb100-1"><a href="#cb100-1" aria-hidden="true" tabindex="-1"></a>data <span class="op">=</span> pd.DataFrame(np.arange(<span class="dv">16</span>).reshape((<span class="dv">4</span>, <span class="dv">4</span>)),</span>
<span id="cb100-2"><a href="#cb100-2" aria-hidden="true" tabindex="-1"></a>                    index<span class="op">=</span>[<span class="st">'Ohio'</span>, <span class="st">'Colorado'</span>, <span class="st">'Utah'</span>, <span class="st">'New York'</span>],</span>
<span id="cb100-3"><a href="#cb100-3" aria-hidden="true" tabindex="-1"></a>                    columns<span class="op">=</span>[<span class="st">'one'</span>, <span class="st">'two'</span>, <span class="st">'three'</span>, <span class="st">'four'</span>])</span>
<span id="cb100-4"><a href="#cb100-4" aria-hidden="true" tabindex="-1"></a>data</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="59">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">one</th>
<th data-quarto-table-cell-role="th">two</th>
<th data-quarto-table-cell-role="th">three</th>
<th data-quarto-table-cell-role="th">four</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">Ohio</td>
<td>0</td>
<td>1</td>
<td>2</td>
<td>3</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Colorado</td>
<td>4</td>
<td>5</td>
<td>6</td>
<td>7</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">Utah</td>
<td>8</td>
<td>9</td>
<td>10</td>
<td>11</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">New York</td>
<td>12</td>
<td>13</td>
<td>14</td>
<td>15</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</section>
<section id="从-dataframe-中删除-续" class="level2">
<h2 class="anchored" data-anchor-id="从-dataframe-中删除-续">从 DataFrame 中删除 (续)</h2>
<div id="30cde433" class="cell" data-execution_count="61">
<div class="sourceCode cell-code" id="cb101"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb101-1"><a href="#cb101-1" aria-hidden="true" tabindex="-1"></a>data.drop(index<span class="op">=</span>[<span class="st">'Colorado'</span>, <span class="st">'Ohio'</span>])  <span class="co"># 按索引标签删除行</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="60">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">one</th>
<th data-quarto-table-cell-role="th">two</th>
<th data-quarto-table-cell-role="th">three</th>
<th data-quarto-table-cell-role="th">four</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">Utah</td>
<td>8</td>
<td>9</td>
<td>10</td>
<td>11</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">New York</td>
<td>12</td>
<td>13</td>
<td>14</td>
<td>15</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</section>
<section id="从-dataframe-中删除-续-1" class="level2">
<h2 class="anchored" data-anchor-id="从-dataframe-中删除-续-1">从 DataFrame 中删除 (续)</h2>
<div id="4c2598fe" class="cell" data-execution_count="62">
<div class="sourceCode cell-code" id="cb102"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb102-1"><a href="#cb102-1" aria-hidden="true" tabindex="-1"></a>data.drop(columns<span class="op">=</span>[<span class="st">'two'</span>]) <span class="co"># 按列名删除列</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="61">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">one</th>
<th data-quarto-table-cell-role="th">three</th>
<th data-quarto-table-cell-role="th">four</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">Ohio</td>
<td>0</td>
<td>2</td>
<td>3</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Colorado</td>
<td>4</td>
<td>6</td>
<td>7</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">Utah</td>
<td>8</td>
<td>10</td>
<td>11</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">New York</td>
<td>12</td>
<td>14</td>
<td>15</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</section>
<section id="从-dataframe-中删除-续-2" class="level2">
<h2 class="anchored" data-anchor-id="从-dataframe-中删除-续-2">从 DataFrame 中删除 (续)</h2>
<div id="113d3f97" class="cell" data-execution_count="63">
<div class="sourceCode cell-code" id="cb103"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb103-1"><a href="#cb103-1" aria-hidden="true" tabindex="-1"></a>data.drop(<span class="st">'two'</span>, axis<span class="op">=</span><span class="dv">1</span>) <span class="co"># 使用 axis=1 删除列（与上述相同）</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="62">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">one</th>
<th data-quarto-table-cell-role="th">three</th>
<th data-quarto-table-cell-role="th">four</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">Ohio</td>
<td>0</td>
<td>2</td>
<td>3</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Colorado</td>
<td>4</td>
<td>6</td>
<td>7</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">Utah</td>
<td>8</td>
<td>10</td>
<td>11</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">New York</td>
<td>12</td>
<td>14</td>
<td>15</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</section>
<section id="索引选择和过滤" class="level2">
<h2 class="anchored" data-anchor-id="索引选择和过滤">索引、选择和过滤</h2>
<div id="4cf014ff" class="cell" data-execution_count="64">
<div class="sourceCode cell-code" id="cb104"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb104-1"><a href="#cb104-1" aria-hidden="true" tabindex="-1"></a>obj <span class="op">=</span> pd.Series(np.arange(<span class="fl">4.</span>), index<span class="op">=</span>[<span class="st">'a'</span>, <span class="st">'b'</span>, <span class="st">'c'</span>, <span class="st">'d'</span>])</span>
<span id="cb104-2"><a href="#cb104-2" aria-hidden="true" tabindex="-1"></a>obj</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="63">
<pre><code>a    0.0
b    1.0
c    2.0
d    3.0
dtype: float64</code></pre>
</div>
</div>
</section>
<section id="索引选择和过滤-续" class="level2">
<h2 class="anchored" data-anchor-id="索引选择和过滤-续">索引、选择和过滤 (续)</h2>
<div id="cbeae77d" class="cell" data-execution_count="65">
<div class="sourceCode cell-code" id="cb106"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb106-1"><a href="#cb106-1" aria-hidden="true" tabindex="-1"></a>obj[<span class="st">'b'</span>]  <span class="co"># 按标签选择</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="64">
<pre><code>np.float64(1.0)</code></pre>
</div>
</div>
</section>
<section id="索引选择和过滤-续-1" class="level2">
<h2 class="anchored" data-anchor-id="索引选择和过滤-续-1">索引、选择和过滤 (续)</h2>
<div id="5741f078" class="cell" data-execution_count="66">
<div class="sourceCode cell-code" id="cb108"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb108-1"><a href="#cb108-1" aria-hidden="true" tabindex="-1"></a>obj[<span class="dv">1</span>]  <span class="co"># 按整数位置选择</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>/tmp/ipykernel_3279/3909875360.py:1: FutureWarning: Series.__getitem__ treating keys as positions is deprecated. In a future version, integer keys will always be treated as labels (consistent with DataFrame behavior). To access a value by position, use `ser.iloc[pos]`
  obj[1]  # 按整数位置选择</code></pre>
</div>
<div class="cell-output cell-output-display" data-execution_count="65">
<pre><code>np.float64(1.0)</code></pre>
</div>
</div>
</section>
<section id="索引选择和过滤-续-2" class="level2">
<h2 class="anchored" data-anchor-id="索引选择和过滤-续-2">索引、选择和过滤 (续)</h2>
<div id="624bc63e" class="cell" data-execution_count="67">
<div class="sourceCode cell-code" id="cb111"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb111-1"><a href="#cb111-1" aria-hidden="true" tabindex="-1"></a>obj[<span class="dv">2</span>:<span class="dv">4</span>]  <span class="co"># 切片</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="66">
<pre><code>c    2.0
d    3.0
dtype: float64</code></pre>
</div>
</div>
</section>
<section id="索引选择和过滤-续-3" class="level2">
<h2 class="anchored" data-anchor-id="索引选择和过滤-续-3">索引、选择和过滤 (续)</h2>
<div id="505cff2c" class="cell" data-execution_count="68">
<div class="sourceCode cell-code" id="cb113"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb113-1"><a href="#cb113-1" aria-hidden="true" tabindex="-1"></a>obj[[<span class="st">'b'</span>, <span class="st">'a'</span>, <span class="st">'d'</span>]]  <span class="co"># 选择多个标签</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="67">
<pre><code>b    1.0
a    0.0
d    3.0
dtype: float64</code></pre>
</div>
</div>
</section>
<section id="索引选择和过滤-续-4" class="level2">
<h2 class="anchored" data-anchor-id="索引选择和过滤-续-4">索引、选择和过滤 (续)</h2>
<div id="a61f578d" class="cell" data-execution_count="69">
<div class="sourceCode cell-code" id="cb115"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb115-1"><a href="#cb115-1" aria-hidden="true" tabindex="-1"></a>obj[[<span class="dv">1</span>, <span class="dv">3</span>]]  <span class="co"># 选择多个整数位置</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>/tmp/ipykernel_3279/2120319348.py:1: FutureWarning: Series.__getitem__ treating keys as positions is deprecated. In a future version, integer keys will always be treated as labels (consistent with DataFrame behavior). To access a value by position, use `ser.iloc[pos]`
  obj[[1, 3]]  # 选择多个整数位置</code></pre>
</div>
<div class="cell-output cell-output-display" data-execution_count="68">
<pre><code>b    1.0
d    3.0
dtype: float64</code></pre>
</div>
</div>
</section>
<section id="索引选择和过滤-续-5" class="level2">
<h2 class="anchored" data-anchor-id="索引选择和过滤-续-5">索引、选择和过滤 (续)</h2>
<div id="0e411523" class="cell" data-execution_count="70">
<div class="sourceCode cell-code" id="cb118"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb118-1"><a href="#cb118-1" aria-hidden="true" tabindex="-1"></a>obj[obj <span class="op">&lt;</span> <span class="dv">2</span>]  <span class="co"># 布尔索引</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="69">
<pre><code>a    0.0
b    1.0
dtype: float64</code></pre>
</div>
</div>
</section>
<section id="使用-loc-和-iloc-进行索引" class="level2">
<h2 class="anchored" data-anchor-id="使用-loc-和-iloc-进行索引">使用 <code>loc</code> 和 <code>iloc</code> 进行索引</h2>
<ul>
<li><code>loc</code>：按<em>标签</em>选择。</li>
<li><code>iloc</code>：按<em>整数位置</em>选择。</li>
</ul>
<div id="69579da9" class="cell" data-execution_count="71">
<div class="sourceCode cell-code" id="cb120"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb120-1"><a href="#cb120-1" aria-hidden="true" tabindex="-1"></a>obj.loc[[<span class="st">'b'</span>, <span class="st">'a'</span>, <span class="st">'d'</span>]] <span class="co"># 使用 loc 按标签选择</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="70">
<pre><code>b    1.0
a    0.0
d    3.0
dtype: float64</code></pre>
</div>
</div>
</section>
<section id="使用-loc-和-iloc-进行索引续" class="level2">
<h2 class="anchored" data-anchor-id="使用-loc-和-iloc-进行索引续">使用 <code>loc</code> 和 <code>iloc</code> 进行索引(续)</h2>
<div id="bbf40b1d" class="cell" data-execution_count="72">
<div class="sourceCode cell-code" id="cb122"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb122-1"><a href="#cb122-1" aria-hidden="true" tabindex="-1"></a>obj1 <span class="op">=</span> pd.Series([<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>], index<span class="op">=</span>[<span class="dv">2</span>, <span class="dv">0</span>, <span class="dv">1</span>])</span>
<span id="cb122-2"><a href="#cb122-2" aria-hidden="true" tabindex="-1"></a>obj2 <span class="op">=</span> pd.Series([<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>], index<span class="op">=</span>[<span class="st">'a'</span>, <span class="st">'b'</span>, <span class="st">'c'</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="使用-loc-和-iloc-进行索引续-1" class="level2">
<h2 class="anchored" data-anchor-id="使用-loc-和-iloc-进行索引续-1">使用 <code>loc</code> 和 <code>iloc</code> 进行索引(续)</h2>
<div id="65b25930" class="cell" data-execution_count="73">
<div class="sourceCode cell-code" id="cb123"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb123-1"><a href="#cb123-1" aria-hidden="true" tabindex="-1"></a>obj1[[<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">2</span>]] <span class="co">#如果Series的索引是整数,则默认按标签选择</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="72">
<pre><code>0    2
1    3
2    1
dtype: int64</code></pre>
</div>
</div>
</section>
<section id="使用-loc-和-iloc-进行索引续-2" class="level2">
<h2 class="anchored" data-anchor-id="使用-loc-和-iloc-进行索引续-2">使用 <code>loc</code> 和 <code>iloc</code> 进行索引(续)</h2>
<div id="37b2796e" class="cell" data-execution_count="74">
<div class="sourceCode cell-code" id="cb125"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb125-1"><a href="#cb125-1" aria-hidden="true" tabindex="-1"></a>obj2.loc[[<span class="dv">0</span>, <span class="dv">1</span>]] <span class="co"># 索引是字符串，0和1不是obj2的标签时，会出错</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="使用-loc-和-iloc-进行索引-续" class="level2">
<h2 class="anchored" data-anchor-id="使用-loc-和-iloc-进行索引-续">使用 <code>loc</code> 和 <code>iloc</code> 进行索引 (续)</h2>
<div id="a538a4f9" class="cell" data-execution_count="75">
<div class="sourceCode cell-code" id="cb126"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb126-1"><a href="#cb126-1" aria-hidden="true" tabindex="-1"></a>obj1.iloc[[<span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">2</span>]] <span class="co"># iloc 使用整数位置</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="73">
<pre><code>2    1
0    2
1    3
dtype: int64</code></pre>
</div>
</div>
</section>
<section id="使用-loc-和-iloc-进行索引-续-1" class="level2">
<h2 class="anchored" data-anchor-id="使用-loc-和-iloc-进行索引-续-1">使用 <code>loc</code> 和 <code>iloc</code> 进行索引 (续)</h2>
<div id="698406b1" class="cell" data-execution_count="76">
<div class="sourceCode cell-code" id="cb128"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb128-1"><a href="#cb128-1" aria-hidden="true" tabindex="-1"></a>obj2.iloc[[<span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">2</span>]] <span class="co"># iloc 使用整数位置</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="74">
<pre><code>a    1
b    2
c    3
dtype: int64</code></pre>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>使用 <code>loc</code> 和 <code>iloc</code> 可以避免歧义，尤其是在使用整数索引时。</p>
</div>
</div>
</section>
<section id="使用标签切片包含" class="level2">
<h2 class="anchored" data-anchor-id="使用标签切片包含">使用标签切片（包含）</h2>
<div id="b93f2601" class="cell" data-execution_count="77">
<div class="sourceCode cell-code" id="cb130"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb130-1"><a href="#cb130-1" aria-hidden="true" tabindex="-1"></a>obj2.loc[<span class="st">'b'</span>:<span class="st">'c'</span>]  <span class="co"># 包括端点 ('c')！</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="75">
<pre><code>b    2
c    3
dtype: int64</code></pre>
</div>
</div>
</section>
<section id="使用标签切片包含续" class="level2">
<h2 class="anchored" data-anchor-id="使用标签切片包含续">使用标签切片（包含）(续)</h2>
<div id="82eb0055" class="cell" data-execution_count="78">
<div class="sourceCode cell-code" id="cb132"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb132-1"><a href="#cb132-1" aria-hidden="true" tabindex="-1"></a>obj2.loc[<span class="st">'b'</span>:<span class="st">'c'</span>] <span class="op">=</span> <span class="dv">5</span>  <span class="co"># 使用基于标签的切片赋值</span></span>
<span id="cb132-2"><a href="#cb132-2" aria-hidden="true" tabindex="-1"></a>obj2</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="76">
<pre><code>a    1
b    5
c    5
dtype: int64</code></pre>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>使用 <code>loc</code> 进行标签切片<em>包括</em>端点。</p>
</div>
</div>
</section>
<section id="索引到-dataframe-中" class="level2">
<h2 class="anchored" data-anchor-id="索引到-dataframe-中">索引到 DataFrame 中</h2>
<div id="16b67bcc" class="cell" data-execution_count="79">
<div class="sourceCode cell-code" id="cb134"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb134-1"><a href="#cb134-1" aria-hidden="true" tabindex="-1"></a>data <span class="op">=</span> pd.DataFrame(np.arange(<span class="dv">16</span>).reshape((<span class="dv">4</span>, <span class="dv">4</span>)),</span>
<span id="cb134-2"><a href="#cb134-2" aria-hidden="true" tabindex="-1"></a>                    index<span class="op">=</span>[<span class="st">'Ohio'</span>, <span class="st">'Colorado'</span>, <span class="st">'Utah'</span>, <span class="st">'New York'</span>],</span>
<span id="cb134-3"><a href="#cb134-3" aria-hidden="true" tabindex="-1"></a>                    columns<span class="op">=</span>[<span class="st">'one'</span>, <span class="st">'two'</span>, <span class="st">'three'</span>, <span class="st">'four'</span>])</span>
<span id="cb134-4"><a href="#cb134-4" aria-hidden="true" tabindex="-1"></a>data</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="77">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">one</th>
<th data-quarto-table-cell-role="th">two</th>
<th data-quarto-table-cell-role="th">three</th>
<th data-quarto-table-cell-role="th">four</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">Ohio</td>
<td>0</td>
<td>1</td>
<td>2</td>
<td>3</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Colorado</td>
<td>4</td>
<td>5</td>
<td>6</td>
<td>7</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">Utah</td>
<td>8</td>
<td>9</td>
<td>10</td>
<td>11</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">New York</td>
<td>12</td>
<td>13</td>
<td>14</td>
<td>15</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</section>
<section id="索引到-dataframe-中-续" class="level2">
<h2 class="anchored" data-anchor-id="索引到-dataframe-中-续">索引到 DataFrame 中 (续)</h2>
<div id="c95186c7" class="cell" data-execution_count="80">
<div class="sourceCode cell-code" id="cb135"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb135-1"><a href="#cb135-1" aria-hidden="true" tabindex="-1"></a>data[<span class="st">'two'</span>]  <span class="co"># 选择列 'two'</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="78">
<pre><code>Ohio         1
Colorado     5
Utah         9
New York    13
Name: two, dtype: int64</code></pre>
</div>
</div>
</section>
<section id="索引到-dataframe-中-续-1" class="level2">
<h2 class="anchored" data-anchor-id="索引到-dataframe-中-续-1">索引到 DataFrame 中 (续)</h2>
<div id="22d88398" class="cell" data-execution_count="81">
<div class="sourceCode cell-code" id="cb137"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb137-1"><a href="#cb137-1" aria-hidden="true" tabindex="-1"></a>data[[<span class="st">'three'</span>, <span class="st">'one'</span>]]  <span class="co"># 选择多列</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="79">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">three</th>
<th data-quarto-table-cell-role="th">one</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">Ohio</td>
<td>2</td>
<td>0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Colorado</td>
<td>6</td>
<td>4</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">Utah</td>
<td>10</td>
<td>8</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">New York</td>
<td>14</td>
<td>12</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</section>
<section id="dataframe索引的特殊情况" class="level2">
<h2 class="anchored" data-anchor-id="dataframe索引的特殊情况">DataFrame：索引的特殊情况</h2>
<div id="053394eb" class="cell" data-execution_count="82">
<div class="sourceCode cell-code" id="cb138"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb138-1"><a href="#cb138-1" aria-hidden="true" tabindex="-1"></a>data[:<span class="dv">2</span>]  <span class="co"># 切片行（选择第 0 行和第 1 行）</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="80">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">one</th>
<th data-quarto-table-cell-role="th">two</th>
<th data-quarto-table-cell-role="th">three</th>
<th data-quarto-table-cell-role="th">four</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">Ohio</td>
<td>0</td>
<td>1</td>
<td>2</td>
<td>3</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Colorado</td>
<td>4</td>
<td>5</td>
<td>6</td>
<td>7</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</section>
<section id="dataframe索引的特殊情况-续" class="level2">
<h2 class="anchored" data-anchor-id="dataframe索引的特殊情况-续">DataFrame：索引的特殊情况 (续)</h2>
<div id="42f0b53a" class="cell" data-execution_count="83">
<div class="sourceCode cell-code" id="cb139"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb139-1"><a href="#cb139-1" aria-hidden="true" tabindex="-1"></a>data[data[<span class="st">'three'</span>] <span class="op">&gt;</span> <span class="dv">5</span>]  <span class="co"># 布尔索引（选择 'three' &gt; 5 的行）</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="81">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">one</th>
<th data-quarto-table-cell-role="th">two</th>
<th data-quarto-table-cell-role="th">three</th>
<th data-quarto-table-cell-role="th">four</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">Colorado</td>
<td>4</td>
<td>5</td>
<td>6</td>
<td>7</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Utah</td>
<td>8</td>
<td>9</td>
<td>10</td>
<td>11</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">New York</td>
<td>12</td>
<td>13</td>
<td>14</td>
<td>15</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</section>
<section id="dataframe布尔索引" class="level2">
<h2 class="anchored" data-anchor-id="dataframe布尔索引">DataFrame：布尔索引</h2>
<div id="4ad1771f" class="cell" data-execution_count="84">
<div class="sourceCode cell-code" id="cb140"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb140-1"><a href="#cb140-1" aria-hidden="true" tabindex="-1"></a>data <span class="op">&lt;</span> <span class="dv">5</span>  <span class="co"># 逐元素比较（返回一个布尔 DataFrame）</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="82">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">one</th>
<th data-quarto-table-cell-role="th">two</th>
<th data-quarto-table-cell-role="th">three</th>
<th data-quarto-table-cell-role="th">four</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">Ohio</td>
<td>True</td>
<td>True</td>
<td>True</td>
<td>True</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Colorado</td>
<td>True</td>
<td>False</td>
<td>False</td>
<td>False</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">Utah</td>
<td>False</td>
<td>False</td>
<td>False</td>
<td>False</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">New York</td>
<td>False</td>
<td>False</td>
<td>False</td>
<td>False</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</section>
<section id="dataframe布尔索引-续" class="level2">
<h2 class="anchored" data-anchor-id="dataframe布尔索引-续">DataFrame：布尔索引 (续)</h2>
<div id="d7a7a21d" class="cell" data-execution_count="85">
<div class="sourceCode cell-code" id="cb141"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb141-1"><a href="#cb141-1" aria-hidden="true" tabindex="-1"></a>data[data <span class="op">&lt;</span> <span class="dv">5</span>] <span class="op">=</span> <span class="dv">0</span>  <span class="co"># 将小于 5 的值设置为 0</span></span>
<span id="cb141-2"><a href="#cb141-2" aria-hidden="true" tabindex="-1"></a>data</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="83">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">one</th>
<th data-quarto-table-cell-role="th">two</th>
<th data-quarto-table-cell-role="th">three</th>
<th data-quarto-table-cell-role="th">four</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">Ohio</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Colorado</td>
<td>0</td>
<td>5</td>
<td>6</td>
<td>7</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">Utah</td>
<td>8</td>
<td>9</td>
<td>10</td>
<td>11</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">New York</td>
<td>12</td>
<td>13</td>
<td>14</td>
<td>15</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</section>
<section id="使用-loc-和-iloc-在-dataframe-上进行选择" class="level2">
<h2 class="anchored" data-anchor-id="使用-loc-和-iloc-在-dataframe-上进行选择">使用 <code>loc</code> 和 <code>iloc</code> 在 DataFrame 上进行选择</h2>
<div id="46deb4ef" class="cell" data-execution_count="86">
<div class="sourceCode cell-code" id="cb142"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb142-1"><a href="#cb142-1" aria-hidden="true" tabindex="-1"></a>data.loc[<span class="st">'Colorado'</span>] <span class="co"># 按标签选择一行</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="84">
<pre><code>one      0
two      5
three    6
four     7
Name: Colorado, dtype: int64</code></pre>
</div>
</div>
</section>
<section id="使用-loc-和-iloc-在-dataframe-上进行选择-续" class="level2">
<h2 class="anchored" data-anchor-id="使用-loc-和-iloc-在-dataframe-上进行选择-续">使用 <code>loc</code> 和 <code>iloc</code> 在 DataFrame 上进行选择 (续)</h2>
<div id="595c5521" class="cell" data-execution_count="87">
<div class="sourceCode cell-code" id="cb144"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb144-1"><a href="#cb144-1" aria-hidden="true" tabindex="-1"></a>data.loc[[<span class="st">'Colorado'</span>, <span class="st">'New York'</span>]] <span class="co"># 按标签选择多行</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="85">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">one</th>
<th data-quarto-table-cell-role="th">two</th>
<th data-quarto-table-cell-role="th">three</th>
<th data-quarto-table-cell-role="th">four</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">Colorado</td>
<td>0</td>
<td>5</td>
<td>6</td>
<td>7</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">New York</td>
<td>12</td>
<td>13</td>
<td>14</td>
<td>15</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</section>
<section id="使用-loc-和-iloc-在-dataframe-上进行选择-续-1" class="level2">
<h2 class="anchored" data-anchor-id="使用-loc-和-iloc-在-dataframe-上进行选择-续-1">使用 <code>loc</code> 和 <code>iloc</code> 在 DataFrame 上进行选择 (续)</h2>
<div id="69de67ca" class="cell" data-execution_count="88">
<div class="sourceCode cell-code" id="cb145"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb145-1"><a href="#cb145-1" aria-hidden="true" tabindex="-1"></a>data.loc[<span class="st">'Colorado'</span>, [<span class="st">'two'</span>, <span class="st">'three'</span>]]  <span class="co"># 按标签选择行和列</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="86">
<pre><code>two      5
three    6
Name: Colorado, dtype: int64</code></pre>
</div>
</div>
</section>
<section id="使用-loc-和-iloc-在-dataframe-上进行选择-续-2" class="level2">
<h2 class="anchored" data-anchor-id="使用-loc-和-iloc-在-dataframe-上进行选择-续-2">使用 <code>loc</code> 和 <code>iloc</code> 在 DataFrame 上进行选择 (续)</h2>
<div id="5a6b0602" class="cell" data-execution_count="89">
<div class="sourceCode cell-code" id="cb147"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb147-1"><a href="#cb147-1" aria-hidden="true" tabindex="-1"></a>data.iloc[<span class="dv">2</span>] <span class="co"># 按位置选择一行</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="87">
<pre><code>one       8
two       9
three    10
four     11
Name: Utah, dtype: int64</code></pre>
</div>
</div>
</section>
<section id="使用-loc-和-iloc-在-dataframe-上进行选择-续-3" class="level2">
<h2 class="anchored" data-anchor-id="使用-loc-和-iloc-在-dataframe-上进行选择-续-3">使用 <code>loc</code> 和 <code>iloc</code> 在 DataFrame 上进行选择 (续)</h2>
<div id="c2fa059f" class="cell" data-execution_count="90">
<div class="sourceCode cell-code" id="cb149"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb149-1"><a href="#cb149-1" aria-hidden="true" tabindex="-1"></a>data.iloc[[<span class="dv">2</span>, <span class="dv">1</span>]] <span class="co"># 按位置选择多行</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="88">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">one</th>
<th data-quarto-table-cell-role="th">two</th>
<th data-quarto-table-cell-role="th">three</th>
<th data-quarto-table-cell-role="th">four</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">Utah</td>
<td>8</td>
<td>9</td>
<td>10</td>
<td>11</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Colorado</td>
<td>0</td>
<td>5</td>
<td>6</td>
<td>7</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</section>
<section id="使用-loc-和-iloc-在-dataframe-上进行选择-续-4" class="level2">
<h2 class="anchored" data-anchor-id="使用-loc-和-iloc-在-dataframe-上进行选择-续-4">使用 <code>loc</code> 和 <code>iloc</code> 在 DataFrame 上进行选择 (续)</h2>
<div id="a8fe25d5" class="cell" data-execution_count="91">
<div class="sourceCode cell-code" id="cb150"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb150-1"><a href="#cb150-1" aria-hidden="true" tabindex="-1"></a>data.iloc[<span class="dv">2</span>, [<span class="dv">3</span>, <span class="dv">0</span>, <span class="dv">1</span>]] <span class="co"># 按位置选择行和列</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="89">
<pre><code>four    11
one      8
two      9
Name: Utah, dtype: int64</code></pre>
</div>
</div>
</section>
<section id="使用-loc-和-iloc-在-dataframe-上进行选择-续-5" class="level2">
<h2 class="anchored" data-anchor-id="使用-loc-和-iloc-在-dataframe-上进行选择-续-5">使用 <code>loc</code> 和 <code>iloc</code> 在 DataFrame 上进行选择 (续)</h2>
<div id="a8c8f57b" class="cell" data-execution_count="92">
<div class="sourceCode cell-code" id="cb152"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb152-1"><a href="#cb152-1" aria-hidden="true" tabindex="-1"></a>data.iloc[[<span class="dv">1</span>, <span class="dv">2</span>], [<span class="dv">3</span>, <span class="dv">0</span>, <span class="dv">1</span>]] <span class="co"># 按位置选择行和列</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="90">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">four</th>
<th data-quarto-table-cell-role="th">one</th>
<th data-quarto-table-cell-role="th">two</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">Colorado</td>
<td>7</td>
<td>0</td>
<td>5</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Utah</td>
<td>11</td>
<td>8</td>
<td>9</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</section>
<section id="算术和数据对齐" class="level2">
<h2 class="anchored" data-anchor-id="算术和数据对齐">算术和数据对齐</h2>
<ul>
<li>执行算术运算时，数据按索引标签对齐。</li>
<li>在标签不重叠的地方使用 NaN。</li>
</ul>
<div id="dfc2823c" class="cell" data-execution_count="93">
<div class="sourceCode cell-code" id="cb153"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb153-1"><a href="#cb153-1" aria-hidden="true" tabindex="-1"></a>s1 <span class="op">=</span> pd.Series([<span class="fl">7.3</span>, <span class="op">-</span><span class="fl">2.5</span>, <span class="fl">3.4</span>, <span class="fl">1.5</span>], index<span class="op">=</span>[<span class="st">'a'</span>, <span class="st">'c'</span>, <span class="st">'d'</span>, <span class="st">'e'</span>])</span>
<span id="cb153-2"><a href="#cb153-2" aria-hidden="true" tabindex="-1"></a>s2 <span class="op">=</span> pd.Series([<span class="op">-</span><span class="fl">2.1</span>, <span class="fl">3.6</span>, <span class="op">-</span><span class="fl">1.5</span>, <span class="dv">4</span>, <span class="fl">3.1</span>], index<span class="op">=</span>[<span class="st">'a'</span>, <span class="st">'c'</span>, <span class="st">'e'</span>, <span class="st">'f'</span>, <span class="st">'g'</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="算术和数据对齐-续" class="level2">
<h2 class="anchored" data-anchor-id="算术和数据对齐-续">算术和数据对齐 (续)</h2>
<div id="e2d0b37b" class="cell" data-execution_count="94">
<div class="sourceCode cell-code" id="cb154"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb154-1"><a href="#cb154-1" aria-hidden="true" tabindex="-1"></a>s1</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="92">
<pre><code>a    7.3
c   -2.5
d    3.4
e    1.5
dtype: float64</code></pre>
</div>
</div>
<div id="20dc4249" class="cell" data-execution_count="95">
<div class="sourceCode cell-code" id="cb156"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb156-1"><a href="#cb156-1" aria-hidden="true" tabindex="-1"></a>s2</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="93">
<pre><code>a   -2.1
c    3.6
e   -1.5
f    4.0
g    3.1
dtype: float64</code></pre>
</div>
</div>
</section>
<section id="算术和数据对齐-续-1" class="level2">
<h2 class="anchored" data-anchor-id="算术和数据对齐-续-1">算术和数据对齐 (续)</h2>
<div id="58a40dce" class="cell" data-execution_count="96">
<div class="sourceCode cell-code" id="cb158"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb158-1"><a href="#cb158-1" aria-hidden="true" tabindex="-1"></a>s1 <span class="op">+</span> s2  <span class="co"># Series 相加；按索引标签对齐</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="94">
<pre><code>a    5.2
c    1.1
d    NaN
e    0.0
f    NaN
g    NaN
dtype: float64</code></pre>
</div>
</div>
</section>
<section id="dataframe-的算术运算" class="level2">
<h2 class="anchored" data-anchor-id="dataframe-的算术运算">DataFrame 的算术运算</h2>
<div id="d7704c41" class="cell" data-execution_count="97">
<div class="sourceCode cell-code" id="cb160"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb160-1"><a href="#cb160-1" aria-hidden="true" tabindex="-1"></a>df1 <span class="op">=</span> pd.DataFrame(np.arange(<span class="fl">9.</span>).reshape((<span class="dv">3</span>, <span class="dv">3</span>)), columns<span class="op">=</span><span class="bu">list</span>(<span class="st">'bcd'</span>),</span>
<span id="cb160-2"><a href="#cb160-2" aria-hidden="true" tabindex="-1"></a>                   index<span class="op">=</span>[<span class="st">'Ohio'</span>, <span class="st">'Texas'</span>, <span class="st">'Colorado'</span>])</span>
<span id="cb160-3"><a href="#cb160-3" aria-hidden="true" tabindex="-1"></a>df2 <span class="op">=</span> pd.DataFrame(np.arange(<span class="fl">12.</span>).reshape((<span class="dv">4</span>, <span class="dv">3</span>)), columns<span class="op">=</span><span class="bu">list</span>(<span class="st">'bde'</span>),</span>
<span id="cb160-4"><a href="#cb160-4" aria-hidden="true" tabindex="-1"></a>                   index<span class="op">=</span>[<span class="st">'Utah'</span>, <span class="st">'Ohio'</span>, <span class="st">'Texas'</span>, <span class="st">'Oregon'</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="dataframe-的算术运算-续" class="level2">
<h2 class="anchored" data-anchor-id="dataframe-的算术运算-续">DataFrame 的算术运算 (续)</h2>
<div id="c5bb7836" class="cell" data-execution_count="98">
<div class="sourceCode cell-code" id="cb161"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb161-1"><a href="#cb161-1" aria-hidden="true" tabindex="-1"></a>df1</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="96">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">b</th>
<th data-quarto-table-cell-role="th">c</th>
<th data-quarto-table-cell-role="th">d</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">Ohio</td>
<td>0.0</td>
<td>1.0</td>
<td>2.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Texas</td>
<td>3.0</td>
<td>4.0</td>
<td>5.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">Colorado</td>
<td>6.0</td>
<td>7.0</td>
<td>8.0</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</section>
<section id="dataframe-的算术运算-续-1" class="level2">
<h2 class="anchored" data-anchor-id="dataframe-的算术运算-续-1">DataFrame 的算术运算 (续)</h2>
<div id="70002e26" class="cell" data-execution_count="99">
<div class="sourceCode cell-code" id="cb162"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb162-1"><a href="#cb162-1" aria-hidden="true" tabindex="-1"></a>df2</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="97">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">b</th>
<th data-quarto-table-cell-role="th">d</th>
<th data-quarto-table-cell-role="th">e</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">Utah</td>
<td>0.0</td>
<td>1.0</td>
<td>2.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Ohio</td>
<td>3.0</td>
<td>4.0</td>
<td>5.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">Texas</td>
<td>6.0</td>
<td>7.0</td>
<td>8.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Oregon</td>
<td>9.0</td>
<td>10.0</td>
<td>11.0</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</section>
<section id="dataframe-的算术运算-续-2" class="level2">
<h2 class="anchored" data-anchor-id="dataframe-的算术运算-续-2">DataFrame 的算术运算 (续)</h2>
<div id="57ffed5a" class="cell" data-execution_count="100">
<div class="sourceCode cell-code" id="cb163"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb163-1"><a href="#cb163-1" aria-hidden="true" tabindex="-1"></a>df1 <span class="op">+</span> df2  <span class="co"># DataFrame 相加；按行和列标签对齐</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="98">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">b</th>
<th data-quarto-table-cell-role="th">c</th>
<th data-quarto-table-cell-role="th">d</th>
<th data-quarto-table-cell-role="th">e</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">Colorado</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Ohio</td>
<td>3.0</td>
<td>NaN</td>
<td>6.0</td>
<td>NaN</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">Oregon</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Texas</td>
<td>9.0</td>
<td>NaN</td>
<td>12.0</td>
<td>NaN</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">Utah</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</section>
<section id="具有填充值的算术方法" class="level2">
<h2 class="anchored" data-anchor-id="具有填充值的算术方法">具有填充值的算术方法</h2>
<div id="f13b0d1a" class="cell" data-execution_count="101">
<div class="sourceCode cell-code" id="cb164"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb164-1"><a href="#cb164-1" aria-hidden="true" tabindex="-1"></a>df1 <span class="op">=</span> pd.DataFrame(np.arange(<span class="fl">12.</span>).reshape((<span class="dv">3</span>, <span class="dv">4</span>)),</span>
<span id="cb164-2"><a href="#cb164-2" aria-hidden="true" tabindex="-1"></a>                   columns<span class="op">=</span><span class="bu">list</span>(<span class="st">'abcd'</span>))</span>
<span id="cb164-3"><a href="#cb164-3" aria-hidden="true" tabindex="-1"></a>df2 <span class="op">=</span> pd.DataFrame(np.arange(<span class="fl">20.</span>).reshape((<span class="dv">4</span>, <span class="dv">5</span>)),</span>
<span id="cb164-4"><a href="#cb164-4" aria-hidden="true" tabindex="-1"></a>                   columns<span class="op">=</span><span class="bu">list</span>(<span class="st">'abcde'</span>))</span>
<span id="cb164-5"><a href="#cb164-5" aria-hidden="true" tabindex="-1"></a>df2.loc[<span class="dv">1</span>, <span class="st">'b'</span>] <span class="op">=</span> np.nan  <span class="co"># 引入一个缺失值</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="具有填充值的算术方法-续" class="level2">
<h2 class="anchored" data-anchor-id="具有填充值的算术方法-续">具有填充值的算术方法 (续)</h2>
<div id="559a591b" class="cell" data-execution_count="102">
<div class="sourceCode cell-code" id="cb165"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb165-1"><a href="#cb165-1" aria-hidden="true" tabindex="-1"></a>df1</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="100">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">a</th>
<th data-quarto-table-cell-role="th">b</th>
<th data-quarto-table-cell-role="th">c</th>
<th data-quarto-table-cell-role="th">d</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>0.0</td>
<td>1.0</td>
<td>2.0</td>
<td>3.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>4.0</td>
<td>5.0</td>
<td>6.0</td>
<td>7.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>8.0</td>
<td>9.0</td>
<td>10.0</td>
<td>11.0</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</section>
<section id="具有填充值的算术方法-续-1" class="level2">
<h2 class="anchored" data-anchor-id="具有填充值的算术方法-续-1">具有填充值的算术方法 (续)</h2>
<div id="c8c85028" class="cell" data-execution_count="103">
<div class="sourceCode cell-code" id="cb166"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb166-1"><a href="#cb166-1" aria-hidden="true" tabindex="-1"></a>df2</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="101">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">a</th>
<th data-quarto-table-cell-role="th">b</th>
<th data-quarto-table-cell-role="th">c</th>
<th data-quarto-table-cell-role="th">d</th>
<th data-quarto-table-cell-role="th">e</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>0.0</td>
<td>1.0</td>
<td>2.0</td>
<td>3.0</td>
<td>4.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>5.0</td>
<td>NaN</td>
<td>7.0</td>
<td>8.0</td>
<td>9.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>10.0</td>
<td>11.0</td>
<td>12.0</td>
<td>13.0</td>
<td>14.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>15.0</td>
<td>16.0</td>
<td>17.0</td>
<td>18.0</td>
<td>19.0</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</section>
<section id="具有填充值的算术方法-续-2" class="level2">
<h2 class="anchored" data-anchor-id="具有填充值的算术方法-续-2">具有填充值的算术方法 (续)</h2>
<div id="adc4b656" class="cell" data-execution_count="104">
<div class="sourceCode cell-code" id="cb167"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb167-1"><a href="#cb167-1" aria-hidden="true" tabindex="-1"></a>df1 <span class="op">+</span> df2  <span class="co"># 相加，可能产生 NaN</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="102">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">a</th>
<th data-quarto-table-cell-role="th">b</th>
<th data-quarto-table-cell-role="th">c</th>
<th data-quarto-table-cell-role="th">d</th>
<th data-quarto-table-cell-role="th">e</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>0.0</td>
<td>2.0</td>
<td>4.0</td>
<td>6.0</td>
<td>NaN</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>9.0</td>
<td>NaN</td>
<td>13.0</td>
<td>15.0</td>
<td>NaN</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>18.0</td>
<td>20.0</td>
<td>22.0</td>
<td>24.0</td>
<td>NaN</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>NaN 表示缺失值。</p>
</div>
</div>
</section>
<section id="使用-add-和-fill_value" class="level2">
<h2 class="anchored" data-anchor-id="使用-add-和-fill_value">使用 <code>add</code> 和 <code>fill_value</code></h2>
<div id="92e2576b" class="cell" data-execution_count="105">
<div class="sourceCode cell-code" id="cb168"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb168-1"><a href="#cb168-1" aria-hidden="true" tabindex="-1"></a>df1.add(df2, fill_value<span class="op">=</span><span class="dv">0</span>)  <span class="co"># 相加，在相加*之前*用 0 填充缺失值</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="103">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">a</th>
<th data-quarto-table-cell-role="th">b</th>
<th data-quarto-table-cell-role="th">c</th>
<th data-quarto-table-cell-role="th">d</th>
<th data-quarto-table-cell-role="th">e</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>0.0</td>
<td>2.0</td>
<td>4.0</td>
<td>6.0</td>
<td>4.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>9.0</td>
<td>5.0</td>
<td>13.0</td>
<td>15.0</td>
<td>9.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>18.0</td>
<td>20.0</td>
<td>22.0</td>
<td>24.0</td>
<td>14.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>15.0</td>
<td>16.0</td>
<td>17.0</td>
<td>18.0</td>
<td>19.0</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p><code>fill_value</code> 在运算<em>之前</em>替换缺失值。</p>
</div>
</div>
</section>
<section id="灵活的算术方法" class="level2">
<h2 class="anchored" data-anchor-id="灵活的算术方法">灵活的算术方法</h2>
<table class="caption-top table">
<thead>
<tr class="header">
<th style="text-align: left;">方法</th>
<th style="text-align: left;">描述</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><code>add, radd</code></td>
<td style="text-align: left;">加法 (+)</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>sub, rsub</code></td>
<td style="text-align: left;">减法 (-)</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>div, rdiv</code></td>
<td style="text-align: left;">除法 (/)</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>mul, rmul</code></td>
<td style="text-align: left;">乘法 (*)</td>
</tr>
</tbody>
</table>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p><code>r</code> 方法：反转参数（例如，<code>1 / df1</code> 等价于 <code>df1.rdiv(1)</code>）。</p>
</div>
</div>
</section>
<section id="dataframe-和-series-之间的运算" class="level2">
<h2 class="anchored" data-anchor-id="dataframe-和-series-之间的运算">DataFrame 和 Series 之间的运算</h2>
<div id="cfcda4c7" class="cell" data-execution_count="106">
<div class="sourceCode cell-code" id="cb169"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb169-1"><a href="#cb169-1" aria-hidden="true" tabindex="-1"></a>frame <span class="op">=</span> pd.DataFrame(np.arange(<span class="fl">12.</span>).reshape((<span class="dv">4</span>, <span class="dv">3</span>)),</span>
<span id="cb169-2"><a href="#cb169-2" aria-hidden="true" tabindex="-1"></a>                     columns<span class="op">=</span><span class="bu">list</span>(<span class="st">'bde'</span>),</span>
<span id="cb169-3"><a href="#cb169-3" aria-hidden="true" tabindex="-1"></a>                     index<span class="op">=</span>[<span class="st">'Utah'</span>, <span class="st">'Ohio'</span>, <span class="st">'Texas'</span>, <span class="st">'Oregon'</span>])</span>
<span id="cb169-4"><a href="#cb169-4" aria-hidden="true" tabindex="-1"></a>series <span class="op">=</span> frame.iloc[<span class="dv">0</span>] <span class="co"># 获取第一行</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="dataframe-和-series-之间的运算-续" class="level2">
<h2 class="anchored" data-anchor-id="dataframe-和-series-之间的运算-续">DataFrame 和 Series 之间的运算 (续)</h2>
<div id="4b2649cf" class="cell" data-execution_count="107">
<div class="sourceCode cell-code" id="cb170"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb170-1"><a href="#cb170-1" aria-hidden="true" tabindex="-1"></a>frame</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="105">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">b</th>
<th data-quarto-table-cell-role="th">d</th>
<th data-quarto-table-cell-role="th">e</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">Utah</td>
<td>0.0</td>
<td>1.0</td>
<td>2.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Ohio</td>
<td>3.0</td>
<td>4.0</td>
<td>5.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">Texas</td>
<td>6.0</td>
<td>7.0</td>
<td>8.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Oregon</td>
<td>9.0</td>
<td>10.0</td>
<td>11.0</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</section>
<section id="dataframe-和-series-之间的运算-续-1" class="level2">
<h2 class="anchored" data-anchor-id="dataframe-和-series-之间的运算-续-1">DataFrame 和 Series 之间的运算 (续)</h2>
<div id="192dc282" class="cell" data-execution_count="108">
<div class="sourceCode cell-code" id="cb171"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb171-1"><a href="#cb171-1" aria-hidden="true" tabindex="-1"></a>series</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="106">
<pre><code>b    0.0
d    1.0
e    2.0
Name: Utah, dtype: float64</code></pre>
</div>
</div>
</section>
<section id="dataframe-和-series-之间的运算-续-2" class="level2">
<h2 class="anchored" data-anchor-id="dataframe-和-series-之间的运算-续-2">DataFrame 和 Series 之间的运算 (续)</h2>
<div id="a3538007" class="cell" data-execution_count="109">
<div class="sourceCode cell-code" id="cb173"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb173-1"><a href="#cb173-1" aria-hidden="true" tabindex="-1"></a>frame <span class="op">-</span> series  <span class="co"># 从 DataFrame 中减去 Series（广播）</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="107">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">b</th>
<th data-quarto-table-cell-role="th">d</th>
<th data-quarto-table-cell-role="th">e</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">Utah</td>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Ohio</td>
<td>3.0</td>
<td>3.0</td>
<td>3.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">Texas</td>
<td>6.0</td>
<td>6.0</td>
<td>6.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Oregon</td>
<td>9.0</td>
<td>9.0</td>
<td>9.0</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>DataFrame 和 Series 之间的算术运算默认沿行广播。</p>
</div>
</div>
</section>
<section id="跨列广播" class="level2">
<h2 class="anchored" data-anchor-id="跨列广播">跨列广播</h2>
<div id="f73fb632" class="cell" data-execution_count="110">
<div class="sourceCode cell-code" id="cb174"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb174-1"><a href="#cb174-1" aria-hidden="true" tabindex="-1"></a>series3 <span class="op">=</span> frame[<span class="st">'d'</span>]  <span class="co"># 获取 'd' 列</span></span>
<span id="cb174-2"><a href="#cb174-2" aria-hidden="true" tabindex="-1"></a>series3</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="108">
<pre><code>Utah       1.0
Ohio       4.0
Texas      7.0
Oregon    10.0
Name: d, dtype: float64</code></pre>
</div>
</div>
</section>
<section id="跨列广播-续" class="level2">
<h2 class="anchored" data-anchor-id="跨列广播-续">跨列广播 (续)</h2>
<div id="4e7d91a1" class="cell" data-execution_count="111">
<div class="sourceCode cell-code" id="cb176"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb176-1"><a href="#cb176-1" aria-hidden="true" tabindex="-1"></a>frame.sub(series3, axis<span class="op">=</span><span class="st">'index'</span>)  <span class="co"># 匹配索引（行），跨列广播</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="109">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">b</th>
<th data-quarto-table-cell-role="th">d</th>
<th data-quarto-table-cell-role="th">e</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">Utah</td>
<td>-1.0</td>
<td>0.0</td>
<td>1.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Ohio</td>
<td>-1.0</td>
<td>0.0</td>
<td>1.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">Texas</td>
<td>-1.0</td>
<td>0.0</td>
<td>1.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Oregon</td>
<td>-1.0</td>
<td>0.0</td>
<td>1.0</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p><code>axis='index'</code>（或 <code>axis=0</code>）跨列广播。</p>
</div>
</div>
</section>
<section id="函数应用和映射" class="level2">
<h2 class="anchored" data-anchor-id="函数应用和映射">函数应用和映射</h2>
<div id="66f9f6d4" class="cell" data-execution_count="112">
<div class="sourceCode cell-code" id="cb177"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb177-1"><a href="#cb177-1" aria-hidden="true" tabindex="-1"></a>frame <span class="op">=</span> pd.DataFrame(np.random.standard_normal((<span class="dv">4</span>, <span class="dv">3</span>)),</span>
<span id="cb177-2"><a href="#cb177-2" aria-hidden="true" tabindex="-1"></a>                     columns<span class="op">=</span><span class="bu">list</span>(<span class="st">'bde'</span>),</span>
<span id="cb177-3"><a href="#cb177-3" aria-hidden="true" tabindex="-1"></a>                     index<span class="op">=</span>[<span class="st">'Utah'</span>, <span class="st">'Ohio'</span>, <span class="st">'Texas'</span>, <span class="st">'Oregon'</span>])</span>
<span id="cb177-4"><a href="#cb177-4" aria-hidden="true" tabindex="-1"></a>frame</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="110">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">b</th>
<th data-quarto-table-cell-role="th">d</th>
<th data-quarto-table-cell-role="th">e</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">Utah</td>
<td>0.382569</td>
<td>1.036166</td>
<td>-0.321140</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Ohio</td>
<td>-0.151519</td>
<td>0.342653</td>
<td>-0.766804</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">Texas</td>
<td>1.313219</td>
<td>-0.545521</td>
<td>-0.065476</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Oregon</td>
<td>2.122690</td>
<td>-2.140999</td>
<td>-0.130873</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</section>
<section id="函数应用和映射-续" class="level2">
<h2 class="anchored" data-anchor-id="函数应用和映射-续">函数应用和映射 (续)</h2>
<div id="381c0ad8" class="cell" data-execution_count="113">
<div class="sourceCode cell-code" id="cb178"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb178-1"><a href="#cb178-1" aria-hidden="true" tabindex="-1"></a>np.<span class="bu">abs</span>(frame)  <span class="co"># 逐元素应用 NumPy 的绝对值函数 (ufunc)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="111">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">b</th>
<th data-quarto-table-cell-role="th">d</th>
<th data-quarto-table-cell-role="th">e</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">Utah</td>
<td>0.382569</td>
<td>1.036166</td>
<td>0.321140</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Ohio</td>
<td>0.151519</td>
<td>0.342653</td>
<td>0.766804</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">Texas</td>
<td>1.313219</td>
<td>0.545521</td>
<td>0.065476</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Oregon</td>
<td>2.122690</td>
<td>2.140999</td>
<td>0.130873</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</section>
<section id="使用-apply-应用函数" class="level2">
<h2 class="anchored" data-anchor-id="使用-apply-应用函数">使用 <code>apply</code> 应用函数</h2>
<div id="6bd4ea15" class="cell" data-execution_count="114">
<div class="sourceCode cell-code" id="cb179"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb179-1"><a href="#cb179-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> f1(x):</span>
<span id="cb179-2"><a href="#cb179-2" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> x.<span class="bu">max</span>() <span class="op">-</span> x.<span class="bu">min</span>() <span class="co"># 定义一个对 Series 进行操作的函数</span></span>
<span id="cb179-3"><a href="#cb179-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb179-4"><a href="#cb179-4" aria-hidden="true" tabindex="-1"></a>frame.<span class="bu">apply</span>(f1)  <span class="co"># 沿列应用函数（默认轴是 'index'）</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="112">
<pre><code>b    2.274209
d    3.177165
e    0.701328
dtype: float64</code></pre>
</div>
</div>
</section>
<section id="使用-apply-应用函数-续" class="level2">
<h2 class="anchored" data-anchor-id="使用-apply-应用函数-续">使用 <code>apply</code> 应用函数 (续)</h2>
<div id="0e1b9314" class="cell" data-execution_count="115">
<div class="sourceCode cell-code" id="cb181"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb181-1"><a href="#cb181-1" aria-hidden="true" tabindex="-1"></a>frame.<span class="bu">apply</span>(f1, axis<span class="op">=</span><span class="st">'columns'</span>)  <span class="co"># 沿行应用函数 (axis='columns')</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="113">
<pre><code>Utah      1.357306
Ohio      1.109457
Texas     1.858740
Oregon    4.263688
dtype: float64</code></pre>
</div>
</div>
</section>
<section id="应用返回-series-的函数" class="level2">
<h2 class="anchored" data-anchor-id="应用返回-series-的函数">应用返回 Series 的函数</h2>
<div id="b9b5ef2b" class="cell" data-execution_count="116">
<div class="sourceCode cell-code" id="cb183"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb183-1"><a href="#cb183-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> f2(x):</span>
<span id="cb183-2"><a href="#cb183-2" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 定义一个返回带有 'min' 和 'max' 的 Series 的函数</span></span>
<span id="cb183-3"><a href="#cb183-3" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> pd.Series([x.<span class="bu">min</span>(), x.<span class="bu">max</span>()], index<span class="op">=</span>[<span class="st">'min'</span>, <span class="st">'max'</span>])</span>
<span id="cb183-4"><a href="#cb183-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb183-5"><a href="#cb183-5" aria-hidden="true" tabindex="-1"></a>frame.<span class="bu">apply</span>(f2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="114">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">b</th>
<th data-quarto-table-cell-role="th">d</th>
<th data-quarto-table-cell-role="th">e</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">min</td>
<td>-0.151519</td>
<td>-2.140999</td>
<td>-0.766804</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">max</td>
<td>2.122690</td>
<td>1.036166</td>
<td>-0.065476</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</section>
<section id="使用-applymap-进行逐元素格式化" class="level2">
<h2 class="anchored" data-anchor-id="使用-applymap-进行逐元素格式化">使用 <code>applymap</code> 进行逐元素格式化</h2>
<div id="0376ccdb" class="cell" data-execution_count="117">
<div class="sourceCode cell-code" id="cb184"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb184-1"><a href="#cb184-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> my_format(x):</span>
<span id="cb184-2"><a href="#cb184-2" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="ss">f"</span><span class="sc">{</span>x<span class="sc">:.2f}</span><span class="ss">"</span>  <span class="co"># 定义一个格式化函数</span></span>
<span id="cb184-3"><a href="#cb184-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb184-4"><a href="#cb184-4" aria-hidden="true" tabindex="-1"></a>frame.applymap(my_format) <span class="co"># 对 DataFrame 逐元素应用</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>/tmp/ipykernel_3279/116467557.py:4: FutureWarning: DataFrame.applymap has been deprecated. Use DataFrame.map instead.
  frame.applymap(my_format) # 对 DataFrame 逐元素应用</code></pre>
</div>
<div class="cell-output cell-output-display" data-execution_count="115">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">b</th>
<th data-quarto-table-cell-role="th">d</th>
<th data-quarto-table-cell-role="th">e</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">Utah</td>
<td>0.38</td>
<td>1.04</td>
<td>-0.32</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Ohio</td>
<td>-0.15</td>
<td>0.34</td>
<td>-0.77</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">Texas</td>
<td>1.31</td>
<td>-0.55</td>
<td>-0.07</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Oregon</td>
<td>2.12</td>
<td>-2.14</td>
<td>-0.13</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p><code>applymap</code> 用于 DataFrame 的逐元素操作；<code>map</code> 用于 Series 的逐元素操作。</p>
</div>
</div>
</section>
<section id="排序" class="level2">
<h2 class="anchored" data-anchor-id="排序">排序</h2>
<div id="483eed77" class="cell" data-execution_count="118">
<div class="sourceCode cell-code" id="cb186"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb186-1"><a href="#cb186-1" aria-hidden="true" tabindex="-1"></a>obj <span class="op">=</span> pd.Series(np.arange(<span class="dv">4</span>), index<span class="op">=</span>[<span class="st">'d'</span>, <span class="st">'a'</span>, <span class="st">'b'</span>, <span class="st">'c'</span>])</span>
<span id="cb186-2"><a href="#cb186-2" aria-hidden="true" tabindex="-1"></a>obj.sort_index()  <span class="co"># 按索引标签排序</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="116">
<pre><code>a    1
b    2
c    3
d    0
dtype: int64</code></pre>
</div>
</div>
</section>
<section id="排序-续" class="level2">
<h2 class="anchored" data-anchor-id="排序-续">排序 (续)</h2>
<div id="114bc9e1" class="cell" data-execution_count="119">
<div class="sourceCode cell-code" id="cb188"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb188-1"><a href="#cb188-1" aria-hidden="true" tabindex="-1"></a>frame <span class="op">=</span> pd.DataFrame(np.arange(<span class="dv">8</span>).reshape((<span class="dv">2</span>, <span class="dv">4</span>)),</span>
<span id="cb188-2"><a href="#cb188-2" aria-hidden="true" tabindex="-1"></a>                     index<span class="op">=</span>[<span class="st">'three'</span>, <span class="st">'one'</span>],</span>
<span id="cb188-3"><a href="#cb188-3" aria-hidden="true" tabindex="-1"></a>                     columns<span class="op">=</span>[<span class="st">'d'</span>, <span class="st">'a'</span>, <span class="st">'b'</span>, <span class="st">'c'</span>])</span>
<span id="cb188-4"><a href="#cb188-4" aria-hidden="true" tabindex="-1"></a>frame.sort_index() <span class="co"># 按行索引排序</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="117">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">d</th>
<th data-quarto-table-cell-role="th">a</th>
<th data-quarto-table-cell-role="th">b</th>
<th data-quarto-table-cell-role="th">c</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">one</td>
<td>4</td>
<td>5</td>
<td>6</td>
<td>7</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">three</td>
<td>0</td>
<td>1</td>
<td>2</td>
<td>3</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</section>
<section id="排序-续-1" class="level2">
<h2 class="anchored" data-anchor-id="排序-续-1">排序 (续)</h2>
<div id="d2fa9bda" class="cell" data-execution_count="120">
<div class="sourceCode cell-code" id="cb189"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb189-1"><a href="#cb189-1" aria-hidden="true" tabindex="-1"></a>frame.sort_index(axis<span class="op">=</span><span class="st">'columns'</span>) <span class="co"># 按列索引排序</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="118">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">a</th>
<th data-quarto-table-cell-role="th">b</th>
<th data-quarto-table-cell-role="th">c</th>
<th data-quarto-table-cell-role="th">d</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">three</td>
<td>1</td>
<td>2</td>
<td>3</td>
<td>0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">one</td>
<td>5</td>
<td>6</td>
<td>7</td>
<td>4</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</section>
<section id="排序-续-2" class="level2">
<h2 class="anchored" data-anchor-id="排序-续-2">排序 (续)</h2>
<div id="14e855e5" class="cell" data-execution_count="121">
<div class="sourceCode cell-code" id="cb190"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb190-1"><a href="#cb190-1" aria-hidden="true" tabindex="-1"></a>frame.sort_index(axis<span class="op">=</span><span class="st">'columns'</span>, ascending<span class="op">=</span><span class="va">False</span>) <span class="co"># 降序排序</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="119">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">d</th>
<th data-quarto-table-cell-role="th">c</th>
<th data-quarto-table-cell-role="th">b</th>
<th data-quarto-table-cell-role="th">a</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">three</td>
<td>0</td>
<td>3</td>
<td>2</td>
<td>1</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">one</td>
<td>4</td>
<td>7</td>
<td>6</td>
<td>5</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</section>
<section id="按值排序" class="level2">
<h2 class="anchored" data-anchor-id="按值排序">按值排序</h2>
<div id="7bbadc42" class="cell" data-execution_count="122">
<div class="sourceCode cell-code" id="cb191"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb191-1"><a href="#cb191-1" aria-hidden="true" tabindex="-1"></a>obj <span class="op">=</span> pd.Series([<span class="dv">4</span>, <span class="dv">7</span>, <span class="op">-</span><span class="dv">3</span>, <span class="dv">2</span>])</span>
<span id="cb191-2"><a href="#cb191-2" aria-hidden="true" tabindex="-1"></a>obj.sort_values()  <span class="co"># 按值排序</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="120">
<pre><code>2   -3
3    2
0    4
1    7
dtype: int64</code></pre>
</div>
</div>
</section>
<section id="按值排序-续" class="level2">
<h2 class="anchored" data-anchor-id="按值排序-续">按值排序 (续)</h2>
<div id="ae6cf72a" class="cell" data-execution_count="123">
<div class="sourceCode cell-code" id="cb193"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb193-1"><a href="#cb193-1" aria-hidden="true" tabindex="-1"></a>obj <span class="op">=</span> pd.Series([<span class="dv">4</span>, np.nan, <span class="dv">7</span>, np.nan, <span class="op">-</span><span class="dv">3</span>, <span class="dv">2</span>])</span>
<span id="cb193-2"><a href="#cb193-2" aria-hidden="true" tabindex="-1"></a>obj.sort_values()  <span class="co"># 缺失值 (NaN) 默认排序到末尾</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="121">
<pre><code>4   -3.0
5    2.0
0    4.0
2    7.0
1    NaN
3    NaN
dtype: float64</code></pre>
</div>
</div>
</section>
<section id="按列对-dataframe-排序" class="level2">
<h2 class="anchored" data-anchor-id="按列对-dataframe-排序">按列对 DataFrame 排序</h2>
<div id="0f8634e5" class="cell" data-execution_count="124">
<div class="sourceCode cell-code" id="cb195"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb195-1"><a href="#cb195-1" aria-hidden="true" tabindex="-1"></a>frame <span class="op">=</span> pd.DataFrame({<span class="st">'b'</span>: [<span class="dv">4</span>, <span class="dv">7</span>, <span class="op">-</span><span class="dv">3</span>, <span class="dv">2</span>], <span class="st">'a'</span>: [<span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">0</span>, <span class="dv">1</span>]})</span>
<span id="cb195-2"><a href="#cb195-2" aria-hidden="true" tabindex="-1"></a>frame</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="122">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">b</th>
<th data-quarto-table-cell-role="th">a</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>4</td>
<td>0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>7</td>
<td>1</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>-3</td>
<td>0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>2</td>
<td>1</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</section>
<section id="按列对-dataframe-排序-续" class="level2">
<h2 class="anchored" data-anchor-id="按列对-dataframe-排序-续">按列对 DataFrame 排序 (续)</h2>
<div id="a0e97f78" class="cell" data-execution_count="125">
<div class="sourceCode cell-code" id="cb196"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb196-1"><a href="#cb196-1" aria-hidden="true" tabindex="-1"></a>frame.sort_values(<span class="st">'b'</span>)  <span class="co"># 按 'b' 列排序</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="123">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">b</th>
<th data-quarto-table-cell-role="th">a</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>-3</td>
<td>0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>2</td>
<td>1</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>4</td>
<td>0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>7</td>
<td>1</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</section>
<section id="按列对-dataframe-排序-续-1" class="level2">
<h2 class="anchored" data-anchor-id="按列对-dataframe-排序-续-1">按列对 DataFrame 排序 (续)</h2>
<div id="b304c0e5" class="cell" data-execution_count="126">
<div class="sourceCode cell-code" id="cb197"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb197-1"><a href="#cb197-1" aria-hidden="true" tabindex="-1"></a>frame.sort_values([<span class="st">'a'</span>, <span class="st">'b'</span>])  <span class="co"># 按多列排序（先 'a'，再 'b'）</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="124">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">b</th>
<th data-quarto-table-cell-role="th">a</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>-3</td>
<td>0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">0</td>
<td>4</td>
<td>0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">3</td>
<td>2</td>
<td>1</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>7</td>
<td>1</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</section>
<section id="排名" class="level2">
<h2 class="anchored" data-anchor-id="排名">排名</h2>
<div id="aedfb193" class="cell" data-execution_count="127">
<div class="sourceCode cell-code" id="cb198"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb198-1"><a href="#cb198-1" aria-hidden="true" tabindex="-1"></a>obj <span class="op">=</span> pd.Series([<span class="dv">7</span>, <span class="op">-</span><span class="dv">5</span>, <span class="dv">7</span>, <span class="dv">4</span>, <span class="dv">2</span>, <span class="dv">0</span>, <span class="dv">4</span>])</span>
<span id="cb198-2"><a href="#cb198-2" aria-hidden="true" tabindex="-1"></a>obj.rank()  <span class="co"># 分配排名（平局使用平均排名）</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="125">
<pre><code>0    6.5
1    1.0
2    6.5
3    4.5
4    3.0
5    2.0
6    4.5
dtype: float64</code></pre>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>排名：分配从 1 到有效数据点数量的排名。</p>
</div>
</div>
</section>
<section id="排名方法" class="level2">
<h2 class="anchored" data-anchor-id="排名方法">排名方法</h2>
<table class="caption-top table">
<thead>
<tr class="header">
<th style="text-align: left;">方法</th>
<th style="text-align: left;">描述</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><code>average</code></td>
<td style="text-align: left;">默认：平局使用平均排名</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>min</code></td>
<td style="text-align: left;">使用最小排名</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>max</code></td>
<td style="text-align: left;">使用最大排名</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>first</code></td>
<td style="text-align: left;">按值出现的顺序排名</td>
</tr>
</tbody>
</table>
</section>
<section id="具有重复标签的轴索引" class="level2">
<h2 class="anchored" data-anchor-id="具有重复标签的轴索引">具有重复标签的轴索引</h2>
<div id="c13f7073" class="cell" data-execution_count="128">
<div class="sourceCode cell-code" id="cb200"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb200-1"><a href="#cb200-1" aria-hidden="true" tabindex="-1"></a>obj <span class="op">=</span> pd.Series(np.arange(<span class="dv">5</span>), index<span class="op">=</span>[<span class="st">'a'</span>, <span class="st">'a'</span>, <span class="st">'b'</span>, <span class="st">'b'</span>, <span class="st">'c'</span>])</span>
<span id="cb200-2"><a href="#cb200-2" aria-hidden="true" tabindex="-1"></a>obj</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="126">
<pre><code>a    0
a    1
b    2
b    3
c    4
dtype: int64</code></pre>
</div>
</div>
</section>
<section id="具有重复标签的轴索引-续" class="level2">
<h2 class="anchored" data-anchor-id="具有重复标签的轴索引-续">具有重复标签的轴索引 (续)</h2>
<div id="dfce0a07" class="cell" data-execution_count="129">
<div class="sourceCode cell-code" id="cb202"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb202-1"><a href="#cb202-1" aria-hidden="true" tabindex="-1"></a>obj.index.is_unique  <span class="co"># 检查索引标签是否唯一</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="127">
<pre><code>False</code></pre>
</div>
</div>
</section>
<section id="具有重复标签的轴索引-续-1" class="level2">
<h2 class="anchored" data-anchor-id="具有重复标签的轴索引-续-1">具有重复标签的轴索引 (续)</h2>
<div id="c8053163" class="cell" data-execution_count="130">
<div class="sourceCode cell-code" id="cb204"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb204-1"><a href="#cb204-1" aria-hidden="true" tabindex="-1"></a>obj[<span class="st">'a'</span>]  <span class="co"># 返回一个 Series（因为 'a' 重复）</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="128">
<pre><code>a    0
a    1
dtype: int64</code></pre>
</div>
</div>
</section>
<section id="具有重复标签的轴索引-续-2" class="level2">
<h2 class="anchored" data-anchor-id="具有重复标签的轴索引-续-2">具有重复标签的轴索引 (续)</h2>
<div id="7d6332d5" class="cell" data-execution_count="131">
<div class="sourceCode cell-code" id="cb206"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb206-1"><a href="#cb206-1" aria-hidden="true" tabindex="-1"></a>obj[<span class="st">'c'</span>]  <span class="co"># 返回一个标量（因为 'c' 唯一）</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="129">
<pre><code>np.int64(4)</code></pre>
</div>
</div>
</section>
<section id="汇总和计算描述性统计" class="level2">
<h2 class="anchored" data-anchor-id="汇总和计算描述性统计">汇总和计算描述性统计</h2>
<div id="77a7f5be" class="cell" data-execution_count="132">
<div class="sourceCode cell-code" id="cb208"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb208-1"><a href="#cb208-1" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> pd.DataFrame([[<span class="fl">1.4</span>, np.nan], [<span class="fl">7.1</span>, <span class="op">-</span><span class="fl">4.5</span>],</span>
<span id="cb208-2"><a href="#cb208-2" aria-hidden="true" tabindex="-1"></a>                   [np.nan, np.nan], [<span class="fl">0.75</span>, <span class="op">-</span><span class="fl">1.3</span>]],</span>
<span id="cb208-3"><a href="#cb208-3" aria-hidden="true" tabindex="-1"></a>                  index<span class="op">=</span>[<span class="st">'a'</span>, <span class="st">'b'</span>, <span class="st">'c'</span>, <span class="st">'d'</span>],</span>
<span id="cb208-4"><a href="#cb208-4" aria-hidden="true" tabindex="-1"></a>                  columns<span class="op">=</span>[<span class="st">'one'</span>, <span class="st">'two'</span>])</span>
<span id="cb208-5"><a href="#cb208-5" aria-hidden="true" tabindex="-1"></a>df</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="130">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">one</th>
<th data-quarto-table-cell-role="th">two</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">a</td>
<td>1.40</td>
<td>NaN</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">b</td>
<td>7.10</td>
<td>-4.5</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">c</td>
<td>NaN</td>
<td>NaN</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">d</td>
<td>0.75</td>
<td>-1.3</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</section>
<section id="汇总和计算描述性统计-续" class="level2">
<h2 class="anchored" data-anchor-id="汇总和计算描述性统计-续">汇总和计算描述性统计 (续)</h2>
<div id="101f85e2" class="cell" data-execution_count="133">
<div class="sourceCode cell-code" id="cb209"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb209-1"><a href="#cb209-1" aria-hidden="true" tabindex="-1"></a>df.<span class="bu">sum</span>()  <span class="co"># 计算列总和</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="131">
<pre><code>one    9.25
two   -5.80
dtype: float64</code></pre>
</div>
</div>
</section>
<section id="汇总和计算描述性统计-续-1" class="level2">
<h2 class="anchored" data-anchor-id="汇总和计算描述性统计-续-1">汇总和计算描述性统计 (续)</h2>
<div id="76304f5e" class="cell" data-execution_count="134">
<div class="sourceCode cell-code" id="cb211"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb211-1"><a href="#cb211-1" aria-hidden="true" tabindex="-1"></a>df.<span class="bu">sum</span>(axis<span class="op">=</span><span class="st">'columns'</span>)  <span class="co"># 计算行总和</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="132">
<pre><code>a    1.40
b    2.60
c    0.00
d   -0.55
dtype: float64</code></pre>
</div>
</div>
</section>
<section id="处理归约中的缺失值" class="level2">
<h2 class="anchored" data-anchor-id="处理归约中的缺失值">处理归约中的缺失值</h2>
<div id="4985c0db" class="cell" data-execution_count="135">
<div class="sourceCode cell-code" id="cb213"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb213-1"><a href="#cb213-1" aria-hidden="true" tabindex="-1"></a>df.<span class="bu">sum</span>(axis<span class="op">=</span><span class="st">'index'</span>, skipna<span class="op">=</span><span class="va">False</span>) <span class="co"># 在计算中包含 NaN</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="133">
<pre><code>one   NaN
two   NaN
dtype: float64</code></pre>
</div>
</div>
</section>
<section id="处理归约中的缺失值-续" class="level2">
<h2 class="anchored" data-anchor-id="处理归约中的缺失值-续">处理归约中的缺失值 (续)</h2>
<div id="40f355f5" class="cell" data-execution_count="136">
<div class="sourceCode cell-code" id="cb215"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb215-1"><a href="#cb215-1" aria-hidden="true" tabindex="-1"></a>df.mean(axis<span class="op">=</span><span class="st">'columns'</span>) <span class="co"># 计算平均值，排除 NaN（默认）</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="134">
<pre><code>a    1.400
b    1.300
c      NaN
d   -0.275
dtype: float64</code></pre>
</div>
</div>
</section>
<section id="描述性统计归约方法的选项" class="level2">
<h2 class="anchored" data-anchor-id="描述性统计归约方法的选项">描述性统计：归约方法的选项</h2>
<table class="caption-top table">
<thead>
<tr class="header">
<th style="text-align: left;">方法</th>
<th style="text-align: left;">描述</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><code>axis</code></td>
<td style="text-align: left;">轴 (‘index’ 表示行, ‘columns’ 表示列)</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>skipna</code></td>
<td style="text-align: left;">排除缺失值 (默认为 True)</td>
</tr>
</tbody>
</table>
</section>
<section id="间接统计" class="level2">
<h2 class="anchored" data-anchor-id="间接统计">间接统计</h2>
<div id="1c285d82" class="cell" data-execution_count="137">
<div class="sourceCode cell-code" id="cb217"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb217-1"><a href="#cb217-1" aria-hidden="true" tabindex="-1"></a>df.idxmax()  <span class="co"># 最大值的索引标签（对于每列）</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="135">
<pre><code>one    b
two    d
dtype: object</code></pre>
</div>
</div>
</section>
<section id="间接统计-续" class="level2">
<h2 class="anchored" data-anchor-id="间接统计-续">间接统计 (续)</h2>
<div id="a4851429" class="cell" data-execution_count="138">
<div class="sourceCode cell-code" id="cb219"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb219-1"><a href="#cb219-1" aria-hidden="true" tabindex="-1"></a>df.cumsum()  <span class="co"># 累积和（对于每列）</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="136">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">one</th>
<th data-quarto-table-cell-role="th">two</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">a</td>
<td>1.40</td>
<td>NaN</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">b</td>
<td>8.50</td>
<td>-4.5</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">c</td>
<td>NaN</td>
<td>NaN</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">d</td>
<td>9.25</td>
<td>-5.8</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</section>
<section id="describe-方法" class="level2">
<h2 class="anchored" data-anchor-id="describe-方法"><code>describe()</code> 方法</h2>
<div id="8970fdd4" class="cell" data-execution_count="139">
<div class="sourceCode cell-code" id="cb220"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb220-1"><a href="#cb220-1" aria-hidden="true" tabindex="-1"></a>df.describe()  <span class="co"># 生成描述性统计</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="137">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">one</th>
<th data-quarto-table-cell-role="th">two</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">count</td>
<td>3.000000</td>
<td>2.000000</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">mean</td>
<td>3.083333</td>
<td>-2.900000</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">std</td>
<td>3.493685</td>
<td>2.262742</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">min</td>
<td>0.750000</td>
<td>-4.500000</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">25%</td>
<td>1.075000</td>
<td>-3.700000</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">50%</td>
<td>1.400000</td>
<td>-2.900000</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">75%</td>
<td>4.250000</td>
<td>-2.100000</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">max</td>
<td>7.100000</td>
<td>-1.300000</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</section>
<section id="describe-方法-续" class="level2">
<h2 class="anchored" data-anchor-id="describe-方法-续"><code>describe()</code> 方法 (续)</h2>
<div id="11c0d8ea" class="cell" data-execution_count="140">
<div class="sourceCode cell-code" id="cb221"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb221-1"><a href="#cb221-1" aria-hidden="true" tabindex="-1"></a>obj <span class="op">=</span> pd.Series([<span class="st">'a'</span>, <span class="st">'a'</span>, <span class="st">'b'</span>, <span class="st">'c'</span>] <span class="op">*</span> <span class="dv">4</span>)</span>
<span id="cb221-2"><a href="#cb221-2" aria-hidden="true" tabindex="-1"></a>obj.describe() <span class="co"># 非数值数据的描述性统计</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="138">
<pre><code>count     16
unique     3
top        a
freq       8
dtype: object</code></pre>
</div>
</div>
</section>
<section id="描述性和汇总统计" class="level2">
<h2 class="anchored" data-anchor-id="描述性和汇总统计">描述性和汇总统计</h2>
<table class="caption-top table">
<thead>
<tr class="header">
<th style="text-align: left;">方法</th>
<th style="text-align: left;">描述</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><code>count</code></td>
<td style="text-align: left;">非 NA 值的数量</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>describe</code></td>
<td style="text-align: left;">计算一组汇总统计</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>min, max</code></td>
<td style="text-align: left;">计算最小值和最大值</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>idxmin, idxmax</code></td>
<td style="text-align: left;">计算达到最小值/最大值的索引标签</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>quantile</code></td>
<td style="text-align: left;">计算样本分位数 (0 到 1)</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>sum</code></td>
<td style="text-align: left;">求和</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>mean</code></td>
<td style="text-align: left;">平均值</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>median</code></td>
<td style="text-align: left;">中位数 (50% 分位数)</td>
</tr>
<tr class="odd">
<td style="text-align: left;">…</td>
<td style="text-align: left;">…</td>
</tr>
</tbody>
</table>
</section>
<section id="相关性和协方差" class="level2">
<h2 class="anchored" data-anchor-id="相关性和协方差">相关性和协方差</h2>
<p>首先加载数据</p>
<div id="c9fa8542" class="cell" data-execution_count="141">
<div class="sourceCode cell-code" id="cb223"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb223-1"><a href="#cb223-1" aria-hidden="true" tabindex="-1"></a>price <span class="op">=</span> pd.read_pickle(<span class="st">'examples/yahoo_price.pkl'</span>)</span>
<span id="cb223-2"><a href="#cb223-2" aria-hidden="true" tabindex="-1"></a>volume <span class="op">=</span> pd.read_pickle(<span class="st">'examples/yahoo_volume.pkl'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="相关性和协方差-续" class="level2">
<h2 class="anchored" data-anchor-id="相关性和协方差-续">相关性和协方差 (续)</h2>
<div id="df40df30" class="cell" data-execution_count="142">
<div class="sourceCode cell-code" id="cb224"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb224-1"><a href="#cb224-1" aria-hidden="true" tabindex="-1"></a>returns <span class="op">=</span> price.pct_change() <span class="co"># 变化百分比</span></span>
<span id="cb224-2"><a href="#cb224-2" aria-hidden="true" tabindex="-1"></a>returns.tail()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="140">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">AAPL</th>
<th data-quarto-table-cell-role="th">GOOG</th>
<th data-quarto-table-cell-role="th">IBM</th>
<th data-quarto-table-cell-role="th">MSFT</th>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">Date</th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">2016-10-17</td>
<td>-0.000680</td>
<td>0.001837</td>
<td>0.002072</td>
<td>-0.003483</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">2016-10-18</td>
<td>-0.000681</td>
<td>0.019616</td>
<td>-0.026168</td>
<td>0.007690</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2016-10-19</td>
<td>-0.002979</td>
<td>0.007846</td>
<td>0.003583</td>
<td>-0.002255</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">2016-10-20</td>
<td>-0.000512</td>
<td>-0.005652</td>
<td>0.001719</td>
<td>-0.004867</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2016-10-21</td>
<td>-0.003930</td>
<td>0.003011</td>
<td>-0.012474</td>
<td>0.042096</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</section>
<section id="相关性和协方差-续-1" class="level2">
<h2 class="anchored" data-anchor-id="相关性和协方差-续-1">相关性和协方差 (续)</h2>
<div id="6a23035a" class="cell" data-execution_count="143">
<div class="sourceCode cell-code" id="cb225"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb225-1"><a href="#cb225-1" aria-hidden="true" tabindex="-1"></a>returns[<span class="st">'MSFT'</span>].corr(returns[<span class="st">'IBM'</span>]) <span class="co"># MSFT 和 IBM 收益率之间的相关性</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="141">
<pre><code>np.float64(0.49976361144151144)</code></pre>
</div>
</div>
</section>
<section id="相关性和协方差-续-2" class="level2">
<h2 class="anchored" data-anchor-id="相关性和协方差-续-2">相关性和协方差 (续)</h2>
<div id="d7c54b6f" class="cell" data-execution_count="144">
<div class="sourceCode cell-code" id="cb227"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb227-1"><a href="#cb227-1" aria-hidden="true" tabindex="-1"></a>returns[<span class="st">'MSFT'</span>].cov(returns[<span class="st">'IBM'</span>])  <span class="co"># MSFT 和 IBM 收益率之间的协方差</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="142">
<pre><code>np.float64(8.870655479703546e-05)</code></pre>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p><code>corr</code>：相关性。<code>cov</code>：协方差。</p>
</div>
</div>
</section>
<section id="dataframe-上的-corr-和-cov" class="level2">
<h2 class="anchored" data-anchor-id="dataframe-上的-corr-和-cov">DataFrame 上的 <code>corr</code> 和 <code>cov</code></h2>
<div id="62cea113" class="cell" data-execution_count="145">
<div class="sourceCode cell-code" id="cb229"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb229-1"><a href="#cb229-1" aria-hidden="true" tabindex="-1"></a>returns.corr()  <span class="co"># 相关矩阵</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="143">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">AAPL</th>
<th data-quarto-table-cell-role="th">GOOG</th>
<th data-quarto-table-cell-role="th">IBM</th>
<th data-quarto-table-cell-role="th">MSFT</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">AAPL</td>
<td>1.000000</td>
<td>0.407919</td>
<td>0.386817</td>
<td>0.389695</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">GOOG</td>
<td>0.407919</td>
<td>1.000000</td>
<td>0.405099</td>
<td>0.465919</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">IBM</td>
<td>0.386817</td>
<td>0.405099</td>
<td>1.000000</td>
<td>0.499764</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">MSFT</td>
<td>0.389695</td>
<td>0.465919</td>
<td>0.499764</td>
<td>1.000000</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</section>
<section id="corr-和-cov-on-dataframe-续" class="level2">
<h2 class="anchored" data-anchor-id="corr-和-cov-on-dataframe-续"><code>corr</code> 和 <code>cov</code> on DataFrame (续)</h2>
<div id="b58a4f3b" class="cell" data-execution_count="146">
<div class="sourceCode cell-code" id="cb230"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb230-1"><a href="#cb230-1" aria-hidden="true" tabindex="-1"></a>returns.cov()  <span class="co"># 协方差矩阵</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="144">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">AAPL</th>
<th data-quarto-table-cell-role="th">GOOG</th>
<th data-quarto-table-cell-role="th">IBM</th>
<th data-quarto-table-cell-role="th">MSFT</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">AAPL</td>
<td>0.000277</td>
<td>0.000107</td>
<td>0.000078</td>
<td>0.000095</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">GOOG</td>
<td>0.000107</td>
<td>0.000251</td>
<td>0.000078</td>
<td>0.000108</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">IBM</td>
<td>0.000078</td>
<td>0.000078</td>
<td>0.000146</td>
<td>0.000089</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">MSFT</td>
<td>0.000095</td>
<td>0.000108</td>
<td>0.000089</td>
<td>0.000215</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</section>
<section id="corrwith-方法" class="level2">
<h2 class="anchored" data-anchor-id="corrwith-方法"><code>corrwith</code> 方法</h2>
<div id="92a51f8f" class="cell" data-execution_count="147">
<div class="sourceCode cell-code" id="cb231"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb231-1"><a href="#cb231-1" aria-hidden="true" tabindex="-1"></a>returns.corrwith(returns[<span class="st">'IBM'</span>])  <span class="co"># 与 IBM 收益率的成对相关性</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="145">
<pre><code>AAPL    0.386817
GOOG    0.405099
IBM     1.000000
MSFT    0.499764
dtype: float64</code></pre>
</div>
</div>
</section>
<section id="corrwith-方法-续" class="level2">
<h2 class="anchored" data-anchor-id="corrwith-方法-续"><code>corrwith</code> 方法 (续)</h2>
<div id="eba13cbf" class="cell" data-execution_count="148">
<div class="sourceCode cell-code" id="cb233"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb233-1"><a href="#cb233-1" aria-hidden="true" tabindex="-1"></a>returns.corrwith(volume)  <span class="co"># 与成交量的成对相关性</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="146">
<pre><code>AAPL   -0.075565
GOOG   -0.007067
IBM    -0.204849
MSFT   -0.092950
dtype: float64</code></pre>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>计算成对相关性。</p>
</div>
</div>
</section>
<section id="唯一值值计数和成员资格" class="level2">
<h2 class="anchored" data-anchor-id="唯一值值计数和成员资格">唯一值、值计数和成员资格</h2>
<div id="e6f63ff4" class="cell" data-execution_count="149">
<div class="sourceCode cell-code" id="cb235"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb235-1"><a href="#cb235-1" aria-hidden="true" tabindex="-1"></a>obj <span class="op">=</span> pd.Series([<span class="st">'c'</span>, <span class="st">'a'</span>, <span class="st">'d'</span>, <span class="st">'a'</span>, <span class="st">'a'</span>, <span class="st">'b'</span>, <span class="st">'b'</span>, <span class="st">'c'</span>, <span class="st">'c'</span>])</span>
<span id="cb235-2"><a href="#cb235-2" aria-hidden="true" tabindex="-1"></a>uniques <span class="op">=</span> obj.unique()  <span class="co"># 获取唯一值</span></span>
<span id="cb235-3"><a href="#cb235-3" aria-hidden="true" tabindex="-1"></a>uniques</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="147">
<pre><code>array(['c', 'a', 'd', 'b'], dtype=object)</code></pre>
</div>
</div>
</section>
<section id="唯一值值计数和成员资格-续" class="level2">
<h2 class="anchored" data-anchor-id="唯一值值计数和成员资格-续">唯一值、值计数和成员资格 (续)</h2>
<div id="06103ba2" class="cell" data-execution_count="150">
<div class="sourceCode cell-code" id="cb237"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb237-1"><a href="#cb237-1" aria-hidden="true" tabindex="-1"></a>obj.value_counts()  <span class="co"># 计算每个值的出现次数</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="148">
<pre><code>c    3
a    3
b    2
d    1
Name: count, dtype: int64</code></pre>
</div>
</div>
</section>
<section id="唯一值值计数和成员资格-续-1" class="level2">
<h2 class="anchored" data-anchor-id="唯一值值计数和成员资格-续-1">唯一值、值计数和成员资格 (续)</h2>
<div id="1cb50d01" class="cell" data-execution_count="151">
<div class="sourceCode cell-code" id="cb239"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb239-1"><a href="#cb239-1" aria-hidden="true" tabindex="-1"></a>pd.value_counts(obj.to_numpy(), sort<span class="op">=</span><span class="va">False</span>) <span class="co">#使用pd.value_counts()</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>/tmp/ipykernel_3279/2588954155.py:1: FutureWarning: pandas.value_counts is deprecated and will be removed in a future version. Use pd.Series(obj).value_counts() instead.
  pd.value_counts(obj.to_numpy(), sort=False) #使用pd.value_counts()</code></pre>
</div>
<div class="cell-output cell-output-display" data-execution_count="149">
<pre><code>c    3
a    3
d    1
b    2
Name: count, dtype: int64</code></pre>
</div>
</div>
</section>
<section id="isin-方法" class="level2">
<h2 class="anchored" data-anchor-id="isin-方法"><code>isin</code> 方法</h2>
<div id="5ca9e52e" class="cell" data-execution_count="152">
<div class="sourceCode cell-code" id="cb242"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb242-1"><a href="#cb242-1" aria-hidden="true" tabindex="-1"></a>obj</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="150">
<pre><code>0    c
1    a
2    d
3    a
4    a
5    b
6    b
7    c
8    c
dtype: object</code></pre>
</div>
</div>
</section>
<section id="isin-方法续" class="level2">
<h2 class="anchored" data-anchor-id="isin-方法续"><code>isin</code> 方法(续)</h2>
<div id="ed904fbb" class="cell" data-execution_count="153">
<div class="sourceCode cell-code" id="cb244"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb244-1"><a href="#cb244-1" aria-hidden="true" tabindex="-1"></a>mask <span class="op">=</span> obj.isin([<span class="st">'b'</span>, <span class="st">'c'</span>])  <span class="co"># 检查是否属于 ['b', 'c']</span></span>
<span id="cb244-2"><a href="#cb244-2" aria-hidden="true" tabindex="-1"></a>mask</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="151">
<pre><code>0     True
1    False
2    False
3    False
4    False
5     True
6     True
7     True
8     True
dtype: bool</code></pre>
</div>
</div>
</section>
<section id="isin-方法-续" class="level2">
<h2 class="anchored" data-anchor-id="isin-方法-续"><code>isin</code> 方法 (续)</h2>
<div id="2fee2632" class="cell" data-execution_count="154">
<div class="sourceCode cell-code" id="cb246"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb246-1"><a href="#cb246-1" aria-hidden="true" tabindex="-1"></a>obj[mask]  <span class="co"># 选择 mask 为 True 的元素</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="152">
<pre><code>0    c
5    b
6    b
7    c
8    c
dtype: object</code></pre>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p><code>isin</code>：检查成员资格。</p>
</div>
</div>
</section>
<section id="总结" class="level2">
<h2 class="anchored" data-anchor-id="总结">总结</h2>
<ul>
<li>我们学习了 pandas 的基础数据结构：<strong>Series</strong> 和 <strong>DataFrame</strong>。</li>
<li>掌握了关键操作：<strong>索引</strong>、<strong>选择</strong>、<strong>过滤</strong>、<strong>算术运算</strong>、<strong>函数应用</strong>、<strong>排序</strong>、<strong>排名</strong>以及<strong>描述性统计</strong>。</li>
<li>了解了如何<strong>处理缺失数据</strong>。</li>
</ul>
</section>
<section id="思考与讨论" class="level2">
<h2 class="anchored" data-anchor-id="思考与讨论">思考与讨论</h2>
<ul>
<li>对比 pandas 和其他数据分析工具 (例如 Excel, R)，各自的优势和劣势是什么？</li>
<li>在实际工作中，有哪些 pandas 的应用场景？</li>
<li>pandas 有哪些局限性？ 在什么情况下应该选择其他工具？</li>
<li>数据对齐和广播在 pandas 中为何如此重要？</li>
</ul>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleGiscusIfUsed = (isAlternate, darkModeDefault) => {
    const baseTheme = document.querySelector('#giscus-base-theme')?.value ?? 'light';
    const alternateTheme = document.querySelector('#giscus-alt-theme')?.value ?? 'dark';
    let newTheme = '';
    if(darkModeDefault) {
      newTheme = isAlternate ? baseTheme : alternateTheme;
    } else {
      newTheme = isAlternate ? alternateTheme : baseTheme;
    }
    const changeGiscusTheme = () => {
      // From: https://github.com/giscus/giscus/issues/336
      const sendMessage = (message) => {
        const iframe = document.querySelector('iframe.giscus-frame');
        if (!iframe) return;
        iframe.contentWindow.postMessage({ giscus: message }, 'https://giscus.app');
      }
      sendMessage({
        setConfig: {
          theme: newTheme
        }
      });
    }
    const isGiscussLoaded = window.document.querySelector('iframe.giscus-frame') !== null;
    if (isGiscussLoaded) {
      changeGiscusTheme();
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  const darkModeDefault = false;
  let localAlternateSentinel = darkModeDefault ? 'alternate' : 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
    toggleGiscusIfUsed(toAlternate, darkModeDefault);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp("https:\/\/qiufei\.github\.io\/web-slide-pandas3ed");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
<p>🔋<a href="https://posit.co"><img src="https://posit.co/wp-content/themes/Posit/assets/images/posit-logo-2024.svg" class="img-fluid" alt="Posit" width="65"></a></p>
</div>   
    <div class="nav-footer-center">
      <ul class="footer-items list-unstyled">
    <li class="nav-item">
 邱飞 © 2025
  </li>  
    <li class="nav-item">
    <a class="nav-link" href="https://beian.miit.gov.cn">
<p>浙ICP备 2024072710号-1</p>
</a>
  </li>  
    <li class="nav-item">
    <a class="nav-link" href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=33021202002511">
<p>浙公网安备 33021202002511号</p>
</a>
  </li>  
</ul>
    </div>
    <div class="nav-footer-right">
      <ul class="footer-items list-unstyled">
    <li class="nav-item compact">
    <a class="nav-link" href="mailto:hfutqiufei@163.com">
      <i class="bi bi-envelope-at-fill" role="img">
</i> 
    </a>
  </li>  
</ul>
    </div>
  </div>
</footer>




</body></html>